"use strict";(self["webpackChunkquant_ux"]=self["webpackChunkquant_ux"]||[]).push([[977],{59740:function(e,t,o){o.d(t,{A:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("ZoomDialog",{ref:"dialog"},[t("div",{staticClass:"MatcDialog MatcErrorDialog"},[t("h2",{staticClass:"title"},[e._v(e._s(e.message))]),t("label",[e._v("Stack")]),t("pre",{staticClass:"MatcErrorStackTrace"},[e._v(e._s(e.stack))]),t("label",[e._v("Trace")]),t("pre",{staticClass:"MatcErrorStackTrace"},[e._v(e._s(e.trace))]),t("div",{staticClass:"MatcButtonBar MatcMarginTop"},[t("a",{staticClass:"MatcButton",on:{click:e.close}},[e._v("Close")]),t("a",{staticClass:"MatcButton",on:{click:function(t){e.doNotShowAgain=!0,e.close()}}},[e._v("Do not show again")])])])])},r=[],a=o(47546),n=o(24634),i=(o(42762),o(47681)),c=o(91098),l={name:"ErrorDialog",props:["pub"],mixins:[],data:function(){return{message:"",stack:"",trace:"",doNotShowAgain:!1}},watch:{},components:{ZoomDialog:c.A},methods:{close:function(){this.$refs.dialog.close()},show:function(e,t){this.doNotShowAgain||(this.$refs.dialog.show(),this.message=e,this.stack=e.stack.trim(),this.trace=t)}},mounted:function(){var e=this;return(0,n.A)((0,a.A)().mark((function t(){return(0,a.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.logger=new i.A("ErrorDialog");case 1:case"end":return t.stop()}}),t)})))()}},u=l,g=o(81656),p=(0,g.A)(u,s,r,!1,null,null,null),d=p.exports},91098:function(e,t,o){o.d(t,{A:function(){return l}});var s=function(){var e=this,t=e._self._c;return e.visible?t("div",{class:["ZoomDialogBackground",{ZoomDialogHidden:0==e.step},{ZoomDialogAnimation:e.step>=2}],on:{mousedown:e.close}},[t("div",{ref:"container",staticClass:"ZoomDialogContainer",on:{click:function(e){e.stopPropagation()},mousedown:function(e){e.stopPropagation()}}},[t("div",{ref:"wrapper",class:["ZoomDialogWrapper",{ZoomDialogWrapperOverflow:"visible"===e.overflow}]},[t("div",{ref:"content",staticClass:"ZoomDialogContent"},[e._t("default")],2)])])]):e._e()},r=[],a=(o(28706),{name:"ZoomDialog",props:["overflow"],data:function(){return{visible:!1,step:0}},methods:{show:function(e){var t=this,o=this.position(e);this.visible=!0,this.step=0,setTimeout((function(){t.animStep1(o)}),100)},animStep1:function(e){var t=this,o=this.$refs.container,s=this.$refs.content,r=this.position(s),a=e.w/r.w,n=e.h/r.h,i=Math.round(e.x-r.x),c=Math.round(e.y-r.y);o.style.transform="translate(".concat(i,"px, ").concat(c,"px) scale(").concat(a,", ").concat(n,")"),o.style.opacity=.3,this.step=1,setTimeout((function(){t.animStep2()}),100)},animStep2:function(){this.step=2;var e=this.$refs.container;e.style.transform="scale(1,1)",e.style.opacity=1},close:function(){this.visible=!1,this.step=0},position:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){e&&e.toLowerCase&&(e=document.getElementById(e));var o=e.getBoundingClientRect(),s={x:o.left,y:o.top,w:o.right-o.left,h:o.bottom-o.top};return t&&(s.x+=window.scrollX,s.y+=window.scrollY),s}return{x:0,y:0,w:100,h:100}},shake:function(){var e=this.$refs.wrapper;setTimeout((function(){e.style.left="50px"}),1),setTimeout((function(){e.style.left="-50px"}),51),setTimeout((function(){e.style.left="50px"}),101),setTimeout((function(){e.style.left="-50px"}),151),setTimeout((function(){e.style.left="0px"}),201)}}}),n=a,i=o(81656),c=(0,i.A)(n,s,r,!1,null,null,null),l=c.exports},75223:function(e,t,o){o.d(t,{A:function(){return v}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"MatcHeader",attrs:{id:""}},[t("div",{staticClass:"MatcHeaderLeft"},[t("a",{ref:"myPrototype",attrs:{href:"#/"}},[t("img",{ref:"logo",staticClass:"MatcHeaderLogo",attrs:{src:o(20195)}}),e._v(" Builder ")])]),e._m(0),t("div",{staticClass:"MatcHeaderRight"},[t("LanguagePicker",{on:{change:e.setLanguage}}),t("a",{attrs:{href:"#/logout.html"}},[t("QIcon",{attrs:{icon:"Logout"}})],1)],1)])},r=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"container MatcHeaderCenter"},[t("div",{staticClass:"MatcHeaderCenterLeft"}),t("div",{staticClass:"MatcHeaderCenterRight"})])}],a=o(47546),n=o(24634),i=o(28698),c=o(47681),l=o(56404),u=o(10950),g=o(15466),p=o(53721),d={name:"Header",mixins:[p.A],props:["user"],data:function(){return{}},watch:{user:function(e){this.logger.log(6,"watch","user >> "+e.email),this.user=e}},components:{LanguagePicker:u.A,QIcon:g.A},methods:{setLanguage:function(e){this.logger.log(-1,"setLanguage","entry",e),i.A.getUserService().setLanguage(e),this.$root.$i18n.locale=e,this.$root.$emit("Success",this.$i18n.t("common.language-changed"))},logout:function(){this.logger.log(2,"logout","entry"),i.A.getUserService().logout(),this.$emit("logout",i.A.getUserService().GUEST),(0,l.A)("/",!0)}},mounted:function(){var e=this;return(0,n.A)((0,a.A)().mark((function t(){return(0,a.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.logger=new c.A("Header"),e.logger.log(7,"mounted","exit >> "+e.user.email),e.addTooltip(e.$refs.logo,e.$t("header.tooltip.my-prototypes")),e.addTooltip(e.$refs.myPrototype,e.$t("header.tooltip.my-prototypes"));case 4:case"end":return t.stop()}}),t)})))()}},m=d,f=o(81656),h=(0,f.A)(m,s,r,!1,null,null,null),v=h.exports},1977:function(e,t,o){o.r(t),o.d(t,{default:function(){return b}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"Matc"},[e.isGuest?t("LoginPage",{attrs:{user:e.user},on:{login:e.onLogin}}):t("div",{staticClass:"MatcContainer"},[e.hasHeader?t("QHeader",{attrs:{user:e.user},on:{login:e.onLogin,logout:e.onLogout}}):e._e(),t("router-view",{on:{logout:e.onLogout}})],1),t("ErrorDialog",{ref:"errorDialog"})],1)},r=[],a=o(47546),n=o(24634),i=function(){var e=this,t=e._self._c;return t("div",{class:"MatcLoginPage "+(e.resetToken?"MatcLoginPageReset":"MactMainGradient")},[e.isQuxAuth?t("div",{staticClass:"MatcLoginPageDialog"},[t("div",{staticClass:"MatcLoginPageContainer"},[e.resetToken?e._e():t("div",{staticClass:"MatcToolbarTabs MatcToolbarTabsBig"},[t("a",{class:{MatcToolbarTabActive:"login"===e.tab},on:{click:function(t){return e.setTab("login")}}},[e._v("Login")]),e.allowSignUp?t("a",{class:{MatcToolbarTabActive:"signup"===e.tab},on:{click:function(t){return e.setTab("signup")}}},[e._v("Sign Up")]):e._e()]),t("div",{class:" MatcLoginWrapper "+e.tab},[t("div",{staticClass:"MatcLoginContent"},[t("div",{staticClass:"MatcLoginPageSection"},[t("div",{staticClass:"MatcLoginPageForm"},[t("div",{staticClass:"form-group"},[t("label",{},[e._v("Email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{placeholder:"Your email",type:"text"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),t("div",{staticClass:"form-group has-feedback"},[t("label",{},[e._v("Password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{placeholder:"Your password",type:"password"},domProps:{value:e.password},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)},input:function(t){t.target.composing||(e.password=t.target.value)}}})]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errorMessage,expression:"errorMessage"}],staticClass:"MatcErrorLabel"},[e._v(e._s(e.errorMessage))])]),t("div",{staticClass:"MatcButtonBar"},[t("a",{staticClass:"MatcButton MatcButtonPrimary",on:{click:e.login}},[e._v("Login")]),e.hasLoginError?t("a",{staticClass:"MatcLinkButton",on:{click:e.requestPasswordReset}},[e._v("Reset Password")]):e._e()])])]),e._v(" "),t("div",{staticClass:"MatcLoginContent"},[t("div",{staticClass:"MatcLoginPageSection"},[t("div",{staticClass:"MatcLoginPageForm"},[t("div",{staticClass:"form-group"},[t("label",{},[e._v("Email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{placeholder:"Your email",type:"text"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),t("div",{staticClass:"form-group has-feedback"},[t("label",{},[e._v("Password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{placeholder:"Your password",type:"password"},domProps:{value:e.password},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.signup.apply(null,arguments)},input:function(t){t.target.composing||(e.password=t.target.value)}}})]),t("div",{staticClass:"form-group has-feedback"},[t("div",{staticClass:"MatcCheckboxRow"},[t("CheckBox",{attrs:{label:""},model:{value:e.tos,callback:function(t){e.tos=t},expression:"tos"}}),t("span",{on:{click:function(t){e.tos=!0}}},[e._v("I accept the "),t("a",{attrs:{href:"#/tos.html",target:"_blank"}},[e._v("terms of service")])])],1)]),t("span",{staticClass:"MatcErrorLabel"},[e._v(e._s(e.errorMessage))])]),t("div",{staticClass:"MatcButtonBar"},[t("a",{staticClass:"MatcButton MatcButtonPrimary",on:{click:e.signup}},[e._v("SignUp")])])])]),e._v(" "),t("div",{staticClass:"MatcLoginContent"},[e.resetToken?t("div",{staticClass:"MatcLoginPageSection"},[t("div",{staticClass:"MatcLoginPageForm"},[t("div",{staticClass:"form-group"},[t("label",{},[e._v("Email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{placeholder:"Your email",type:"text"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),t("div",{staticClass:"form-group has-feedback"},[t("label",{},[e._v("New Password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{placeholder:"The new password",type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),t("span",{staticClass:"MatcErrorLabel"},[e._v(e._s(e.errorMessage))]),t("div",{staticClass:"MatcButtonBar"},[t("a",{staticClass:"MatcButton MatcButtonDanger",on:{click:e.resetPassword}},[e._v("Set new password")])])]):e._e()])])])]):e._e()])},c=[],l=(o(44114),o(28698)),u=o(47681),g=o(60993),p={name:"Header",mixins:[],props:["user"],data:function(){return{hasLoginError:!1,resetToken:!1,email:"",password:"",tos:!1,errorMessage:" ",tab:"signup",config:{}}},computed:{isQuxAuth:function(){return"keycloak"!==l.A.getConfig().auth},allowSignUp:function(){return this.config&&this.config.user&&!0===this.config.user.allowSignUp}},watch:{user:function(e){this.logger.log(6,"watch","user >> "+e.email),this.user=e}},components:{CheckBox:g.A},methods:{setTab:function(e){this.tab=e,this.errorMessage=" "},resetPassword:function(){var e=this;return(0,n.A)((0,a.A)().mark((function t(){var o;return(0,a.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.logger.info("resetPassword","enter ",e.email),!(e.email.length<2)){t.next=4;break}return e.errorMessage="Please enter your email",t.abrupt("return");case 4:if(!(e.password.length<6)){t.next=7;break}return e.errorMessage="Password too short",t.abrupt("return");case 7:if(!(e.resetToken.length<6)){t.next=10;break}return e.errorMessage="Token is wrong",t.abrupt("return");case 10:return t.next=12,l.A.getUserService().reset2(e.email,e.password,e.resetToken);case 12:o=t.sent,"error"===o.type?e.errorMessage="Someything is wrong":(e.errorMessage="",e.resetToken="",e.tab="login",e.$router.push("/"));case 14:case"end":return t.stop()}}),t)})))()},requestPasswordReset:function(){var e=this;return(0,n.A)((0,a.A)().mark((function t(){return(0,a.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.logger.info("requestPasswordReset","enter ",e.email),t.next=3,l.A.getUserService().reset(e.email);case 3:e.errorMessage="Check you mail.";case 4:case"end":return t.stop()}}),t)})))()},login:function(){var e=this;return(0,n.A)((0,a.A)().mark((function t(){var o;return(0,a.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.logger.info("login","enter ",e.email),t.next=3,l.A.getUserService().login({email:e.email,password:e.password});case 3:o=t.sent,"error"==o.type?(e.$root.$emit("Error","Wrong login credentials"),e.errorMessage="Login is wrong",e.hasLoginError=!0):(e.$emit("login",o),e.$root.$emit("UserLogin",o),e.hasLoginError=!1);case 5:case"end":return t.stop()}}),t)})))()},signup:function(){var e=this;return(0,n.A)((0,a.A)().mark((function t(){var o,s;return(0,a.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.logger.info("signup","enter ",e.email),!(e.password.length<6)){t.next=4;break}return e.errorMessage="Password too short",t.abrupt("return");case 4:if(!0===e.tos){t.next=7;break}return e.errorMessage="Please accept terms of service",t.abrupt("return");case 7:return t.next=9,l.A.getUserService().signup({email:e.email,password:e.password,tos:e.tos});case 9:if(o=t.sent,"error"!=o.type){t.next=14;break}o.errors.indexOf("user.create.domain")>=0?e.errorMessage="Not the correct domain":o.errors.indexOf("user.create.nosignup")>=0?e.errorMessage="No sign-ups allowed.":o.errors.indexOf("user.email.not.unique")>=0?e.errorMessage="Email is taken":e.errorMessage="Password too short",t.next=20;break;case 14:return t.next=16,l.A.getUserService().login({email:e.email,password:e.password});case 16:s=t.sent,e.$emit("login",s),e.$root.$emit("UserLogin",s),e.logger.log(-1,"signup","exit with login",e.email);case 20:case"end":return t.stop()}}),t)})))()},initKeyCloak:function(e){var t=l.A.getUserService();t.init(e)}},mounted:function(){var e=this;return(0,n.A)((0,a.A)().mark((function t(){return(0,a.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.logger=new u.A("LoginPage"),e.resetToken=e.$route.query.id,e.resetToken&&e.resetToken.length>2&&(e.logger.log(-1,"mounted","reset "),e.tab="reset"),e.config=l.A.getConfig(),e.logger.log(1,"mounted","exit > ");case 5:case"end":return t.stop()}}),t)})))()}},d=p,m=o(81656),f=(0,m.A)(d,i,c,!1,null,null,null),h=f.exports,v=o(75223),w=o(59740),C=o(71364),M=o(97941),k={name:"home",mixins:[],data:function(){return{hasHeader:!1,isDebug:!1,user:{id:-1,name:"Guest",email:"guest@quant-ux.com",role:"guest",lastlogin:0,lastNotification:0,tos:!1,paidUntil:0,plan:"Free"}}},components:{QHeader:v.A,ErrorDialog:w.A,LoginPage:h},computed:{isGuest:function(){return"guest"===this.user.role}},methods:{onLogin:function(e){this.user=e,this.logger.info("onLogin","exit >> "+this.user.email)},onLogout:function(e){console.debug("onLogout","enter"),this.user=e,this.logger.info("onLogout","exit >> "+this.user.email)},scrollTop:function(){window.scrollTo(0,0)},initRoute:function(){M.A.remove(C.A.body(),"MatcPublic"),M.A.remove(C.A.body(),"MatcVisualEditor"),M.A.remove(C.A.body(),"MatcLight"),this.scrollTop(),!0===this.$route.meta.hasHeader?this.hasHeader=!0:this.hasHeader=!1},showErrorDetails:function(e,t){this.isDebug&&this.$refs.errorDialog.show(e,t)}},watch:{$route:function(){this.initRoute()}},mounted:function(){var e=this;return(0,n.A)((0,a.A)().mark((function t(){return(0,a.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.logger=new u.A("QUX"),u.A.setErrorCallback((function(t,o){return e.showErrorDetails(t,o)})),e.initRoute(),t.next=5,l.A.getUserService().load();case 5:e.user=t.sent,e.logger.log(-1,"mounted","locale: "+navigator.language),window.onerror=function(t,o,s,r,a){return e.showErrorDetails(a,o),!0},e.$root.$on("MatcLogout",(function(t){e.onLogout(t)}));case 9:case"end":return t.stop()}}),t)})))()}},x=k,A=(0,m.A)(x,s,r,!1,null,null,null),b=A.exports}}]);
//# sourceMappingURL=977-legacy.d529f2eb.js.map