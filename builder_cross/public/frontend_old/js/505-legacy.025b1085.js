"use strict";(self["webpackChunkquant_ux"]=self["webpackChunkquant_ux"]||[]).push([[505],{24980:function(t,e,n){n.d(e,{A:function(){return y}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"VommondDropDownButton"},[e("div",{ref:"button",attrs:{type:"button"}},[e("QIcon",{attrs:{icon:t.icon}}),e("span",{attrs:{"data-dojo-attach-point":"label"}}),e("span",{staticClass:"caret"})],1),t._m(0)])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"VommondDropDownPopUp",attrs:{role:"menu","data-dojo-attach-point":"popup"}},[e("ul",{attrs:{role:"menu","data-dojo-attach-point":"ul"}})])}],s=n(93936),o=n(97941),a=n(75565),h=n(44549),u=n(82857),l=n(79151),c=n(47681),f=n(15466),p=n(49261),d=null,m={name:"DropDownButton",mixins:[s.A],props:["l","options","value"],data:function(){return{icon:"",selected:!1,hasObjects:!1,updateLabel:!0,maxLabelLength:-1,openCSS:"VommondDropDownButtonOpen",iconCSS:"VommondDropDownIcon",labelCSS:"VommondDropDownLabel",selectedCSS:"VommondDropDownButtonSelected",liCSS:""}},components:{QIcon:f.A},methods:{postCreate:function(){this.own((0,h.A)(this.domNode,u.A.press,a.A.hitch(this,"showDropDown"))),this.l&&this.setLabel(this.l),this.options&&this.setOptions(this.options),this.value&&this.setValue(this.value),this.button=this.$refs.button},showDropDown:function(t){this.stopEvent(t),this._dropDownOpen?(this.hideDropDown(),this._dropDownOpen=!1):(d&&(d.hideDropDown?d.hideDropDown():console.debug("showDropDown() Strange Open",d)),o.A.add(this.domNode,this.openCSS),this._mouseDownListener=(0,h.A)(l.A.body(),"mousedown",a.A.hitch(this,"hideDropDown")),d=this,this._dropDownOpen=!0)},hideDropDown:function(){try{this.domNode&&o.A.remove(this.domNode,this.openCSS),this._mouseDownListener&&this._mouseDownListener.remove(),d=null,this._dropDownOpen=!1}catch(t){console.error("hideDropDown",t)}},setOptions:function(t){this._lis={},this.renderOptions(t),this._options=t},renderOptions:function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=document.createElement("li");if(o.A.add(i,this.liCSS),r.label||r.icon){if(this.hasObjects=!0,r.icon&&i.appendChild((0,p.EH)(r.icon)),r.label){var s=document.createElement("label");o.A.add(s,this.labelCSS),s.innerHTML=r.label,i.appendChild(s)}r.selected&&(e=r.value),this.own((0,h.A)(i,u.A.press,a.A.hitch(this,"onChange",r.value))),this._lis[r.value]=i}else i.innerHTML=r,this._lis[r]=i,this.own((0,h.A)(i,u.A.press,a.A.hitch(this,"onChange",t[n])));this.ul.appendChild(i)}e&&this.setValue(e)},setLabel:function(t){if(this.label.innerHTML="",this.lastCSS&&o.A.remove(this.domNode,this.lastCSS),this.hasObjects&&this.updateLabel)for(var e=0;e<this._options.length;e++){var n=this._options[e];t==n.value&&this._updateLabel(n)}else t&&(this.label.innerHTML=t)},_updateLabel:function(t){if(t.icon&&(this.icon=t.icon),t.label){var e=document.createElement("span");o.A.add(e,this.labelCSS);var n=t.label;this.maxLabelLength>0&&n.length>this.maxLabelLength&&(n=n.substring(0,this.maxLabelLength)+"..."),e.innerHTML=n,this.label.appendChild(e)}t.css&&(o.A.add(this.domNode,t.css),this.lastCSS=t.css)},setValue:function(t){this._selectedLi&&o.A.remove(this._selectedLi,this.selectedCSS),this._lis[t]&&(o.A.add(this._lis[t],this.selectedCSS),this._selectedLi=this._lis[t]),this.updateLabel&&this.setLabel(t),this.selected=t},onChange:function(t,e){this.stopEvent(e),this.hideDropDown(),this.updateLabel&&this.setLabel(t),this.setValue(t),this.emit("change",t,e),this.emit("input",this.selected)}},watch:{value:function(t){this.setValue(t)}},mounted:function(){this.logger=new c.A("DropDownButton"),this.logger.log(10,"mounted","enter")}},g=m,v=n(81656),w=(0,v.A)(g,r,i,!1,null,null,null),y=w.exports},74013:function(t,e,n){n.d(e,{A:function(){return v}});var r=function(){var t=this,e=t._self._c;return e("div",{class:["VommondInput ",{VommondInputOpenTop:t.top}]},[e("input",{class:["MatcIgnoreOnKeyPress",{"form-control":t.formControl},{vommondInlineEdit:t.inline},{"MatcToobarInput MatcToobarInlineEdit":t.toolbar}],attrs:{type:"text","data-dojo-attach-point":"input",placeholder:t.placeholder,autocomplete:"false"},on:{focus:t.onFocus}}),!0===t.isDropDown?e("div",{staticClass:"VommondInputDropButton",on:{click:t.showAll}},[e("span",{staticClass:"caret"})]):t._e(),e("ul",{attrs:{role:"menu","data-dojo-attach-point":"ul"}})])},i=[],s=(n(44114),n(93936)),o=n(97941),a=n(75565),h=n(79151),u=n(44549),l=n(82857),c=n(18454),f=n(47681),p={name:"Input",mixins:[s.A],props:["fireOnBlur","top","placeholder","inline","formControl","hints","value","isDropDown","toolbar","actions","magicChar"],data:function(){return{}},components:{},methods:{postCreate:function(){this.own((0,u.A)(this.input,"keyup",a.A.hitch(this,"onKey"))),this.fireOnBlur&&this.own((0,u.A)(this.input,"blur",a.A.hitch(this,"onBlur")))},onBlur:function(){this.input.value&&this.emit("change",this.input.value)},onFocus:function(){this.emit("focus",this.input.value)},blur:function(){this.input.blur()},showAll:function(){for(var t=[],e=0;e<this.hints.length;e++){var n=this.hints[e];t.push(n)}t.length>0?this.showSuggestion(t):this.showSuggestion([])},onKey:function(t){if(this.hints){if(this.suggestions){var e=t.which||t.keyCode;if(27==e)return void this.hideSuggestion();if(40==e)return this.stopEvent(t),this.selected=Math.min(this.suggestions.length-1,this.selected+1),void this.highlight(this.selected);if(38==e)return this.stopEvent(t),this.selected=Math.max(-1,this.selected-1),void this.highlight(this.selected);if(13==e){if(this.selected>=0&&this.selected<this.suggestions.length)return this.stopEvent(t),void this.onSelect(this.suggestions[this.selected]);if(1==this.suggestions.length){if(!this.suggestions[0].action)return this.stopEvent(t),void this.onSelect(this.suggestions[0]);console.debug("onKey() Ignore empty ENTER")}if(this.fireOnBlur)return void this.emit("change",this.input.value);console.debug("onKey() Ignore empty ENTER")}}var n=[],r=this.input.value;if(r.length>=1){r=r.toLowerCase();for(var i=0;i<this.hints.length;i++){var s=this.hints[i];s._label.indexOf(r)>=0&&n.push(s)}}if(this.actions)for(var o=0;o<this.actions.length;o++){var a=this.actions[o];n.push(a)}n.length>0?this.showSuggestion(n):this.showSuggestion([])}},showSuggestion:function(t){if(!this.visible){var e=c.A.position(this.input);this.ul.style.width=e.w+"px",o.A.add(this.domNode,"VommondInputOpen"),this._mouseDownListener=(0,u.A)(h.A.body(),"mousedown",a.A.hitch(this,"hideSuggestion")),this.visible=!0,this.selected=-1}this.cleanUpTempListener(),this.ul.innerHTML="",this.lis=[];for(var n=0;n<t.length;n++){var r=t[n],i=document.createElement("li");i.innerHTML=r.label,r.css&&o.A.add(i,r.css),this.ul.appendChild(i),this.lis.push(i),this.tempOwn((0,u.A)(i,l.A.press,a.A.hitch(this,"onSelect",r)))}this.suggestions=t},highlight:function(t){if(this.lis)for(var e=0;e<this.lis.length;e++)e==t?(o.A.add(this.lis[e],"VommonInputSelected"),this.lis[e].scrollIntoView()):o.A.remove(this.lis[e],"VommonInputSelected")},onSelect:function(t){t.action?this.emit(t.action,t):(this.input.value=t.value,this.emit("change",t.value),this.hideSuggestion())},clear:function(){this.setValue("")},setValue:function(t){this.input.value=t},hideSuggestion:function(){o.A.remove(this.domNode,"VommondInputOpen"),this._mouseDownListener&&this._mouseDownListener.remove(),this.visible=!1,this.lis=null,this.selected=-1,this.cleanUpTempListener()},setCss:function(t){o.A.add(this.input,t)},setPlaceholder:function(t){this.input.placeholder=t},focus:function(){this.input.focus()},getValue:function(){return this.input.value},setHints:function(t){for(var e=0;e<t.length;e++)t[e]._label=t[e].label.toLowerCase();this.hints=t},destroy:function(){this.hideSuggestion(),this.cleanUpTempListener()}},watch:{fireOnBlur:function(t){this.log.log(2,"watch(fireOnBlur)","enter",t),this.fireOnBlur=t},top:function(t){this.log.log(2,"watch(top)","enter",t),this.top=t},placeholder:function(t){this.log.log(2,"watch(placeholder)","enter",t),this.placeholder=t},inline:function(t){this.log.log(2,"watch(inline)","enter",t),this.inline=t},hints:function(t){this.log.log(2,"watch(hints)","enter",t),this.setHints(t)},formControl:function(t){this.log.log(2,"watch(formControl)","enter",t),this.formControl=t},value:function(t){this.setValue(t)},isDropDown:function(t){this.isDropDown=t}},mounted:function(){this.log=new f.A("Input"),this.hints&&this.setHints(this.hints),this.value&&this.setValue(this.value),this.log.log(0,"mounted","enter ")}},d=p,m=n(81656),g=(0,m.A)(d,r,i,!1,null,null,null),v=g.exports},17268:function(t,e,n){n.d(e,{A:function(){return d}});var r=function(){var t=this;t._self._c;return t._m(0)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"VommondRadioBox"},[e("span",{staticClass:"VommondRadioBoxMark"})])}],s=n(93936),o=n(97941),a=n(82857),h=n(75565),u=n(44549),l={name:"RadioBox",mixins:[s.A],props:["selected"],data:function(){return{value:!1}},components:{},methods:{postCreate:function(){this.own((0,u.A)(this.domNode,a.A.press,h.A.hitch(this,"onChange")))},getValue:function(){return this.value},setValue:function(t){this.value=t,t?o.A.add(this.domNode,"VommondRadioBoxChecked"):o.A.remove(this.domNode,"VommondRadioBoxChecked")},setLabel:function(){},onChange:function(){this.setValue(!this.value),this.emit("change",this.value)}},watch:{selected:function(t){this.setValue(t)}},mounted:function(){this.selected&&this.setValue(this.selected)}},c=l,f=n(81656),p=(0,f.A)(c,r,i,!1,null,null,null),d=p.exports},47371:function(t,e,n){n.d(e,{A:function(){return m}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"VommondRadioBoxList"})},i=[],s=(n(44114),n(93936)),o=n(97941),a=n(75565),h=n(44549),u=n(82857),l=n(17268),c={name:"RadioBoxList",mixins:[s.A],props:["qOptions","qValue"],data:function(){return{value:!1,options:""}},components:{},methods:{postCreate:function(){if(this.options){var t=this.options.split(",");this.options=[];for(var e=0;e<t.length;e++)this.options.push({value:t[e],label:t[e]});this.render(this.options)}},setOptions:function(t){this.options=t,this.render(t)},render:function(t){var e=document.createElement("div");this.radios={};for(var n=0;n<t.length;n++){var r=t[n],i=document.createElement("div");o.A.add(i,"VommondRadioBoxListItem");var s=this.$new(l.A);s.placeAt(i),this.radios[r.value]=s;var c=document.createElement("span");c.innerHTML=r.label,o.A.add(c,"VommondRadioBoxLabel"),i.appendChild(c),e.appendChild(i),this.own((0,h.A)(i,u.A.press,a.A.hitch(this,"onChange",r)))}this.domNode.appendChild(e)},onChange:function(t){this.setValue(t.value),this.emit("change",this.value)},getValue:function(){return this.value},setValue:function(t){this.value=t;for(var e=0;e<this.options.length;e++){var n=this.options[e],r=this.radios[n.value];t==n.value?r.setValue(!0):r.setValue(!1)}}},mounted:function(){this.qOptions&&this.setOptions(this.qOptions),this.qValue&&this.setValue(this.qValue)}},f=c,p=n(81656),d=(0,p.A)(f,r,i,!1,null,null,null),m=d.exports},853:function(t,e,n){n.d(e,{A:function(){return g}});var r=function(){var t=this;t._self._c;return t._m(0)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"MatcDashRing"},[e("div",{staticClass:"MatcDashRingLabel MatcDashLabel",attrs:{"data-dojo-attach-point":"label"}}),e("div",{staticClass:"MatcDashRingCntr",attrs:{"data-dojo-attach-point":"container"}},[e("div",{staticClass:"MatcDashRingValue MatcVerticleMiddle",attrs:{"data-dojo-attach-point":"value"}})])])}],s=n(93936),o=n(75565),a=n(97941),h=n(44549),u=n(82857),l=n(47681),c=n(44328),f={name:"Ring",mixins:[c.A,s.A],data:function(){return{size:200,width:20,backgroundColor:null,color:null,color2:null,label:"",animationSpeed:30,noLabel:!1}},components:{},methods:{postCreate:function(){this.log=new l.A("Ring"),this._canvas=document.createElement("canvas"),this._canvas.height=this.size,this._canvas.width=this.size,this.container.appendChild(this._canvas),this.noLabel&&this.domNode.removeChild(this.label),this.width&&(this.width*=1),this.l&&this.setLabel(this.l),this.v&&this.setValue(this.v),this.p&&this.setPercent(1*this.p),this.p2&&this.setPercent2(1*this.p2),this.css&&a.A.add(this.domNode,this.css)},setValue:function(t){this.value.innerHTML=t},setLabel:function(t){this.label.innerHTML=t},setHelp:function(){var t=document.createElement("span");a.A.add(t,"mdi mdi-help-circle MatcHelpIcon"),this.label.appendChild(t),this.own((0,h.A)(t,u.A.press,o.A.hitch(this,"onHelp")))},setAction:function(t){var e=document.createElement("span");a.A.add(e,t+" MatcHelpIcon"),this.label.appendChild(e),this.own((0,h.A)(e,u.A.press,o.A.hitch(this,"onAction")))},onHelp:function(t){this.emit("help",t)},onAction:function(t){this.emit("action",t)},setColor:function(t){this.color=t},hideLabel:function(){this.domNode.removeChild(this.label)},setSize:function(t){this.domNode.style.height=t+"px",this.domNode.style.width=t+"px",this.container.style.height=t+"px",this.container.style.width=t+"px"},setDomSize:function(t,e){this.domNode.style.height=e+"px",this.domNode.style.width=t+"px"},setPercent:function(t){var e=this.size/2,n=e-this.width/2;this.clearProgress(),this.drawArc(e,n,t,this.getForeGroundColor(t))},setPercent2:function(t){var e=this.size/2,n=e-this.width/2-(this.width+4);this.drawArc(e,n,t,this.getForeGroundColor2(t))},setPercent3:function(t){var e=this.size/2,n=e-this.width/2-(this.width+4);this.drawArc(e,n,t,this.getForeGroundColor3(t))},setPs:function(t,e){var n=this.size,r=2*this.width,i=document.createElement("canvas");i.height=2*this.size,i.width=2*this.size;var s=i.getContext("2d");if(isNaN(t)&&(t=0),this.backgroundColor){var o=n-r;s.beginPath();var a=this.degreesToRadians(360*t),h=this.degreesToRadians(360);s.arc(n,n,o,a,h),s.strokeStyle=this.backgroundColor,s.lineWidth=r,s.stroke()}if(void 0!=t&&null!=t){var u=n-r;s.beginPath();var l=this.degreesToRadians(0),c=this.degreesToRadians(360*t);s.arc(n,n,u,l,c),s.strokeStyle=this.getForeGroundColor(t),s.lineWidth=r,s.stroke()}if(e){var f=n-r-(r+4);if(this.backgroundColor){s.beginPath();var p=this.degreesToRadians(360*t),d=this.degreesToRadians(360);s.arc(n,n,f,p,d),s.strokeStyle=this.backgroundColor,s.lineWidth=r,s.stroke()}s.beginPath();var m=this.degreesToRadians(0),g=this.degreesToRadians(360*e);s.arc(n,n,f,m,g),s.strokeStyle=this.getForeGroundColor2(e),s.lineWidth=r,s.stroke()}this._canvas&&(this.container.removeChild(this._canvas),delete this._canvas),this.container.style.backgroundSize="100% 100%",this.container.style.backgroundImage="url("+i.toDataURL("image/png")+")",this.container.style.height=this.size+"px",this.container.style.width=this.size+"px"},setPs2:function(t,e){var n=this.size,r=2*this.width,i=document.createElement("canvas");i.height=2*this.size,i.width=2*this.size;var s=i.getContext("2d");if(this.backgroundColor){var o=n-r-r;s.beginPath();var a=this.degreesToRadians(0),h=this.degreesToRadians(360);s.arc(n,n,o,a,h),s.strokeStyle=this.backgroundColor,s.lineWidth=2,s.stroke()}if(t){var u=n-r;s.beginPath();var l=this.degreesToRadians(0),c=this.degreesToRadians(360*t);s.arc(n,n,u,l,c),s.strokeStyle=this.getForeGroundColor(t),s.lineWidth=r,s.stroke()}if(e){var f=n-r-(2*r+2);s.beginPath();var p=this.degreesToRadians(0),d=this.degreesToRadians(360*e);s.arc(n,n,f,p,d),s.strokeStyle=this.getForeGroundColor2(e),s.lineWidth=r,s.stroke()}this._canvas&&(this.container.removeChild(this._canvas),delete this._canvas),this.container.style.backgroundSize="100% 100%",this.container.style.backgroundImage="url("+i.toDataURL("image/png")+")"},drawArc:function(t,e,n,r,i){var s=this._canvas,o=s.getContext("2d");if(i&&o.scale(2,2),this.backgroundColor){o.beginPath();var a=this.degreesToRadians(360*n),h=this.degreesToRadians(360);o.arc(t,t,e,a,h),o.strokeStyle=this.backgroundColor,o.lineWidth=this.width,o.stroke()}o.beginPath();var u=this.degreesToRadians(0),l=this.degreesToRadians(360*n);o.arc(t,t,e,u,l),o.strokeStyle=r,o.lineWidth=this.width,o.stroke()},getForeGroundColor:function(t){return this.color?this.color:this.greenToRed(t)},getForeGroundColor2:function(t){return this.color2?this.color2:this.greenToRed(t)},getForeGroundColor3:function(t){return this.color3?this.color3:this.greenToRed(t)},clearProgress:function(){var t=this._canvas,e=t.getContext("2d");e.clearRect(0,0,t.width,t.height)},degreesToRadians:function(t){return t*(Math.PI/180)-Math.PI/2},startAnimation:function(){this.animationRunning=!0,this.animationState=0,this.animate(),a.A.add(this.domNode,"MatcRingLoading")},stopAnimation:function(){this.animationRunning=!1,this.clearProgress(),a.A.remove(this.domNode,"MatcUploaderLoading")},animate:function(){if(this.animationRunning)if(this.setPercent(this.animationState),this.animationState+=.01,this.animationState>1.1&&(this.animationState=0),window.requestAnimationFrame){var t=o.A.hitch(this,"animate");requestAnimationFrame(t)}else setTimeout(o.A.hitch(this,"animate"),this.animationSpeed)}},mounted:function(){}},p=f,d=n(81656),m=(0,d.A)(p,r,i,!1,null,null,null),g=m.exports},44328:function(t,e,n){n.d(e,{A:function(){return d}});var r,i,s=n(72410),o=n(82857),a=n(44549),h=n(97941),u=n(75565),l={data:function(){return{colors_75:["#F4BF00","#FF1A00"],colors_50:["#ff9105","#ffbd21"],colors_25:["#00A4E0","#99cc00"],colors_0:["#0099cc","#2cb1e1"],redToYellow:["#ff4444","#ffae18"],yellowToGreen:["#ffae18","#83b600"],greenToGreen:["#b6db49","#75a800"],mini_palette:["#ffffff","#808080","#000000","#e2f4fb","#33b5e5","#0099cc","#e5caf2","#c182e0","#9933cc","#e2f0b6","#92c500","#669900","#ffecc0","#ffb61c","#ff8a00","#ffcaca","#f83a3a","#cc0000"],shadow_palette:["#ffffff","rgba(0,0,0,0.25)","rgba(0,0,0,0.5)","#e2f4fb","#33b5e5","#0099cc","#e5caf2","#c182e0","#9933cc","#e2f0b6","#92c500","#669900","#ffecc0","#ffb61c","#ff8a00","#ffcaca","#f83a3a","#cc0000"]}},methods:{mixColor:function(t){if(t<.25){var e=s.A.blendColors(new s.A(this.colors_0[0]),new s.A(this.colors_0[1]),t);return e.toHex()}if(t<.5){var n=s.A.blendColors(new s.A(this.colors_25[0]),new s.A(this.colors_25[1]),t);return n.toHex()}if(t<.75){var r=s.A.blendColors(new s.A(this.colors_50[0]),new s.A(this.colors_50[1]),t);return r.toHex()}var i=s.A.blendColors(new s.A(this.colors_75[0]),new s.A(this.colors_75[1]),t);return i.toHex()},greenToRed:function(t){if(t<.75){var e=s.A.blendColors(new s.A(this.redToYellow[0]),new s.A(this.redToYellow[1]),this.getPercentage(t,0,.75));return e.toHex()}var n=s.A.blendColors(new s.A(this.greenToGreen[0]),new s.A(this.greenToGreen[1]),this.getPercentage(t,.75,1));return n.toHex()},getPercentage:function(t,e,n){var r=n-e,i=t-e;return i/r},renderColorBoxes:function(t,e,n,r){var i={},s=document.createElement("table"),l=document.createElement("tbody");s.appendChild(l);for(var c=null,f=0;f<t.length;f++){f%n!=0&&null!=c||(c=document.createElement("tr"),l.appendChild(c));var p=t[f],d=document.createElement("td");h.A.add(d,"MatcColorBox MatcColorBox"+f%n);var m=document.createElement("span");m.style.backgroundColor=p,this.hasAlpha(p)&&h.A.add(m,"MatcColorAlphaBox"),i[p]=m,this.tempOwn((0,a.A)(m,o.A.press,u.A.hitch(this,r,p))),d.appendChild(m),c.appendChild(d)}return e.appendChild(s),i},hasAlpha:function(t){return t.indexOf("0.")>0}}},c=l,f=n(81656),p=(0,f.A)(c,r,i,!1,null,null,null),d=p.exports},87894:function(t,e,n){n.d(e,{A:function(){return d}});n(62010),n(27495),n(5746);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"MatcHelp"},[t.loading?e("span",{staticClass:"MatchHint"},[t._v(" Loading... ")]):e("div",{staticClass:"MatcHelpContentCntr"},[e("h2",[t._v(t._s(t.current.title))]),e("p",{staticClass:"MatcHelpContentParagraph",domProps:{innerHTML:t._s(t.current.body)}}),t.current.image?e("div",{staticClass:"MatcHelpContenImage"},[e("img",{attrs:{src:t.current.image.src}})]):t._e(),t.current.image&&t.current.image.caption?e("caption",[t._v(t._s(t.current.image.caption))]):t._e(),e("div",{staticClass:"MatcHelpContentVideo"},[t.current.video?e("iframe",{attrs:{width:560*t.videoScaleFactor,height:315*t.videoScaleFactor,src:t.current.video.src,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}):t._e()]),t.current.hasContact?e("div",[e("div",{staticClass:"form-group"},[e("label",[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.contactEmail,expression:"contactEmail"}],staticClass:"form-control MatcIgnoreOnKeyPress",domProps:{value:t.contactEmail},on:{input:function(e){e.target.composing||(t.contactEmail=e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("Message")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.contactMessage,expression:"contactMessage"}],staticClass:"form-control MatcIgnoreOnKeyPress",domProps:{value:t.contactMessage},on:{input:function(e){e.target.composing||(t.contactMessage=e.target.value)}}})]),e("div",{staticClass:"MatcButtonBar"},[e("div",{staticClass:"MatcButton MatcButtonPrimary",on:{click:t.sendContact}},[t._v("Send")]),e("span",{staticClass:"MatcError"},[t._v(" "+t._s(t.contactError)+" ")]),e("span",{staticClass:"MatcSuccess"},[t._v(" "+t._s(t.concatSucess)+" ")])])]):t._e(),t._l(t.current.paragraphs,(function(n){return e("div",{key:n.id,ref:"paragraph",refInFor:!0,class:"MatcHelpContentParagraph "+n.css,attrs:{pid:n.id}},[n.title?e("h3",[t._v(" "+t._s(n.title)+" ")]):t._e(),e("p",{domProps:{innerHTML:t._s(n.body)}}),n.image?e("div",{staticClass:"MatcHelpContenImage"},[e("img",{attrs:{src:n.image.src}})]):t._e(),n.image&&n.image.caption?e("caption",[t._v(t._s(n.image.caption))]):t._e(),n.video?e("iframe",{attrs:{width:560*t.videoScaleFactor,height:315*t.videoScaleFactor,src:n.video.src,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}):t._e()])}))],2),e("div",{},[t.hasSideBar?e("div",{staticClass:"MatcHelpTopics"},[t.hasSearch?e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"MatcCreateSearch MatcIgnoreOnKeyPress form-control",attrs:{type:"search",placeholder:"Search"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]):t._e(),t.loading?e("span",{staticClass:"MatchHint"},[t._v(" Loading... ")]):t._e(),e("div",{staticClass:"MatcHelpTopicsCntr"},[t.standalone?e("div",[t._l(t.topics,(function(n){return[e("a",{key:n.id,ref:"links",refInFor:!0,class:[{selected:n.id===t.selected&&!t.selectedParagraph},n.css],attrs:{href:"#/help/"+n.id+".html",topicid:n.id}},[t._v(" "+t._s(n.name)+" ")]),n.id===t.selected?[t._l(n.paragraphs,(function(r,i){return[r.title?e("a",{key:i,ref:"links",refInFor:!0,class:["MatcHelpSubTopic",{selected:r.id===t.selectedParagraph}],attrs:{href:"#/help/"+n.id+"/"+r.id+".html",topicid:r.id}},[t._v(" "+t._s(r.title)+" ")]):t._e()]}))]:t._e()]}))],2):e("div",[t._l(t.topics,(function(n){return[e("a",{key:n.id,ref:"links",refInFor:!0,class:[{selected:n.id===t.selected&&!t.selectedParagraph},n.css],attrs:{topicid:n.id},on:{click:function(e){return t.setTopic(n.id)}}},[t._v(" "+t._s(n.name)+" ")]),n.id===t.selected?[t._l(n.paragraphs,(function(n,r){return[n.title?e("a",{key:r,ref:"links",refInFor:!0,class:["MatcHelpSubTopic",{selected:n.id===t.selectedParagraph}],attrs:{topicid:n.id},on:{click:function(e){return e.stopPropagation(),t.setSupTopic(n.id)}}},[t._v(" "+t._s(n.title)+" ")]):t._e()]}))]:t._e()]}))],2)])]):t._e()])])},i=[],s=n(47546),o=n(24634),a=(n(28706),n(2008),n(50113),n(62062),n(26910),n(26099),n(93936)),h=n(28698),u=n(85471),l={name:"HelpButton",mixins:[a.A],props:["help","standalone"],data:function(){return{texts:[],selected:"getting_started",selectedParagraph:"",search:"",hasSideBar:!0,hasSearch:!1,hasNotifications:!0,contactName:"",contactEmail:"",contactMessage:"",contactError:"",concatSucess:"",videoScaleFactor:1.2}},components:{},computed:{loading:function(){return 0===this.texts.length},current:function(){var t=this,e=this.texts.find((function(e){return e.id===t.selected}));return e||(e=this.texts[0]),e},topics:function(){var t=this.search.toLowerCase();return t.length>2?this.texts.filter((function(e){if(e._all&&e._all.indexOf(t)>=0)return!0})):this.texts}},methods:{setTopic:function(t){this.selected=t,this.selectedParagraph=""},setSupTopic:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.selectedParagraph=t,u.Ay.nextTick((function(){e.focus(t,n)}))},focus:function(t,e){var n=this;if(this.$refs.paragraph){var r=this.$refs.paragraph.find((function(e){return e.getAttribute("pid")===t}));r&&r.scrollIntoView()}setTimeout((function(){if(e&&n.$refs.links){var r=n.$refs.links.find((function(e){return e.getAttribute("topicid")===t}));r&&r.scrollIntoView()}}),100)},convertNotification:function(t){var e={id:"notifications."+t.id,title:t.title,body:t.more};if(t.video){var n=t.video;n.indexOf('src="')>0&&(n=n.substring(n.indexOf('src="')+5),n=n.substring(0,n.indexOf('"'))),e.video={src:n}}return{}},sendContact:function(){var t=this;return(0,o.A)((0,s.A)().mark((function e(){var n;return(0,s.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.contactEmail||!t.contactMessage){e.next=7;break}return e.next=3,h.A.getUserService().contact(t.contactName,t.contactEmail,t.contactMessage);case 3:n=e.sent,n&&(t.$root.$emit("Success","Thanks for contacting us! The dialog will close automatically"),t.concatSucess="Thanks for contacting us! The dialog will close automatically",t.contactError="",setTimeout((function(){t.selected="default"}),2e3)),e.next=9;break;case 7:t.contactError="Please fill out the form",t.concatSucess="";case 9:case"end":return e.stop()}}),e)})))()},setTopicByRoute:function(){this.$route.params.topic&&this.setTopic(this.$route.params.topic),this.$route.params.subtopic&&this.setSupTopic(this.$route.params.subtopic)}},watch:{$route:function(){this.setTopicByRoute()}},mounted:function(){var t=this;return(0,o.A)((0,s.A)().mark((function e(){var n,r;return(0,s.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.standalone&&(t.hasNotifications=!1,t.videoScaleFactor=.9),e.next=3,h.A.getHelpService().getAll();case 3:if(n=e.sent,!t.hasNotifications){e.next=9;break}return e.next=7,h.A.getUserService().getNotications();case 7:r=e.sent,r&&(r.sort((function(t,e){return e.lastUpdate-t.lastUpdate})),n=[{id:"notifications",name:"News",title:"Novedades",body:"\n                    <h1>Builder</h1>\n                    <p>Version 1.0 Lanzada<p>\n                    ",paragraphs:r.map((function(e){return t.convertNotification(e)}))}].concat(n),t.selected="notifications");case 9:t.texts=n,t.selectedParagraph&&u.Ay.nextTick((function(){t.focus(t.selectedParagraph)})),t.standalone&&t.setTopicByRoute();case 12:case"end":return e.stop()}}),e)})))()}},c=l,f=n(81656),p=(0,f.A)(c,r,i,!1,null,"1c8f9462",null),d=p.exports},17688:function(t,e,n){n.d(e,{A:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"MatcButton MatcDropDownButton"},[e("div",{ref:"button",staticClass:"MatcDropDownButtonCntr",attrs:{type:"button"}},[t.icon?e("QIcon",{attrs:{icon:t.icon}}):t._e(),e("label",{staticClass:"MatcDropDownLabel",attrs:{"data-dojo-attach-point":"label"}}),e("span",{staticClass:"caret"})],1),t._m(0)])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"MatcDropDownPopUp MatcDropDownButtonWidth",attrs:{role:"menu","data-dojo-attach-point":"popup"}},[e("ul",{attrs:{role:"menu","data-dojo-attach-point":"ul"}})])}],s=n(24980),o=n(15466),a={name:"DropDownButton",mixins:[s.A],data:function(){return{openCSS:"MatcDropDownButtonOpen",iconCSS:"MatcDropDownIcon",labelCSS:"MatcDropDownLabel",selectedCSS:"MatcDropDownButtonSelected",liCSS:"MatcDropDownMenuItem"}},components:{QIcon:o.A}},h=a,u=n(81656),l=(0,u.A)(h,r,i,!1,null,null,null),c=l.exports},10950:function(t,e,n){n.d(e,{A:function(){return g}});var r=function(){var t=this,e=t._self._c;return e("div",{class:["MatcLanguagePicker",{MatcToolbarPopUpVisible:t.isVisible}]},[e("a",{staticClass:"MatcToolbarIconButton",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.open.apply(null,arguments)}}},[t.hasLabel?e("span",[t._v(" "+t._s(t.selectedLanguage)+" ")]):t._e(),e("QIcon",{attrs:{icon:"World"}}),t.hasCarret?e("span",{staticClass:"caret"}):t._e()],1),t.isVisible?e("div",{staticClass:"MatcDropDownPopUp",attrs:{role:"menu","data-dojo-attach-point":"popup"}},[e("ul",{attrs:{role:"menu","data-dojo-attach-point":"ul"}},t._l(t.languages,(function(n){return e("li",{key:n.value,on:{click:function(e){return e.stopPropagation(),t.onChangeLanguage(n.value)}}},[e("a",[t._v(t._s(n.label))])])})),0)]):t._e(),t.isVisible?e("div",{staticClass:"MatcDropDownPopUpBackdrop"}):t._e()])},i=[],s=n(47546),o=n(24634),a=(n(50113),n(26099),n(44549)),h=n(79151),u=n(47681),l=n(15466),c=n(53721),f={name:"LangaugePicker",props:["hasLabel","value"],mixins:[c.A],data:function(){return{isVisible:!1,hasCarret:!1,language:"en",languages:[{label:"English",value:"en"},{label:"Chinese",value:"cn"},{label:"Deutsch",value:"de"},{label:"Portuguese",value:"pt"}]}},components:{QIcon:l.A},computed:{selectedLanguage:function(){var t=this,e=this.languages.find((function(e){return e.value===t.language}));return e?e.label:""}},methods:{open:function(){var t=this;this.isVisible=!0,this._mouseDownListener=(0,a.A)(h.A.body(),"click",(function(e){t.close(e)}))},close:function(){this.isVisible=!1},onChangeLanguage:function(t){this.language=t,this.logger.log(-1,"onChangeLanguage","entry",t),this.$emit("change",t),this.close()}},mounted:function(){var t=this;return(0,o.A)((0,s.A)().mark((function e(){return(0,s.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.logger=new u.A("LangaugePicker"),t.value&&(t.language=t.value),t.addTooltip(t.$el,"Change the language","vommondToolTipRightBottom");case 3:case"end":return e.stop()}}),e)})))()}},p=f,d=n(81656),m=(0,d.A)(p,r,i,!1,null,null,null),g=m.exports},83765:function(t,e,n){n.d(e,{A:function(){return u}});var r=function(){var t=this,e=t._self._c;return e("div",{ref:"containerNode"})},i=[],s=(n(44114),n(26910),n(27495),n(90906),{name:"Form",mixins:[],data:function(){return{plans:{Free:{apps:-1,team:-1,tasks:-1,test:-1,price:0,name:"Free",des:"<b>Free</b> as the wind...",updateEmail:"The Free plan includes....",updateEmailHTML:"The <b>Freelancer</b> plan includes....",embed:!0}},currenUserPlan:"Free"}},components:{},methods:{getPlans:function(){return this.plans},setUserPlan:function(t){this.currenUserPlan=t},getPlanByName:function(t){return this.plans[t]},getUserPlan:function(){return"Free"},planCanShare:function(t){if(t){var e=this.getPlans(),n=this.getUserPlan();if(void 0!==e[n]&&null!=e[n]){var r=e[n].team;return r<0||t.length<r}console.error("planCanShare() > Not supported pplan ",n)}return!0},planCanCreate:function(){var t=this.getPlans(),e=this.getUserPlan();if(void 0!==t[e]&&null!=t[e]){var n=t[e].apps;if(n<0)return!0;var r=this._doGet("https://v1.quant-ux.com/rest/user/plan/consumption.json");if(r)return r.appOwner<n}else console.error("planCanCreate() > Not supported pplan ",e);return!0},planCanAddTask:function(t){var e=this.getPlans(),n=this.getUserPlan();if(void 0!==e[n]&&null!=e[n]){var r=e[n].tasks;if(r<0)return!0;if(t&&t.tasks)return t.tasks.length<r}else console.error("planCanAddTask() > Not supported pplan ",n);return!0},planCanEmbed:function(){var t=this.getPlans(),e=this.getUserPlan();return void 0!==t[e]&&null!=t[e]?t[e].embed:(console.error("planCanEmbed() > Not supported plan ",e),!1)},planGetTestCount:function(){var t=this.getPlans(),e=this.getUserPlan();return void 0!==t[e]&&null!=t[e]?t[e].test:(console.error("planGetTestCount() > Not supported pplan ",e),-1)},planFilterEvents:function(t){var e=this.planGetTestCount();if(e>=0){t.sort((function(t,e){return t.time-e.time}));for(var n=[],r={},i=0,s=0;s<t.length;s++){var o=t[s];i<e&&(r[o.session]||(r[o.session]=!0,i++)),r[o.session]&&n.push(o)}return n}return t}},mounted:function(){}}),o=s,a=n(81656),h=(0,a.A)(o,r,i,!1,null,null,null),u=h.exports},12629:function(t,e,n){n.d(e,{A:function(){return w}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"MatcSimulator MatcPreview"})},i=[],s=(n(2008),n(44114),n(26099),n(94298),n(93936)),o=n(97941),a=n(75565),h=n(31877),u=n(18454),l=n(47681),c=n(51928),f=n(53526),p=n(45105),d={name:"Preview",mixins:[c.A,s.A],props:["app","screen","isPublic"],data:function(){return{isFillBackground:!1,debug:!1,mode:"standalone",loadingMessage:"No Start Screen!",scale:"width",running:!0,isPlayer:!1,currentScroll:0}},components:{},methods:{postCreate:function(){this.logger=new l.A("Preview"),this.logger.log(2,"postCreate","enter >"+this.mode),this.renderFactory=new f.A,this.renderFactory.setMode("view"),this.animationFactory=new p.A,this.overlays={},this.own(h.A.subscribe("MatcSimulatorRenderFixedPopup",a.A.hitch(this,"addFixedPopup")))},setDebug:function(t){this.debug=t},setJwtToken:function(t){this.jwtToken=t,this.renderFactory.setJwtToken(t)},setPublic:function(t){this.isPublic=t,this.renderFactory.setPublic(t)},setInvitation:function(t){this.logger.log(2,"setInvitation","Set hash to render factory"),this.hash=t,this.renderFactory&&(this.renderFactory.hash=t)},setModel:function(t,e,n){this.logger.log(2,"setModel","enter > m:"+t.id+" > s:"+e+" > w:"+n),this.model=t,this.selectedWidgetID=n,this.model.fonts&&this.attachFontsToDom(this.model.fonts),this.initScale(),this.model=this.createZoomedModel(this._scaleX,this._scaleY,!0),this.renderFactory.setModel(this.model),this.renderFactory.setScaleFactor(this._scaleX,this._scaleY),e?this.render(this.model.screens[e]):this.render()},setScreen:function(t,e){this._currentAnimation&&(this.render(this.model.screens[t]),delete this._currentAnimation),this._currentScreenID!=t&&(this.render(this.model.screens[t],e),void 0!=e&&null!=e&&this.setScroll(e)),this._currentScreenID=t},setOverlays:function(t){for(var e=0;e<t.length;e++){var n=t[e];if(!this.overlays[n])if(this.model.screens[n]){var r=this.model.screens[n];this.renderOverlay(r)}else console.warn("setOverlays() > No Screen ",n)}for(var i in this.overlays)if(t.indexOf(i)<0){var s=this.overlays[i];s&&this.removeOverlay(i,s)}},setScroll:function(t){if(this._currenScreen){var e=-1*Math.round(this._currenScreen.h*t);this._screenDiv.style.top=e+"px",this.currentScroll=e}else console.warn("setScroll() > Called without screen!")},setMouse:function(t){if(this._currentScreenID){if(!this._mousePointer){var e=document.createElement("div");o.A.add(e,"MatcPreviewMouseCntr");var n=document.createElement("div");o.A.add(n,"MatcPreviewMouse"),e.appendChild(n),this.domNode.appendChild(e),this._mousePointer=e}var r=t.x,i=t.y,s=this.model.screens[this._currentScreenID];t.dur&&(this._mousePointer.style.transition="all 0.030s"),this._renderMousePosition(Math.round(i*s.h),Math.round(r*s.w))}},_renderMousePosition:function(t,e){this._mousePointer.style.top=t+this.currentScroll+"px",this._mousePointer.style.left=e+"px"},setScreenPos:function(t){this.screenPos=t},initScale:function(){this.screenPos||(this.screenPos=u.A.position(this.domNode)),"width"==this.scale?(this._scaleX=1*this.screenPos.w/this.model.screenSize.w,this._scaleY=this._scaleX):console.warn("initScale() > DEPRECTAED : ",this.scale),this.logger.log(5,"initScale","enter > "+this.scale+" > "+this._scaleX+" > "+this._scaleY)},render:function(t){this.logger.log(2,"render","enter >"+this._scaleX+" > "+this._scaleY),t||(t=this.getStartScreen()),o.A.remove(this.domNode,"MatcSimulatorLoadingMessageVisible"),t?this.renderScreen(t,0):(o.A.add(this.domNode,"MatcSimulatorLoadingMessageVisible"),this.domNode.innerHTML='<span class="MatcPreviewStatusMsg">'+this.loadingMessage+"</span>")},renderOverlay:function(t){this.logger.log(0,"renderOverlay","enter > "+t.id);var e=this.renderScreenWithWidgets(t,!0);return this.addOverlay(t,e),e},renderScreen:function(t,e){this.logger.log(2,"renderScreen","enter > "+t.id+" > "+e),this.cleanUp();var n=this.renderScreenWithWidgets(t);return this.renderWidgetSelection(t,n),this.onScreenRendered(t,n),this.addScreen(t,n,e),this.addFixedWidgets(),this.isFillBackground&&this.fillBackground(t),n},fillBackground:function(t){if(this.$el&&this.$el.parentNode){var e=this.$el.parentNode;t.style&&t.style.background&&(e.style.background=t.style.background)}},addScreen:function(t,e,n){this._screenDiv=e,this.currentScroll=0,this._currenScreen=t,this._currentScreenID=t.id,this._currentScreenDiv=e,void 0!=n&&null!=n&&this.setScroll(n),this.domNode.appendChild(e)},addFixedWidgets:function(){if(this._fixedWidgets)for(var t=0;t<this._fixedWidgets.length;t++){var e=this._fixedWidgets[t];this.domNode.appendChild(e)}},removeFixedWidgets:function(){if(this._fixedWidgets)for(var t=0;t<this._fixedWidgets.length;t++){var e=this._fixedWidgets[t];if(e.parentNode)try{e.parentNode.removeChild(e)}catch(n){console.error("Preview.removeFixedWidgets",n),console.debug(n.stack)}}},addFixedPopup:function(t){t.parentNode&&t.parentNode.removeChild(t),this.domNode.appendChild(t),this._fixedPopups||(this._fixedPopups=[]),this._fixedPopups.push(t)},removeFixedPopups:function(){if(this._fixedPopups)for(var t=0;t<this._fixedPopups.length;t++){var e=this._fixedPopups[t];e.parentNode&&e.parentNode.removeChild(e)}},addOverlay:function(t,e){if(this._screenDiv){if(t.style.fixed?this.domNode.appendChild(e):this._screenDiv.appendChild(e),t.style.blur&&this._currentScreenDiv)for(var n=this._currentScreenDiv.childNodes,r=Math.max(2,20*this._scaleX),i=0;i<n.length;i++){var s=n[i];s!=e&&(s.style.filter="blur("+r+"px)",s.style.webkitFilter="blur("+r+"px)")}this.overlays[t.id]=e}else console.warn("addOverlay() > NO _screenDiv")},removeOverlay:function(t,e){if(e&&e.parentNode&&e.parentNode.removeChild(e),delete this.overlays[t],this._currentScreenDiv)for(var n=this._currentScreenDiv.childNodes,r=0;r<n.length;r++){var i=n[r];i!=e&&(i.style.filter="none")}},removeAllOverlays:function(){for(var t in this.overlays){var e=this.overlays[t];e&&e.parentNode&&e.parentNode.removeChild(e)}this.overlays={}},renderScreenWithWidgets:function(t,e){var n=this.createScreen(t,e);o.A.add(n,"MatcPreviewScreenAnimation"),this._fixedWidgets=[],this._fixedPopups=[];for(var r=this.sortChildren(t.children),i=0;i<r.length;i++){var s=r[i],a=this.renderWidget(t,s);s.style.fixed?this._fixedWidgets.push(a):n.appendChild(a),this._widgets[s.id]=!0}return n},renderWidgetSelection:function(t,e){if(this.selectedWidgetID){var n=this.model.widgets[this.selectedWidgetID],r=n.y-t.y+n.h;if(r>this.screenPos.h){var i=r-this.screenPos.h+5;i=Math.min(t.h-this.screenPos.h,i),e.style.top=-1*i+"px"}var s=n.x-t.x+n.w;if(s>this.screenPos.w){var o=s-this.screenPos.w+n.w+5;o=Math.min(t.w-this.screenPos.w,o),e.style.left=-1*o+"px"}}},onScreenRendered:function(){},createScreen:function(t,e){var n=this.createBox(t);return o.A.add(n,"MatcScreen"),this.domNode.style.height=t.h+"px",this.domNode.style.width=t.w+"px",t.style&&this.renderFactory.setStyle(n,t),e&&(t.style.hasBackground||(n.style.backgroundColor="transparent")),n},setWidgetState:function(t,e,n,r){var i=this.renderFactory.getUIWidgetByID(t);i&&i.setState(e,r)},setWidgetAnimationStates:function(t){for(var e in t)if(this._widgets[e]){var n=t[e].style,r=t[e].pos,i=this._lastWidgetAnimationState[e];if(!i||r){var s=this.renderFactory.getAnimationWrapper(e);s?s.setAnimatedPos(r,n):console.debug("setWidgetAnimationStates() > No ui widget for ",e)}if(!i||i.style._aid!=n._aid){var o=this.renderFactory.getAnimationWrapper(e);o?o.setAnimatedStyle(n):console.debug("setWidgetAnimationStates() > No ui widget for ",e)}this._lastWidgetAnimationState[e]=t[e]}},resetAnimations:function(){delete this._currentMarkerID,delete this._currentOverlayAnimation},setMarker:function(t,e){if(this._currentMarkerID!=t.id||e){var n=t.x,r=t.y;if(this._currentScreenID){var i=this.model.screens[this._currentScreenID],s=document.createElement("div");o.A.add(s,"MatcPreviewMarker"),this.domNode.appendChild(s);var h=document.createElement("div");o.A.add(h,"MatcPreviewMarkerCircle"),s.appendChild(h);var u={x:n*i.w,y:r*i.h};s.style.top=Math.round(u.y)+this.currentScroll+"px",s.style.left=Math.round(u.x)+"px",this._mousePointer&&(this._mousePointer.style.transition="none",this._renderMousePosition(Math.round(u.y),Math.round(u.x))),setTimeout(a.A.hitch(this,"hideMarker",s),10)}else console.warn("Cannot set marker, no screen");this._currentMarkerID=t.id}},hideMarker:function(t){o.A.add(t,"MatcPreviewMarkerHidden"),setTimeout(a.A.hitch(this,"cleanupMarker",t),500)},cleanupMarker:function(t){t.parentNode&&t.parentNode.removeChild(t)},animateOverlay:function(t,e,n){if(t.animation){var r=t.animation.to,i=this.model.screens[r];i?(this.createOverlayAnimation(t,i,n),this._currentOverlayAnimation&&this._currentOverlayAnimation.time(e)):console.warn("animateOverlay() > No screen",t)}},createOverlayAnimation:function(t,e,n){var r=t.animation.type,i=t.id+r;if(!this._currentOverlayAnimation||this._currentOverlayAnimation.id!=i){var s=this.overlays[e.id];if(s)if(this.animationFactory["createScreen_"+r]){var o=null;o="OverlayShowAnimation"==t.type?this.animationFactory["createScreen_"+r](e,null,s,!0):this.animationFactory["createScreen_"+r](e,s,null,!0),t.animation.duration&&(o.duration=t.animation.duration),t.animation.easing&&o.setEasing(t.animation.easing),o.setStart(t.time-n),o.id=i,this._currentOverlayAnimation=o}else console.warn("animateScreen() > No animation function for : createScreen_"+r)}return this._currentOverlayAnimation},animateScreen:function(t,e,n){if(t.animation){var r=t.animation.to,i=this.model.screens[r];if(i){var s=this._screenDiv;if(this._currentScreenID!=i.id||!this._currentAnimation){this.removeAllOverlays(),this._currentScreenID!=t.screen&&this.render(this.model.screens[t.screen]),this.renderFactory.cleanUp(),this.cleanUpTempListener();var o=this.renderScreenWithWidgets(i);this.addScreen(i,o),this.createAnimation(t,i,s,o,n)}this._currentAnimation?this._currentAnimation.time(e):console.warn("animateScreen() > No Animation")}else console.warn("animateScreen() > No screen",t.screen)}else console.warn("animateScreen() > No to",t)},createAnimation:function(t,e,n,r,i,s){if(!this._currentAnimation||this._currentAnimation.id!=t.id){var o=t.animation.type;if(this.animationFactory["createScreen_"+o]){var a=this.animationFactory["createScreen_"+o](e,n,r,s);t.animation.duration&&(a.duration=t.animation.duration),t.animation.easing&&a.setEasing(t.animation.easing),a.setStart(t.time-i),a.id=t.id,this._currentAnimation=a}else console.warn("animateScreen() > No animation function for : createScreen_"+o)}return this._currentAnimation},animateScreenEnd:function(){delete this._currentAnimation},cleanUp:function(){this.renderFactory.cleanUp(),this.cleanUpTempListener(),this._screenDiv&&this._screenDiv.parentNode&&this._screenDiv.parentNode.removeChild(this._screenDiv),this.removeFixedWidgets(),this.removeFixedPopups(),this._widgets={},this._lastWidgetAnimationState={}}},mounted:function(){this.app&&(this.postCreate(),this.setModel(this.app,this.screen))}},m=d,g=n(81656),v=(0,g.A)(m,r,i,!1,null,null,null),w=v.exports},14877:function(t,e,n){n.d(e,{A:function(){return f}});var r=function(){var t=this,e=t._self._c;return e("div",{class:["MatcIconDropDown",{MatcIconDropDownVisible:t.isVisible}]},[e("QIcon",{attrs:{icon:t.icon},on:{click:function(e){return e.stopPropagation(),t.open.apply(null,arguments)}}}),t.isVisible?e("div",{staticClass:"MatcDropDownPopUp",attrs:{role:"menu","data-dojo-attach-point":"popup"}},[e("ul",{attrs:{role:"menu","data-dojo-attach-point":"ul"}},t._l(t.options,(function(n){return e("li",{key:n.value,on:{click:function(e){return e.stopPropagation(),t.select(n,e)}}},[e("a",[n.icon?e("QIcon",{attrs:{icon:n.icon},on:{click:function(e){return e.stopPropagation(),t.open.apply(null,arguments)}}}):t._e(),t._v(" "+t._s(n.label)+" ")],1)])})),0)]):t._e(),t.isVisible?e("div",{staticClass:"MatcDropDownPopUpBackdrop",on:{click:t.close}}):t._e()],1)},i=[],s=n(47546),o=n(24634),a=n(15466),h={name:"QIconDropDown",props:["icon","options"],mixins:[],data:function(){return{isVisible:!1}},components:{QIcon:a.A},computed:{},methods:{open:function(){this.isVisible=!0},close:function(){this.isVisible=!1},select:function(t,e){t.callback&&t.callback(t,e),this.$emit("change",t.value),this.close()}},mounted:function(){return(0,o.A)((0,s.A)().mark((function t(){return(0,s.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()}},u=h,l=n(81656),c=(0,l.A)(u,r,i,!1,null,null,null),f=c.exports},57883:function(t,e,n){n.d(e,{A:function(){return v}});var r=function(){var t=this;t._self._c;return t._m(0)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"MatcAppTypeSelector"},[e("div",{attrs:{"data-dojo-attach-point":"cntr"}}),e("div",{attrs:{"data-dojo-attach-point":"details"}})])}],s=n(93936),o=n(97941),a=n(75565),h=n(44549),u=n(82857),l=n(47681),c=n(60993),f=n(78194),p={name:"ScreenSizeSelector",mixins:[s.A],data:function(){return{value:null,types:{"IPhone 14 / 15":{type:"smartphone",screenSize:{w:375,h:812},factor:2},"IPhone 14 / 15 Max":{type:"smartphone",screenSize:{w:414,h:896},factor:2},"IPhone 6 / 7 / 8":{type:"smartphone",screenSize:{w:375,h:667},factor:2},"IPhone 6 / 7 / 8+":{type:"smartphone",screenSize:{w:414,h:736},factor:2},"IPhone 5 / 6SE":{type:"smartphone",screenSize:{w:320,h:568},factor:2},"Galaxy S6":{type:"smartphone",screenSize:{w:360,h:640},factor:3},"IPad (Vertical)":{type:"tablet",screenSize:{w:768,h:1024},factor:2},"IPad (Horizontal)":{type:"tablet",screenSize:{w:1024,h:768},factor:2},Desktop:{type:"desktop",screenSize:{w:1280,h:720}}}}},components:{},methods:{postCreate:function(){this.logger=new l.A("ScreenSizeSelector"),this.logger.log(2,"postCreate","enter >"+this.mode),this._divs=[],this._checks=[];var t=new f.A,e=t.div().build();for(var n in this.types){var r=this.types[n],i=t.div("MatcScreenSizeItem").build(e);t.span("",n).build(i);var s=" "+r.screenSize.w+" x "+r.screenSize.h;t.div("MatcHint MatcFontSmall",s).build(i);var p=this.$new(c.A);o.A.add(p.domNode,"MatcVerticalMiddle"),p.placeAt(i),this.own((0,h.A)(i,u.A.press,a.A.hitch(this,"onTypePress",n))),this._checks[n]=p,this._divs[n]=i}var d=t.div("MatcScreenSizeItem").build(e);t.span("","Custom").build(d);var m=t.div("MatcHint MatcFontSmall").build(d);this.inputW=t.input("MatcIgnoreOnKeyPress").build(m),this.inputW.placeholder="w",this.own((0,h.A)(this.inputW,"keyup",a.A.hitch(this,"onCustomSelected"))),t.span(""," x ").build(m),this.inputH=t.input("MatcIgnoreOnKeyPress").build(m),this.inputH.placeholder="h",this.own((0,h.A)(this.inputH,"keyup",a.A.hitch(this,"onCustomSelected")));var g=this.$new(c.A);o.A.add(g.domNode,"MatcVerticalMiddle"),g.placeAt(d),this.own((0,h.A)(d,u.A.press,a.A.hitch(this,"onCustomSelected"))),this._checks["custom"]=g,this._divs["custom"]=d,this.cntr.appendChild(e),this.onTypePress("IPhone 14 / 15")},onCustomSelected:function(){this.cleanup(),this._checks["custom"].setValue(!0),o.A.add(this._divs["custom"],"MatcScreenSizeItemSelected");var t="smartphone";this.inputW.value>1e3&&(t="desktop"),this.value={type:t,screenSize:{w:1*this.inputW.value,h:1*this.inputH.value}},this._isCustom=!0,this.$emit("change",this.getValue())},onTypePress:function(t){this.cleanup(),this._checks[t].setValue(!0),o.A.add(this._divs[t],"MatcScreenSizeItemSelected"),this.value=this.types[t],this._isCustom=!1,this.$emit("change",this.getValue())},setValue:function(t){var e=null;for(var n in this.types){var r=this.types[n];t.type==r.type&&t.screenSize.w==r.screenSize.w&&t.screenSize.h==r.screenSize.h&&null==e&&(e=n)}e?this.onTypePress(e):(this.inputW.value=t.screenSize.w,this.inputH.value=t.screenSize.h,this.onCustomSelected())},getValue:function(){if(this._isCustom){var t="smartphone";this.inputW.value>1e3&&(t="desktop"),this.value={type:t,screenSize:{w:1*this.inputW.value,h:1*this.inputH.value}}}return this.value},cleanup:function(){for(var t in this._checks)this._checks[t].setValue(!1),o.A.remove(this._divs[t],"MatcScreenSizeItemSelected")}},mounted:function(){}},d=p,m=n(81656),g=(0,m.A)(d,r,i,!1,null,null,null),v=g.exports},18006:function(t,e,n){n.d(e,{A:function(){return p}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"MatcShareDialog",on:{keydown:function(t){t.stopPropagation()},keyup:function(t){t.stopPropagation()},keypress:function(t){t.stopPropagation()}}},[e("LanguagePicker",{attrs:{hasLabel:!0},on:{change:t.setLanguage}}),e("div",{staticClass:"field MatcShareRow"},[e("label",[t._v("Publish")]),e("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:t.publishLink},on:{focus:t.select}}),e("a",{staticClass:"MatcShareIcon",attrs:{href:t.publishLink,target:"_QuantUXTest"}},[e("span",{staticClass:"mdi mdi-share"})])]),e("div",{staticClass:"form-group MatcShareRow"},[e("label",[t._v("Test")]),e("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.testLink},on:{focus:t.select}}),e("a",{staticClass:"MatcShareIcon",attrs:{href:t.testLink,target:"_QuantUXTest"}},[e("QIcon",{attrs:{icon:"Share"}})],1)]),e("div",{staticClass:"form-group MatcShareRow"},[e("label",[t._v("Share and Comment")]),e("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.shareLink},on:{focus:t.select}}),e("a",{staticClass:"MatcShareIcon",attrs:{href:t.shareLink,target:"_QuantUXShare"}},[e("QIcon",{attrs:{icon:"Share"}})],1)]),e("div",{staticClass:"form-group MatcShareRow"},[e("label",[t._v("Low-Code Token")]),e("input",{ref:"hashInput",staticClass:"form-control",attrs:{type:"text"},domProps:{value:"".concat(t.hash)},on:{focus:t.select}}),e("a",{staticClass:"MatcShareIcon",attrs:{target:"_QuantUXShare"},on:{click:t.copy}},[e("QIcon",{attrs:{icon:"Copy"}})],1)]),t.hasPassword?e("div",{staticClass:"MatcMarginTop MatcShareRow MatcSharePasswordRow"},[e("CheckBox",{attrs:{label:"Require Password"},model:{value:t.needPassword,callback:function(e){t.needPassword=e},expression:"needPassword"}}),t.needPassword?e("input",{ref:"passwordInput",staticClass:"form-control password-control",attrs:{type:"text"},domProps:{value:"".concat(t.password)},on:{focus:t.select}}):t._e()],1):t._e()],1)},i=[],s=n(93936),o=n(60993),a=n(10950),h=n(15466),u={name:"ShareForm",mixins:[s.A],data:function(){return{isPublic:!1,needPassword:!1,hasPassword:!1,language:"en",languageOptions:[{value:"en",label:"English"},{value:"de",label:"German"},{value:"pt",label:"Portuguese"},{value:"cn",label:"Chinese"}],invitation:"--- Loading ---"}},components:{CheckBox:o.A,LanguagePicker:a.A,QIcon:h.A},computed:{base:function(){return location.protocol+"//"+location.host},password:function(){if(this.needPassword){var t=this.invitation.substring(this.invitation.length-8);return t}return""},hash:function(){return this.invitation},passwortedHash:function(){return this.needPassword?this.invitation.substring(0,this.invitation.length-8):this.invitation},testLink:function(){var t=this.base+"/#/test.html?h="+this.passwortedHash;return this.isPublic&&(t+="&log=false"),this.language&&(t+="&ln="+this.language),console.debug(t),t},publishLink:function(){var t=this.base+"/#/r?h="+this.passwortedHash;return this.isPublic&&(t+="&log=false"),this.language&&(t+="&ln="+this.language),console.debug(t),t},shareLink:function(){var t=this.base+"/#/share.html?h="+this.hash;return this.isPublic&&(t+="&log=false"),t}},methods:{setLanguage:function(t){this.language=t},setInvitation:function(t){this.invitation=t},setPublic:function(t){this.isPublic=t},copy:function(){this.$refs.hashInput.select(),document.execCommand("copy"),this.showSuccess("Copied to clipboard")},copyPassword:function(){this.$refs.passwordInput.select(),document.execCommand("copy"),this.showSuccess("Copied to clipboard")},select:function(t){t.target&&(t.target.select(),document.execCommand("copy"),this.showSuccess("Copied to clipboard"))}},mounted:function(){}},l=u,c=n(81656),f=(0,c.A)(l,r,i,!1,null,"e6af1634",null),p=f.exports},22319:function(t,e,n){n.d(e,{A:function(){return d}});var r=function(){var t=this,e=t._self._c;return e("div",{class:"UserComment "+t.status},[e("div",{staticClass:"UserCommentHeader"},[e("div",{staticClass:"UserCommentUser"},[t._v(" "+t._s(t.getUserName(t.comment.user))+" ")]),e("QIconDropDown",{attrs:{icon:"Dots",options:t.dotOptions}})],1),e("div",{staticClass:"UserCommentFooter"},[t._v(" "+t._s(t.formatDate(t.comment.created))+" "),t.comment.edited?e("span",[t._v("(edited)")]):t._e()]),"view"===t.mode?e("div",{staticClass:"UserCommentMessage"},[t._v(t._s(t.message))]):e("div",{staticClass:"UserCommentElement"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"MatcMarginTopXS",domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),e("div",{staticClass:"UserCommentButtons"},[e("button",{staticClass:"MatcButton MatcButtonXXS MatcMarginTopXS",on:{click:t.onBlur}},[t._v("Save")]),e("button",{staticClass:"MatcButton MatcButtonXXS MatcMarginTopXS",on:{click:t.onCancel}},[t._v("Cancel")])])])])},i=[],s=n(47546),o=n(24634),a=n(98985),h=n(14877),u=n(47681),l={name:"UserComment",mixins:[],props:["user","comment"],data:function(){return{status:"",hasReply:!1,isAuthor:!1,mode:"view",message:"",replyMessage:""}},components:{QIconDropDown:h.A},computed:{dotOptions:function(){var t=this,e="Done"===this.status?"Set Active":"Set Done",n="Done"===this.status?"CheckBoxOff":"CheckBoxOn",r=(this.comment.parentId,"Delete");return this.isAuthor?[{label:"Edit",callback:function(e,n){return t.onEdit(n)},icon:"EditPencil"},{label:e,callback:function(e,n){return t.toggleDone(n)},icon:n},{label:r,callback:function(e,n){return t.onDelete(n)},icon:"Delete"}]:[{label:e,callback:function(e,n){return t.toggleDone(n)},icon:n},{label:r,callback:function(e,n){return t.onDelete(n)},icon:"Delete"}]}},methods:{toggleDone:function(){var t="Done"===this.status?"":"Done";this.status=t,this.$emit("status",this.comment.id,t)},onEdit:function(){this.mode="edit"},onBlur:function(){this.mode="view",this.$emit("change",this.comment.id,this.message)},onCancel:function(){this.message=this.comment.message,this.mode="view"},onDelete:function(){this.$emit("delete",this.comment)},formatDate:function(t){return a.Yq(t)},getUserName:function(t){return a.J3(t)},showReply:function(){var t=this;this.hasReply=!0,setTimeout((function(){t.$refs.replyInput.focus()}),200)}},watch:{},mounted:function(){var t=this;return(0,o.A)((0,s.A)().mark((function e(){var n,r;return(0,s.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.logger=new u.A("UserComment"),t.message=t.comment.message,t.status=t.comment.status,t.isAuthor=(null===t||void 0===t||null===(n=t.user)||void 0===n?void 0:n.id)===(null===t||void 0===t||null===(r=t.comment)||void 0===r||null===(r=r.user)||void 0===r?void 0:r.id),t.isNew&&(t.mode="edit");case 5:case"end":return e.stop()}}),e)})))()}},c=l,f=n(81656),p=(0,f.A)(c,r,i,!1,null,null,null),d=p.exports},31666:function(t,e,n){n.d(e,{A:function(){return f}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"UserComment"},[e("div",{staticClass:"UserCommentHeader"},[e("div",{staticClass:"UserCommentUser"},[t._v(" "+t._s(t.getUserName(t.user))+" ")])]),e("div",{staticClass:"UserCommentFooter"},[t._v(" "+t._s(t.formatDate((new Date).getTime()))+" ")])])},i=[],s=n(47546),o=n(24634),a=n(98985),h={name:"UserCommentHeader",mixins:[],props:["user"],data:function(){return{}},components:{},computed:{},methods:{formatDate:function(t){return a.Yq(t)},getUserName:function(t){return a.J3(t)}},watch:{},mounted:function(){return(0,o.A)((0,s.A)().mark((function t(){return(0,s.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()}},u=h,l=n(81656),c=(0,l.A)(u,r,i,!1,null,null,null),f=c.exports},93278:function(t,e,n){n.d(e,{A:function(){return o}});var r=n(77552),i=n(36654),s=(n(62010),n(75565)),o=function(){function t(){(0,r.A)(this,t)}return(0,i.A)(t,[{key:"setModel",value:function(t){this.model=t,this.screenWidth=t.screenSize.w,this.screenHeight=t.screenSize.h}},{key:"createTemplatedModel",value:function(t){if(this.model.templates&&this.model.templates[t.id]){var e=this.model.templates[t.id];if(this["createTemplated"+e.templateType])return this["createTemplated"+e.templateType](e);console.warn("No create method for template '",e.templateType,"'")}else console.warn("No template with id ",t.id)}},{key:"createTemplatedWidget",value:function(t){var e={id:t.id,name:t.name,w:t.w,h:t.h,x:t.x,y:t.y,z:t.z,template:t.id,type:t.type,props:s.A.clone(t.props),has:s.A.clone(t.has),style:{}};return e}},{key:"createTemplatedGroup",value:function(t){var e={id:t.id,name:t.name,template:t.id,children:s.A.clone(t.children)};return e}},{key:"createAppModel",value:function(t,e,n){n||(n={type:"smartphone",screenSize:{w:375,h:667},factor:2});var r=8,i={version:4,name:t,description:e,screenSize:n.screenSize,type:n.type,screens:{},widgets:{},lines:{},groups:{},templates:{},designtokens:{},lastUUID:1e4,lastUpdate:(new Date).getTime(),created:0,startScreen:"",grid:{w:r,h:r,style:"line",color:"#cecece",visible:!1,enabled:!1}};return i}},{key:"createScreenModel",value:function(){var t={id:null,name:"",x:0,y:0,w:this.screenWidth,h:this.screenHeight,z:0,min:{h:this.screenHeight,w:this.screenWidth},props:{start:!1},style:{},has:{image:!0},children:[]};return t}},{key:"createLineModel",value:function(){var t={id:null,from:null,to:null,points:[],event:"click"};return t}}])}()},69087:function(t,e,n){n.d(e,{gA:function(){return d},bz:function(){return m},hN:function(){return p}});var r=n(77552),i=n(36654);n(28706),n(33771),n(78350),n(62062),n(44114),n(26910),n(30237),n(2892),n(79432),n(26099),n(16034),n(31415),n(47764),n(23500),n(62953),n(78460),n(22415),function(){function t(e){this._value=NaN,this._seed="string"===typeof e?this.hashCode(e):"number"===typeof e?this.getSafeSeed(e):this.getSafeSeed(t.MIN+Math.floor((t.MAX-t.MIN)*Math.random())),this.reset()}t.prototype.next=function(e,n){return void 0===e&&(e=0),void 0===n&&(n=1),this.recalculate(),this.map(this._value,t.MIN,t.MAX,e,n)},t.prototype.nextInt=function(e,n){return void 0===e&&(e=10),void 0===n&&(n=100),this.recalculate(),Math.floor(this.map(this._value,t.MIN,t.MAX,e,n+1))},t.prototype.nextString=function(t,e){void 0===t&&(t=16),void 0===e&&(e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");var n="";while(n.length<t)n+=this.nextChar(e);return n},t.prototype.nextChar=function(t){return void 0===t&&(t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"),t.substr(this.nextInt(0,t.length-1),1)},t.prototype.nextArrayItem=function(t){return t[this.nextInt(0,t.length-1)]},t.prototype.nextBoolean=function(){return this.recalculate(),this._value>.5},t.prototype.skip=function(t){void 0===t&&(t=1);while(t-- >0)this.recalculate()},t.prototype.reset=function(){this._value=this._seed},t.prototype.recalculate=function(){this._value=this.xorshift(this._value)},t.prototype.xorshift=function(t){return t^=t<<13,t^=t>>17,t^=t<<5,t},t.prototype.map=function(t,e,n,r,i){return(t-e)/(n-e)*(i-r)+r},t.prototype.hashCode=function(t){var e=0;if(t)for(var n=t.length,r=0;r<n;r++)e=(e<<5)-e+t.charCodeAt(r),e|=0,e=this.xorshift(e);return this.getSafeSeed(e)},t.prototype.getSafeSeed=function(t){return 0===t?1:t},t.MIN=-2147483648,t.MAX=2147483647}();function s(t,e){var n=0,r=Math.min(t.length,e.length);while(r--)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)}var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;(0,r.A)(this,t),this.dataset=[],this.epsilon=e,this.minPts=n,this.distance=i,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0}return(0,i.A)(t,[{key:"run",value:function(t){this.init(t);for(var e=0;e<this._datasetLength;e++)if(1!==this._visited[e]){this._visited[e]=1;var n=this.getNeighbours(e);if(n.length<this.minPts)this.noise.push(e);else{var r=this.clusters.length;this.clusters.push([]),this.addToCluster(e,r),this.expandCluster(r,n)}}return this.clusters}},{key:"init",value:function(t){this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}},{key:"expandCluster",value:function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this.getNeighbours(r);i.length>=this.minPts&&(e=this.mergeArrays(e,i))}1!==this._assigned[r]&&this.addToCluster(r,t)}}},{key:"addToCluster",value:function(t,e){this.clusters[e].push(t),this._assigned[t]=1}},{key:"getNeighbours",value:function(t){for(var e=[],n=0;n<this._datasetLength;n++){var r=this.distance(this.dataset[t],this.dataset[n]);r<this.epsilon&&e.push(n)}return e}},{key:"mergeArrays",value:function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t}}])}();n(34782);var a=n(27262),h=(n(2008),n(48980),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"min";(0,r.A)(this,t),this.elements=[],this._comparator="min"==e?function(t,e){return t<e}:"max"==e?function(t,e){return t>e}:e}return(0,i.A)(t,[{key:"contains",value:function(t){return this.elements.findIndex((function(e){return e.element==t}))<0}},{key:"swap",value:function(t,e){var n=this.elements,r=[n[t],n[e]];n[e]=r[0],n[t]=r[1]}},{key:"heapifyUp",value:function(){var t=this.elements,e=t.length-1;while(e>0){var n=Math.floor((e-1)/2);if(!this._comparator(this.elements[e].value,this.elements[n].value))break;this.swap(n,e),e=n}}},{key:"push",value:function(t,e){this.elements.push(new u(t,e)),this.heapifyUp()}},{key:"heapifyDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.elements,n=this._comparator,r=e.length,i=2*t+1,s=2*t+2,o=t;i<r&&n(e[i].value,e[o].value)&&(o=i),s<r&&n(e[s].value,e[o].value)&&(o=s),o!==t&&(this.swap(t,o),this.heapifyDown(o))}},{key:"pop",value:function(){if(0===this.elements.length)return null;if(1===this.elements.length)return this.elements.pop();this.swap(0,this.elements.length-1);var t=this.elements.pop();return this.heapifyDown(),t}},{key:"getElements",value:function(){return this.elements.map((function(t){return t.element}))}},{key:"getValues",value:function(){return this.elements.map((function(t){return t.value}))}},{key:"length",value:function(){return this.elements.length}},{key:"empty",value:function(){return 0===this.elements.length}}],[{key:"heapify",value:function(e,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"min",i=new t(r),s=e.length,o=0;o<s;o++){var a=e[o],h=n[o];i.push(a,h)}return i}}])}()),u=(0,i.A)((function t(e,n){(0,r.A)(this,t),this.element=e,this.value=n})),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;(0,r.A)(this,t),this.epsilon=e,this.minPts=n,this.distancefunction=i}return(0,i.A)(t,[{key:"run",value:function(t){var e=this;this.init(t);var n=0;return this._rows.forEach((function(t){if(!t.processed&&(t.neighbors=e.getNeighbors(t),t.processed=!0,e._clusters.push([t.index]),n=e._clusters.length-1,e._orderedlist.push(t),void 0!=e.coreDistance(t))){var r=new h("min");e.updateQueue(t,r),e.expandCluster(r,e._clusters[n])}})),this.filterOutliers()}},{key:"filterOutliers",value:function(){var t=this;return this._clusters.filter((function(e){return e.length>=t.minPts}))}},{key:"init",value:function(t){this._orderedlist=[],this._clusters=[],this._rows=t.map((function(t,e){return new c(t,e)}))}},{key:"getNeighborsUnsorted",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.epsilon;if(t.neighbors)return t.neighbors;var r=[];return this._rows.forEach((function(i){if(i.index!==t.index){var s=e.distancefunction(t.value,i.value);s<n&&r.push(i)}})),r}},{key:"getNeighbors",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.epsilon;if(t.neighbors)return t.neighbors;var r=[];this._rows.forEach((function(i){if(i.index!==t.index){var s=e.distancefunction(t.value,i.value);s<n&&r.push({row:i,distance:s})}})),r.sort((function(t,e){return t.distance-e.distance}));var i=r.map((function(t){return t.row}));return t.neighbors=i,i}},{key:"coreDistance",value:function(t){if(!(t.neighbors&&t.neighbors.length<=this.minPts))return this.distancefunction(t.value,t.neighbors[this.minPts].value)}},{key:"coreDistanceDynamic",value:function(t){for(var e=this.epsilon,n=0;n<e;n++){var r=this.getNeighbors(t,n);if(r.length>=this.minPts)return n}}},{key:"updateQueue",value:function(t,e){var n,r=this.coreDistance(t),i=this.getNeighbors(t),s=(0,a.A)(i);try{for(s.s();!(n=s.n()).done;){var o=n.value;if(!o.processed){var u=Math.max(r,this.distancefunction(t.value,o.value));e.contains(o)?(o.reachabilityDistance=u,e.push(o,o.reachabilityDistance)):u<o.reachabilityDistance&&(o.reachabilityDistance=u,e=h.heapify(e.getElements(),e.getValues(),"min"))}}}catch(l){s.e(l)}finally{s.f()}}},{key:"expandCluster",value:function(t,e){var n=this._orderedlist;while(!t.empty()){var r=t.pop().element;r.neighbors=this.getNeighbors(r),r.processed=!0,e.push(r.index),n.push(r),void 0!=this.coreDistance(r)&&(this.updateQueue(r,t),this.expandCluster(t,e))}}}])}(),c=(0,i.A)((function t(e,n){(0,r.A)(this,t),this.value=e,this.index=n,this.reachabilityDistance=void 0,this.processed=!1,this.neighbors=void 0})),f=n(3467);function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=k(t,!0,!0),r=A(n,e);return r}function d(t,e){var n=k(e,!0,!1);return t.foreach((function(t){t.outlierWeirdness=!1,n[t.session]?(t.weirdness=n[t.session],1===n[t.session]&&(t.outlierWeirdness=!0)):t.weirdness=0})),t}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["interactions","duration","screenLoads","tasks"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"minmax",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"optics",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2;if(f.A.log(-1,"Outlier.cluster() > "+r+" > "+n+" > "+i,e),0===e.length)return{};var s=v(t,e);s="zScore"===n?w(s):b(s);var o=y(s),a=_(o,i),h=g(t);return"dbscan"===r?x(s,a,h):M(s,a,h)}function g(){return 2}function v(t,e){var n=t.map((function(t){var n=[];return e.forEach((function(e){n.push(t[e])})),n}));return n}function w(t){for(var e=t[0].length,n=t.length,r=[],i=0;i<n;i++)r.push([]);for(var s=0;s<e;s++){for(var o=0,a=0,h=0;h<n;h++){var u=t[h][s];o+=u}for(var l=o/n,c=0;c<n;c++){var f=t[c][s],p=l-f;a+=p*p}for(var d=Math.sqrt(a),m=0;m<n;m++)if(0===d)r[m][s]=0;else{var g=t[m][s],v=(g-l)/d;r[m][s]=v}}return r}function y(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=[],r=t.length,i=0;i<r;i++)n.push([]);for(var o=0;o<r;o++)for(var a=o;a<r;a++){var h=0;if(o!==a){var u=t[o],l=t[a];h=e(u,l)}n[o][a]=h,n[a][o]=h}return n}function b(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t[0].length,r=t.length,i=[],s=0;s<r;s++)i.push([]);for(var o=0;o<n;o++){for(var a=1e7,h=-1e7,u=0;u<r;u++){var l=t[u][o];h=Math.max(h,l),a=Math.min(a,l)}for(var c=h-a,f=0;f<r;f++){var p=t[f][o];i[f][o]=(p-a)/c*e}}return i}function _(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;f.A.log(1,"Outlier.getClusterMinDistance() > ",e);var n=t.flatMap((function(t){return t})),r=n.sort((function(t,e){return t-e})),i=n.reduce((function(t,e){return Math.max(t,e)})),s=n.reduce((function(t,e){return t+e})),o=s/n.length,a=r[Math.floor(r.length*e)];return f.A.log(1,"Outlier.getClusterMinDistance() > ",[i,i*e,o,o*e,a]),a}function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;f.A.log(1,"Outlier.dbscan() > ",[e,n]);var r=new o(e,n),i=r.run(t);return S(t,i)}function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;f.A.log(1,"Outlier.optics() > ",[e,n]);var r=new l(e,n),i=r.run(t);return S(t,i)}function S(t,e){var n=[];return t.forEach((function(t,e){n[e]=-1})),0===e.length?(t.forEach((function(t,e){n[e]=0})),n):(e.forEach((function(t,e){t.forEach((function(t){n[t]=e}))})),n)}function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=Object.values(t),r=T(n,.5),i=n.map((function(t){return Math.abs(t-r)})),s=T(i,.5),o=s*e,a={};for(var h in t){var u=t[h];a[h]=u-r>o?1:0}return f.A.log(2,"Outlier.getMADOutlier() > ",n),f.A.log(2,"Outlier.getMADOutlier() > ",i),f.A.log(2,"Outlier.getMADOutlier() > "+e,[r,s,o]),a}function k(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=C(t,n);return P(r,e)}function C(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=N(t);return E(n,e)}function E(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f.A.log(-2,"Outlier.computeRawGraphScores() > ",e);var n=new I;Object.values(t).forEach((function(t){for(var e=0;e<t.length-1;e++){var r=t[e],i=t[e+1];n.count(r,i)}}));var r={};return Object.keys(t).forEach((function(i){for(var s=t[i],o=new Set,a=0,h=0;h<s.length-1;h++){var u=s[h],l=s[h+1],c=u+"->"+l;o.has(c)||(a+=n.get(u,l)),o.add(c)}r[i]=e?a/s.length:a})),r}function P(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Number.MIN_VALUE,r=Number.MAX_VALUE;for(var i in t){var s=t[i];n=Math.max(n,s),r=Math.min(r,s)}var o=n-r;if(e)for(var a in t){var h=t[a],u=(h-r)/o,l=Math.max(0,-1*(u-1));t[a]=l}else for(var c in t){var p=t[c],d=Math.max(0,-1*(p-n));t[c]=d}return f.A.log(2,"Outlier.normalizeGraphScores() > "+e,[r,n]),t}function N(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set(["ScreenClick","WidgetClick","ScreenLoaded","WidgetChange","OverlayLoaded"]),n=new D,r={},i=t.groupBy("session");return i.foreach((function(t,i){t.sortBy("time");var s=[];t.foreach((function(t){e.has(t.type)&&s.push(R(t,n))})),r[i]=s})),r}function R(t,e){var n="".concat(t.screen,".").concat(t.widget,".").concat(t.type);return e.get(n)}var D=function(){function t(){(0,r.A)(this,t),this.codes={},this.count=1}return(0,i.A)(t,[{key:"get",value:function(t){return this.codes[t]||(this.codes[t]=this.count,this.count++),this.codes[t]}}])}(),I=function(){function t(){(0,r.A)(this,t),this.value={}}return(0,i.A)(t,[{key:"count",value:function(t,e){this.value[t]||(this.value[t]={}),this.value[t][e]||(this.value[t][e]=0),this.value[t][e]++}},{key:"get",value:function(t,e){return this.value[t]&&this.value[t][e]?this.value[t][e]:0}}])}();function T(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=t.sort((function(t,e){return t-e})),r=(n.length-1)*e,i=Math.floor(r),s=r-i;return void 0!==n[i+1]?n[i]+s*(n[i+1]-n[i]):n[i]}},27742:function(t,e,n){n.d(e,{q:function(){return a}});var r=n(77552),i=n(36654),s=n(44549),o=n(79151);function a(t,e,n){return new h(t,e,n)}var h=function(){function t(e,n,i){var a=this;return(0,r.A)(this,t),this.stopEvent(e),this.start=this.getMousePosition(e),this.moveHandle=(0,s.A)(o.A.body(),"mousemove",(function(t){return a.onDNDMove(t,n)})),this.upHandle=(0,s.A)(o.A.body(),"mouseup",(function(t){return a.onDNDEnd(t,i)})),!1}return(0,i.A)(t,[{key:"remove",value:function(){this.moveHandle&&this.moveHandle.remove(),this.upHandle&&this.upHandle.remove(),delete this.moveHandle,delete this.upHandle}},{key:"onDNDMove",value:function(t,e){this.stopEvent(t);var n=this.getMousePosition(t),r={x:n.x-this.start.x,y:n.y-this.start.y};return e&&e(r),!1}},{key:"onDNDEnd",value:function(t,e){this.stopEvent(t);var n=this.getMousePosition(t),r={x:n.x-this.start.x,y:n.y-this.start.y};return e&&e(r),this.remove(),!1}},{key:"getMousePosition",value:function(t){var e={x:0,y:0};return t&&(t.touches&&t.touches.length>0?(t=t.touches[0],e.x=t.clientX,e.y=t.clientY):t.changedTouches&&t.changedTouches.length>0?(t=t.changedTouches[0],e.x=t.clientX,e.y=t.clientY):(e.x=t.pageX,e.y=t.pageY)),e}},{key:"stopEvent",value:function(t){t&&t.stopPropagation&&(t.stopPropagation(),t.preventDefault())}}])}()},70788:function(t,e,n){n.r(e),n.d(e,{isAnyArray:function(){return i}});const r=Object.prototype.toString;function i(t){const e=r.call(t);return e.endsWith("Array]")&&!e.includes("Big")}},55826:function(t,e,n){n.r(e),n.d(e,{default:function(){return o}});var r=n(70788);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.isAnyArray)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,i=void 0===n?0:n,s=e.toIndex,o=void 0===s?t.length:s;if(i<0||i>=t.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=i||o>t.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[i],h=i+1;h<o;h++)t[h]>a&&(a=t[h]);return a}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.isAnyArray)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,i=void 0===n?0:n,s=e.toIndex,o=void 0===s?t.length:s;if(i<0||i>=t.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=i||o>t.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[i],h=i+1;h<o;h++)t[h]<a&&(a=t[h]);return a}function o(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.isAnyArray)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!(0,r.isAnyArray)(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(t.length);var o=s(t),a=i(t);if(o===a)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var h=n.min,u=void 0===h?n.autoMinMax?o:0:h,l=n.max,c=void 0===l?n.autoMinMax?a:1:l;if(u>=c)throw new RangeError("min option must be smaller than max option");for(var f=(c-u)/(a-o),p=0;p<t.length;p++)e[p]=(t[p]-o)*f+u;return e}},55902:function(t,e,n){n.r(e),n.d(e,{default:function(){return f}});const r=Object.prototype.toString;function i(t){return r.call(t).endsWith("Array]")}function s(t,e,n){let r=0;const i=n(e);for(let s=0;s<t.x.length;s++)r+=Math.abs(t.y[s]-i(t.x[s]));return r}var o=n(10673);o.y3,o.jy,o.oN,o.Hc,o.cg,o.hj,o.LU,o.Tb;const a=o.uq;o.Zm,o.Dq,o.__,o.q0,o.lh,o.pI,o.zC,o.zg,o.g6,o.OL,o.ks,o.QR,o.jp,o.mk,o.W2,o.l,o.KY,o.dv,o.BR,o.Wu;o.uq,o.uq;o.a4;const h=o.DI;o.Jo,o.Zi,o.kH,o.LV;function u(t,e,n,r,i){const s=n.length,o=t.x.length;let h=new Array(s);for(let a=0;a<s;a++){h[a]=new Array(o);let s=n.slice();s[a]+=r;let u=i(s);for(let n=0;n<o;n++)h[a][n]=e[n]-u(t.x[n])}return new a(h)}function l(t,e){const n=t.x.length;let r=new Array(n);for(let i=0;i<n;i++)r[i]=[t.y[i]-e[i]];return new a(r)}function c(t,e,n,r,i){let s=n*r*r,o=a.eye(e.length,e.length,s);const c=i(e);let f=new Float64Array(t.x.length);for(let a=0;a<t.x.length;a++)f[a]=c(t.x[a]);let p=u(t,f,e,r,i),d=l(t,f),m=h(o.add(p.mmul(p.transpose())));return e=new a([e]),e=e.sub(m.mmul(p).mmul(d).mul(r).transpose()),e.to1DArray()}function f(t,e,n={}){let{maxIterations:r=100,gradientDifference:o=.1,damping:a=0,errorTolerance:h=.01,minValues:u,maxValues:l,initialValues:f}=n;if(a<=0)throw new Error("The damping option must be a positive number");if(!t.x||!t.y)throw new Error("The data parameter must have x and y elements");if(!i(t.x)||t.x.length<2||!i(t.y)||t.y.length<2)throw new Error("The data parameter elements must be an array with more than 2 points");if(t.x.length!==t.y.length)throw new Error("The data parameter elements must have the same size");let p=f||new Array(e.length).fill(1),d=p.length;if(l=l||new Array(d).fill(Number.MAX_SAFE_INTEGER),u=u||new Array(d).fill(Number.MIN_SAFE_INTEGER),l.length!==u.length)throw new Error("minValues and maxValues must be the same size");if(!i(p))throw new Error("initialValues must be an array");let m,g=s(t,p,e),v=g<=h;for(m=0;m<r&&!v;m++){p=c(t,p,a,o,e);for(let t=0;t<d;t++)p[t]=Math.min(Math.max(u[t],p[t]),l[t]);if(g=s(t,p,e),isNaN(g))break;v=g<=h}return{parameterValues:p,parameterError:g,iterations:m}}},10673:function(t,e,n){var r=n(70788),i=n(55826);const s=" ".repeat(2),o=" ".repeat(4);function a(){return h(this)}function h(t,e={}){const{maxRows:n=15,maxColumns:r=10,maxNumSize:i=8,padMinus:a="auto"}=e;return`${t.constructor.name} {\n${s}[\n${o}${u(t,n,r,i,a)}\n${s}]\n${s}rows: ${t.rows}\n${s}columns: ${t.columns}\n}`}function u(t,e,n,r,i){const{rows:s,columns:a}=t,h=Math.min(s,e),u=Math.min(a,n),c=[];if("auto"===i){i=!1;t:for(let e=0;e<h;e++)for(let n=0;n<u;n++)if(t.get(e,n)<0){i=!0;break t}}for(let o=0;o<h;o++){let e=[];for(let n=0;n<u;n++)e.push(l(t.get(o,n),r,i));c.push(`${e.join(" ")}`)}return u!==a&&(c[c.length-1]+=` ... ${a-n} more columns`),h!==s&&c.push(`... ${s-e} more rows`),c.join(`\n${o}`)}function l(t,e,n){return(t>=0&&n?` ${c(t,e-1)}`:c(t,e)).padEnd(e)}function c(t,e){let n=t.toString();if(n.length<=e)return n;let r=t.toFixed(e);if(r.length>e&&(r=t.toFixed(Math.max(0,e-(r.length-e)))),r.length<=e&&!r.startsWith("0.000")&&!r.startsWith("-0.000"))return r;let i=t.toExponential(e);return i.length>e&&(i=t.toExponential(Math.max(0,e-(i.length-e)))),i.slice(0)}function f(t,e){t.prototype.add=function(t){return"number"===typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t.get(e,n));return this},t.add=function(t,n){const r=new e(t);return r.add(n)},t.prototype.sub=function(t){return"number"===typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t.get(e,n));return this},t.sub=function(t,n){const r=new e(t);return r.sub(n)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"===typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t.get(e,n));return this},t.mul=function(t,n){const r=new e(t);return r.mul(n)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"===typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t.get(e,n));return this},t.div=function(t,n){const r=new e(t);return r.div(n)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"===typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t.get(e,n));return this},t.mod=function(t,n){const r=new e(t);return r.mod(n)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"===typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t.get(e,n));return this},t.and=function(t,n){const r=new e(t);return r.and(n)},t.prototype.or=function(t){return"number"===typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t.get(e,n));return this},t.or=function(t,n){const r=new e(t);return r.or(n)},t.prototype.xor=function(t){return"number"===typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t.get(e,n));return this},t.xor=function(t,n){const r=new e(t);return r.xor(n)},t.prototype.leftShift=function(t){return"number"===typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t.get(e,n));return this},t.leftShift=function(t,n){const r=new e(t);return r.leftShift(n)},t.prototype.signPropagatingRightShift=function(t){return"number"===typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t.get(e,n));return this},t.signPropagatingRightShift=function(t,n){const r=new e(t);return r.signPropagatingRightShift(n)},t.prototype.rightShift=function(t){return"number"===typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t.get(e,n));return this},t.rightShift=function(t,n){const r=new e(t);return r.rightShift(n)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){const n=new e(t);return n.not()},t.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){const n=new e(t);return n.abs()},t.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){const n=new e(t);return n.acos()},t.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){const n=new e(t);return n.acosh()},t.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){const n=new e(t);return n.asin()},t.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){const n=new e(t);return n.asinh()},t.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){const n=new e(t);return n.atan()},t.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){const n=new e(t);return n.atanh()},t.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){const n=new e(t);return n.cbrt()},t.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){const n=new e(t);return n.ceil()},t.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){const n=new e(t);return n.clz32()},t.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){const n=new e(t);return n.cos()},t.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){const n=new e(t);return n.cosh()},t.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){const n=new e(t);return n.exp()},t.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){const n=new e(t);return n.expm1()},t.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){const n=new e(t);return n.floor()},t.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){const n=new e(t);return n.fround()},t.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){const n=new e(t);return n.log()},t.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){const n=new e(t);return n.log1p()},t.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){const n=new e(t);return n.log10()},t.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){const n=new e(t);return n.log2()},t.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){const n=new e(t);return n.round()},t.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){const n=new e(t);return n.sign()},t.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){const n=new e(t);return n.sin()},t.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){const n=new e(t);return n.sinh()},t.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){const n=new e(t);return n.sqrt()},t.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){const n=new e(t);return n.tan()},t.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){const n=new e(t);return n.tanh()},t.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){const n=new e(t);return n.trunc()},t.pow=function(t,n){const r=new e(t);return r.pow(n)},t.prototype.pow=function(t){return"number"===typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t));return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t.get(e,n)));return this}}function p(t,e,n){let r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function d(t,e,n){let r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function m(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function g(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function v(t,e){if(!r.isAnyArray(e))throw new TypeError("row indices must be an array");for(let n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.rows)throw new RangeError("row indices are out of range")}function w(t,e){if(!r.isAnyArray(e))throw new TypeError("column indices must be an array");for(let n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.columns)throw new RangeError("column indices are out of range")}function y(t,e,n,r,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(_("startRow",e),_("endRow",n),_("startColumn",r),_("endColumn",i),e>n||r>i||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function b(t,e=0){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function _(t,e){if("number"!==typeof e)throw new TypeError(`${t} must be a number`)}function x(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}function M(t){let e=b(t.rows);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}function S(t){let e=b(t.columns);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}function A(t){let e=0;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e+=t.get(n,r);return e}function k(t){let e=b(t.rows,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}function C(t){let e=b(t.columns,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}function E(t){let e=1;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e*=t.get(n,r);return e}function P(t,e,n){const r=t.rows,i=t.columns,s=[];for(let o=0;o<r;o++){let r=0,a=0,h=0;for(let e=0;e<i;e++)h=t.get(o,e)-n[o],r+=h,a+=h*h;e?s.push((a-r*r/i)/(i-1)):s.push((a-r*r/i)/i)}return s}function N(t,e,n){const r=t.rows,i=t.columns,s=[];for(let o=0;o<i;o++){let i=0,a=0,h=0;for(let e=0;e<r;e++)h=t.get(e,o)-n[o],i+=h,a+=h*h;e?s.push((a-i*i/r)/(r-1)):s.push((a-i*i/r)/r)}return s}function R(t,e,n){const r=t.rows,i=t.columns,s=r*i;let o=0,a=0,h=0;for(let u=0;u<r;u++)for(let e=0;e<i;e++)h=t.get(u,e)-n,o+=h,a+=h*h;return e?(a-o*o/s)/(s-1):(a-o*o/s)/s}function D(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}function I(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}function T(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}function L(t){const e=[];for(let n=0;n<t.rows;n++){let r=0;for(let e=0;e<t.columns;e++)r+=Math.pow(t.get(n,e),2)/(t.columns-1);e.push(Math.sqrt(r))}return e}function z(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}function O(t){const e=[];for(let n=0;n<t.columns;n++){let r=0;for(let e=0;e<t.rows;e++)r+=Math.pow(t.get(e,n),2)/(t.rows-1);e.push(Math.sqrt(r))}return e}function $(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}function F(t){const e=t.size-1;let n=0;for(let r=0;r<t.columns;r++)for(let i=0;i<t.rows;i++)n+=Math.pow(t.get(i,r),2)/e;return Math.sqrt(n)}function V(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}class U{static from1DArray(t,e,n){let r=t*e;if(r!==n.length)throw new RangeError("data length does not match given dimensions");let i=new B(t,e);for(let s=0;s<t;s++)for(let t=0;t<e;t++)i.set(s,t,n[s*e+t]);return i}static rowVector(t){let e=new B(1,t.length);for(let n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){let e=new B(t.length,1);for(let n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static zeros(t,e){return new B(t,e)}static ones(t,e){return new B(t,e).fill(1)}static rand(t,e,n={}){if("object"!==typeof n)throw new TypeError("options must be an object");const{random:r=Math.random}=n;let i=new B(t,e);for(let s=0;s<t;s++)for(let t=0;t<e;t++)i.set(s,t,r());return i}static randInt(t,e,n={}){if("object"!==typeof n)throw new TypeError("options must be an object");const{min:r=0,max:i=1e3,random:s=Math.random}=n;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(i))throw new TypeError("max must be an integer");if(r>=i)throw new RangeError("min must be smaller than max");let o=i-r,a=new B(t,e);for(let h=0;h<t;h++)for(let t=0;t<e;t++){let e=r+Math.round(s()*o);a.set(h,t,e)}return a}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);let r=Math.min(t,e),i=this.zeros(t,e);for(let s=0;s<r;s++)i.set(s,s,n);return i}static diag(t,e,n){let r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);let i=Math.min(r,e,n),s=this.zeros(e,n);for(let o=0;o<i;o++)s.set(o,o,t[o]);return s}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,r=t.columns,i=new B(n,r);for(let s=0;s<n;s++)for(let n=0;n<r;n++)i.set(s,n,Math.min(t.get(s,n),e.get(s,n)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,r=t.columns,i=new this(n,r);for(let s=0;s<n;s++)for(let n=0;n<r;n++)i.set(s,n,Math.max(t.get(s,n),e.get(s,n)));return i}static checkMatrix(t){return U.isMatrix(t)?t:new B(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!==typeof t)throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.call(this,e,n);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let t=0;t<this.rows;t++)if(0!==this.get(t,t))return!1;return!0}isEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;while(t<this.rows&&r){e=0,i=!1;while(e<this.columns&&!1===i)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);t++}return r}isReducedEchelonForm(){let t=0,e=0,n=-1,r=!0,i=!1;while(t<this.rows&&r){e=0,i=!1;while(e<this.columns&&!1===i)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);for(let n=e+1;n<this.rows;n++)0!==this.get(t,n)&&(r=!1);t++}return r}echelonForm(){let t=this.clone(),e=0,n=0;while(e<t.rows&&n<t.columns){let r=e;for(let i=e;i<t.rows;i++)t.get(i,n)>t.get(r,n)&&(r=i);if(0===t.get(r,n))n++;else{t.swapRows(e,r);let i=t.get(e,n);for(let r=n;r<t.columns;r++)t.set(e,r,t.get(e,r)/i);for(let r=e+1;r<t.rows;r++){let i=t.get(r,n)/t.get(e,n);t.set(r,n,0);for(let s=n+1;s<t.columns;s++)t.set(r,s,t.get(r,s)-t.get(e,s)*i)}e++,n++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,n=t.rows,r=n-1;while(r>=0)if(0===t.maxRow(r))r--;else{let i=0,s=!1;while(i<n&&!1===s)1===t.get(r,i)?s=!0:i++;for(let n=0;n<r;n++){let s=t.get(n,i);for(let o=i;o<e;o++){let e=t.get(n,o)-s*t.get(r,o);t.set(n,o,e)}}r--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if("object"!==typeof t)throw new TypeError("options must be an object");const{rows:e=1,columns:n=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let r=new B(this.rows*e,this.columns*n);for(let i=0;i<e;i++)for(let t=0;t<n;t++)r.setSubMatrix(this,this.rows*i,this.columns*t);return r}fill(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){p(this,t);let e=[];for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}getRowVector(t){return B.rowVector(this.getRow(t))}setRow(t,e){p(this,t),e=m(this,e);for(let n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){p(this,t),p(this,e);for(let n=0;n<this.columns;n++){let r=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,r)}return this}getColumn(t){d(this,t);let e=[];for(let n=0;n<this.rows;n++)e.push(this.get(n,t));return e}getColumnVector(t){return B.columnVector(this.getColumn(t))}setColumn(t,e){d(this,t),e=g(this,e);for(let n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){d(this,t),d(this,e);for(let n=0;n<this.rows;n++){let r=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,r)}return this}addRowVector(t){t=m(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=m(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=m(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=m(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=g(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=g(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=g(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=g(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){p(this,t);for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){d(this,t);for(let n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(t){if(this.isEmpty())return NaN;switch(t){case"row":{const t=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t[e]&&(t[e]=this.get(e,n));return t}case"column":{const t=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t[n]&&(t[n]=this.get(e,n));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}default:throw new Error(`invalid option: ${t}`)}}maxIndex(){x(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}min(t){if(this.isEmpty())return NaN;switch(t){case"row":{const t=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t[e]&&(t[e]=this.get(e,n));return t}case"column":{const t=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t[n]&&(t[n]=this.get(e,n));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}default:throw new Error(`invalid option: ${t}`)}}minIndex(){x(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}maxRow(t){if(p(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){p(this,t),x(this);let e=this.get(t,0),n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}minRow(t){if(p(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){p(this,t),x(this);let e=this.get(t,0),n=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}maxColumn(t){if(d(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){d(this,t),x(this);let e=this.get(0,t),n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}minColumn(t){if(d(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){d(this,t),x(this);let e=this.get(0,t),n=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let n=0;n<t;n++)e.push(this.get(n,n));return e}norm(t="frobenius"){switch(t){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${t}`)}}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){U.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let n=0;for(let r=0;r<e.length;r++)n+=e[r]*t[r];return n}mmul(t){t=B.checkMatrix(t);let e=this.rows,n=this.columns,r=t.columns,i=new B(e,r),s=new Float64Array(n);for(let o=0;o<r;o++){for(let e=0;e<n;e++)s[e]=t.get(e,o);for(let t=0;t<e;t++){let e=0;for(let r=0;r<n;r++)e+=this.get(t,r)*s[r];i.set(t,o,e)}}return i}strassen2x2(t){t=B.checkMatrix(t);let e=new B(2,2);const n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),s=t.get(0,1),o=this.get(1,0),a=t.get(1,0),h=this.get(1,1),u=t.get(1,1),l=(n+h)*(r+u),c=(o+h)*r,f=n*(s-u),p=h*(a-r),d=(n+i)*u,m=(o-n)*(r+s),g=(i-h)*(a+u),v=l+p-d+g,w=f+d,y=c+p,b=l-c+f+m;return e.set(0,0,v),e.set(0,1,w),e.set(1,0,y),e.set(1,1,b),e}strassen3x3(t){t=B.checkMatrix(t);let e=new B(3,3);const n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),s=this.get(1,0),o=this.get(1,1),a=this.get(1,2),h=this.get(2,0),u=this.get(2,1),l=this.get(2,2),c=t.get(0,0),f=t.get(0,1),p=t.get(0,2),d=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),w=t.get(2,1),y=t.get(2,2),b=(n+r+i-s-o-u-l)*m,_=(n-s)*(-f+m),x=o*(-c+f+d-m-g-v+y),M=(-n+s+o)*(c-f+m),S=(s+o)*(-c+f),A=n*c,k=(-n+h+u)*(c-p+g),C=(-n+h)*(p-g),E=(h+u)*(-c+p),P=(n+r+i-o-a-h-u)*g,N=u*(-c+p+d-m-g-v+w),R=(-i+u+l)*(m+v-w),D=(i-l)*(m-w),I=i*v,T=(u+l)*(-v+w),L=(-i+o+a)*(g+v-y),z=(i-a)*(g-y),O=(o+a)*(-v+y),$=r*d,F=a*w,V=s*p,U=h*f,q=l*y,H=A+I+$,j=b+M+S+A+R+I+T,W=A+k+E+P+I+L+O,X=_+x+M+A+I+L+z,Q=_+M+S+A+F,G=I+L+z+O+V,Y=A+k+C+N+R+D+I,K=R+D+I+T+U,J=A+k+C+E+q;return e.set(0,0,H),e.set(0,1,j),e.set(0,2,W),e.set(1,0,X),e.set(1,1,Q),e.set(1,2,G),e.set(2,0,Y),e.set(2,1,K),e.set(2,2,J),e}mmulStrassen(t){t=B.checkMatrix(t);let e=this.clone(),n=e.rows,r=e.columns,i=t.rows,s=t.columns;function o(t,e,n){let r=t.rows,i=t.columns;if(r===e&&i===n)return t;{let r=U.zeros(e,n);return r=r.setSubMatrix(t,0,0),r}}r!==i&&console.warn(`Multiplying ${n} x ${r} and ${i} x ${s} matrix: dimensions do not match.`);let a=Math.max(n,i),h=Math.max(r,s);function u(t,e,n,r){if(n<=512||r<=512)return t.mmul(e);n%2===1&&r%2===1?(t=o(t,n+1,r+1),e=o(e,n+1,r+1)):n%2===1?(t=o(t,n+1,r),e=o(e,n+1,r)):r%2===1&&(t=o(t,n,r+1),e=o(e,n,r+1));let i=parseInt(t.rows/2,10),s=parseInt(t.columns/2,10),a=t.subMatrix(0,i-1,0,s-1),h=e.subMatrix(0,i-1,0,s-1),l=t.subMatrix(0,i-1,s,t.columns-1),c=e.subMatrix(0,i-1,s,e.columns-1),f=t.subMatrix(i,t.rows-1,0,s-1),p=e.subMatrix(i,e.rows-1,0,s-1),d=t.subMatrix(i,t.rows-1,s,t.columns-1),m=e.subMatrix(i,e.rows-1,s,e.columns-1),g=u(U.add(a,d),U.add(h,m),i,s),v=u(U.add(f,d),h,i,s),w=u(a,U.sub(c,m),i,s),y=u(d,U.sub(p,h),i,s),b=u(U.add(a,l),m,i,s),_=u(U.sub(f,a),U.add(h,c),i,s),x=u(U.sub(l,d),U.add(p,m),i,s),M=U.add(g,y);M.sub(b),M.add(x);let S=U.add(w,b),A=U.add(v,y),k=U.sub(g,v);k.add(w),k.add(_);let C=U.zeros(2*M.rows,2*M.columns);return C=C.setSubMatrix(M,0,0),C=C.setSubMatrix(S,M.rows,0),C=C.setSubMatrix(A,0,M.columns),C=C.setSubMatrix(k,M.rows,M.columns),C.subMatrix(0,n-1,0,r-1)}return e=o(e,a,h),t=o(t,a,h),u(e,t,a,h)}scaleRows(t={}){if("object"!==typeof t)throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let r=new B(this.rows,this.columns);for(let s=0;s<this.rows;s++){const t=this.getRow(s);t.length>0&&i(t,{min:e,max:n,output:t}),r.setRow(s,t)}return r}scaleColumns(t={}){if("object"!==typeof t)throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let r=new B(this.rows,this.columns);for(let s=0;s<this.columns;s++){const t=this.getColumn(s);t.length&&i(t,{min:e,max:n,output:t}),r.setColumn(s,t)}return r}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let n=0;n<t;n++){let t=this.get(e,n),r=this.get(e,this.columns-1-n);this.set(e,n,r),this.set(e,this.columns-1-n,t)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let n=0;n<t;n++){let t=this.get(n,e),r=this.get(this.rows-1-n,e);this.set(n,e,r),this.set(this.rows-1-n,e,t)}return this}kroneckerProduct(t){t=B.checkMatrix(t);let e=this.rows,n=this.columns,r=t.rows,i=t.columns,s=new B(e*r,n*i);for(let o=0;o<e;o++)for(let e=0;e<n;e++)for(let n=0;n<r;n++)for(let a=0;a<i;a++)s.set(r*o+n,i*e+a,this.get(o,e)*t.get(n,a));return s}kroneckerSum(t){if(t=B.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,n=t.rows,r=this.kroneckerProduct(B.eye(n,n)),i=B.eye(e,e).kroneckerProduct(t);return r.add(i)}transpose(){let t=new B(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t=q){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=q){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,r){y(this,t,e,n,r);let i=new B(e-t+1,r-n+1);for(let s=t;s<=e;s++)for(let e=n;e<=r;e++)i.set(s-t,e-n,this.get(s,e));return i}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let r=new B(t.length,n-e+1);for(let i=0;i<t.length;i++)for(let s=e;s<=n;s++){if(t[i]<0||t[i]>=this.rows)throw new RangeError(`Row index out of range: ${t[i]}`);r.set(i,s-e,this.get(t[i],s))}return r}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let r=new B(n-e+1,t.length);for(let i=0;i<t.length;i++)for(let s=e;s<=n;s++){if(t[i]<0||t[i]>=this.columns)throw new RangeError(`Column index out of range: ${t[i]}`);r.set(s-e,i,this.get(s,t[i]))}return r}setSubMatrix(t,e,n){if(t=B.checkMatrix(t),t.isEmpty())return this;let r=e+t.rows-1,i=n+t.columns-1;y(this,e,r,n,i);for(let s=0;s<t.rows;s++)for(let r=0;r<t.columns;r++)this.set(e+s,n+r,t.get(s,r));return this}selection(t,e){v(this,t),w(this,e);let n=new B(t.length,e.length);for(let r=0;r<t.length;r++){let i=t[r];for(let t=0;t<e.length;t++){let s=e[t];n.set(r,t,this.get(i,s))}}return n}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let n=0;n<t;n++)e+=this.get(n,n);return e}clone(){return this.constructor.copy(this,new B(this.rows,this.columns))}static copy(t,e){for(const[n,r,i]of t.entries())e.set(n,r,i);return e}sum(t){switch(t){case"row":return M(this);case"column":return S(this);case void 0:return A(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return k(this);case"column":return C(this);case void 0:return E(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if("object"===typeof t&&(e=t,t=void 0),"object"!==typeof e)throw new TypeError("options must be an object");const{unbiased:n=!0,mean:i=this.mean(t)}=e;if("boolean"!==typeof n)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!r.isAnyArray(i))throw new TypeError("mean must be an array");return P(this,n,i);case"column":if(!r.isAnyArray(i))throw new TypeError("mean must be an array");return N(this,n,i);case void 0:if("number"!==typeof i)throw new TypeError("mean must be a number");return R(this,n,i);default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){"object"===typeof t&&(e=t,t=void 0);const n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(let r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}center(t,e={}){if("object"===typeof t&&(e=t,t=void 0),"object"!==typeof e)throw new TypeError("options must be an object");const{center:n=this.mean(t)}=e;switch(t){case"row":if(!r.isAnyArray(n))throw new TypeError("center must be an array");return D(this,n),this;case"column":if(!r.isAnyArray(n))throw new TypeError("center must be an array");return I(this,n),this;case void 0:if("number"!==typeof n)throw new TypeError("center must be a number");return T(this,n),this;default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if("object"===typeof t&&(e=t,t=void 0),"object"!==typeof e)throw new TypeError("options must be an object");let n=e.scale;switch(t){case"row":if(void 0===n)n=L(this);else if(!r.isAnyArray(n))throw new TypeError("scale must be an array");return z(this,n),this;case"column":if(void 0===n)n=O(this);else if(!r.isAnyArray(n))throw new TypeError("scale must be an array");return $(this,n),this;case void 0:if(void 0===n)n=F(this);else if("number"!==typeof n)throw new TypeError("scale must be a number");return V(this,n),this;default:throw new Error(`invalid option: ${t}`)}}toString(t){return h(this,t)}[Symbol.iterator](){return this.entries()}*entries(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield[t,e,this.get(t,e)]}*values(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield this.get(t,e)}}function q(t,e){return t-e}function H(t){return t.every((t=>"number"===typeof t))}U.prototype.klass="Matrix","undefined"!==typeof Symbol&&(U.prototype[Symbol.for("nodejs.util.inspect.custom")]=a),U.random=U.rand,U.randomInt=U.randInt,U.diagonal=U.diag,U.prototype.diagonal=U.prototype.diag,U.identity=U.eye,U.prototype.negate=U.prototype.neg,U.prototype.tensorProduct=U.prototype.kroneckerProduct;class B extends U{data;#t(t,e){if(this.data=[],!(Number.isInteger(e)&&e>=0))throw new TypeError("nColumns must be a positive integer");for(let n=0;n<t;n++)this.data.push(new Float64Array(e));this.rows=t,this.columns=e}constructor(t,e){if(super(),B.isMatrix(t))this.#t(t.rows,t.columns),B.copy(t,this);else if(Number.isInteger(t)&&t>=0)this.#t(t,e);else{if(!r.isAnyArray(t))throw new TypeError("First argument must be a positive number or an array");{const n=t;if(t=n.length,e=t?n[0].length:0,"number"!==typeof e)throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let r=0;r<t;r++){if(n[r].length!==e)throw new RangeError("Inconsistent array dimensions");if(!H(n[r]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(n[r]))}this.rows=t,this.columns=e}}}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}removeRow(t){return p(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),p(this,t,!0),e=Float64Array.from(m(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){d(this,t);for(let e=0;e<this.rows;e++){const n=new Float64Array(this.columns-1);for(let r=0;r<t;r++)n[r]=this.data[e][r];for(let r=t+1;r<this.columns;r++)n[r-1]=this.data[e][r];this.data[e]=n}return this.columns-=1,this}addColumn(t,e){"undefined"===typeof e&&(e=t,t=this.columns),d(this,t,!0),e=g(this,e);for(let n=0;n<this.rows;n++){const r=new Float64Array(this.columns+1);let i=0;for(;i<t;i++)r[i]=this.data[n][i];for(r[i++]=e[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}}f(U,B);class j extends U{#e;get size(){return this.#e.size}get rows(){return this.#e.rows}get columns(){return this.#e.columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(t){return B.isMatrix(t)&&"SymmetricMatrix"===t.klassType}static zeros(t){return new this(t)}static ones(t){return new this(t).fill(1)}constructor(t){if(super(),B.isMatrix(t)){if(!t.isSymmetric())throw new TypeError("not symmetric data");this.#e=B.copy(t,new B(t.rows,t.rows))}else if(Number.isInteger(t)&&t>=0)this.#e=new B(t,t);else if(this.#e=new B(t),!this.isSymmetric())throw new TypeError("not symmetric data")}clone(){const t=new j(this.diagonalSize);for(const[e,n,r]of this.upperRightEntries())t.set(e,n,r);return t}toMatrix(){return new B(this)}get(t,e){return this.#e.get(t,e)}set(t,e,n){return this.#e.set(t,e,n),this.#e.set(e,t,n),this}removeCross(t){return this.#e.removeRow(t),this.#e.removeColumn(t),this}addCross(t,e){void 0===e&&(e=t,t=this.diagonalSize);const n=e.slice();return n.splice(t,1),this.#e.addRow(t,n),this.#e.addColumn(t,e),this}applyMask(t){if(t.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const e=[];for(const[n,r]of t.entries())r||e.push(n);e.reverse();for(const n of e)this.removeCross(n);return this}toCompact(){const{diagonalSize:t}=this,e=new Array(t*(t+1)/2);for(let n=0,r=0,i=0;i<e.length;i++)e[i]=this.get(r,n),++n>=t&&(n=++r);return e}static fromCompact(t){const e=t.length,n=(Math.sqrt(8*e+1)-1)/2;if(!Number.isInteger(n))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(t)}`);const r=new j(n);for(let i=0,s=0,o=0;o<e;o++)r.set(i,s,t[o]),++i>=n&&(i=++s);return r}*upperRightEntries(){for(let t=0,e=0;t<this.diagonalSize;void 0){const n=this.get(t,e);yield[t,e,n],++e>=this.diagonalSize&&(e=++t)}}*upperRightValues(){for(let t=0,e=0;t<this.diagonalSize;void 0){const n=this.get(t,e);yield n,++e>=this.diagonalSize&&(e=++t)}}}j.prototype.klassType="SymmetricMatrix";class W extends j{static isDistanceMatrix(t){return j.isSymmetricMatrix(t)&&"DistanceMatrix"===t.klassSubType}constructor(t){if(super(t),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(t,e,n){return t===e&&(n=0),super.set(t,e,n)}addCross(t,e){return void 0===e&&(e=t,t=this.diagonalSize),e=e.slice(),e[t]=0,super.addCross(t,e)}toSymmetricMatrix(){return new j(this)}clone(){const t=new W(this.diagonalSize);for(const[e,n,r]of this.upperRightEntries())e!==n&&t.set(e,n,r);return t}toCompact(){const{diagonalSize:t}=this,e=(t-1)*t/2,n=new Array(e);for(let r=1,i=0,s=0;s<n.length;s++)n[s]=this.get(i,r),++r>=t&&(r=1+ ++i);return n}static fromCompact(t){const e=t.length,n=(Math.sqrt(8*e+1)+1)/2;if(!Number.isInteger(n))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(t)}`);const r=new this(n);for(let i=1,s=0,o=0;o<e;o++)r.set(i,s,t[o]),++i>=n&&(i=1+ ++s);return r}}W.prototype.klassSubType="DistanceMatrix";class X extends U{constructor(t,e,n){super(),this.matrix=t,this.rows=e,this.columns=n}}class Q extends X{constructor(t,e){d(t,e),super(t,t.rows,1),this.column=e}set(t,e,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}}class G extends X{constructor(t,e){w(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,n){return this.matrix.set(t,this.columnIndices[e],n),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}}class Y extends X{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}class K extends X{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}class J extends X{constructor(t,e){p(t,e),super(t,1,t.columns),this.row=e}set(t,e,n){return this.matrix.set(this.row,e,n),this}get(t,e){return this.matrix.get(this.row,e)}}class Z extends X{constructor(t,e){v(t,e),super(t,e.length,t.columns),this.rowIndices=e}set(t,e,n){return this.matrix.set(this.rowIndices[t],e,n),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}}class tt extends X{constructor(t,e,n){v(t,e),w(t,n),super(t,e.length,n.length),this.rowIndices=e,this.columnIndices=n}set(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}class et extends X{constructor(t,e,n,r,i){y(t,e,n,r,i),super(t,n-e+1,i-r+1),this.startRow=e,this.startColumn=r}set(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}class nt extends X{constructor(t){super(t,t.columns,t.rows)}set(t,e,n){return this.matrix.set(e,t,n),this}get(t,e){return this.matrix.get(e,t)}}class rt extends U{constructor(t,e={}){const{rows:n=1}=e;if(t.length%n!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=n,this.columns=t.length/n,this.data=t}set(t,e,n){let r=this._calculateIndex(t,e);return this.data[r]=n,this}get(t,e){let n=this._calculateIndex(t,e);return this.data[n]}_calculateIndex(t,e){return t*this.columns+e}}class it extends U{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}}function st(t,e){if(r.isAnyArray(t))return t[0]&&r.isAnyArray(t[0])?new it(t):new rt(t,e);throw new Error("the argument is not an array")}class ot{constructor(t){t=it.checkMatrix(t);let e,n,r,i,s,o,a,h,u,l=t.clone(),c=l.rows,f=l.columns,p=new Float64Array(c),d=1;for(e=0;e<c;e++)p[e]=e;for(h=new Float64Array(c),n=0;n<f;n++){for(e=0;e<c;e++)h[e]=l.get(e,n);for(e=0;e<c;e++){for(u=Math.min(e,n),s=0,r=0;r<u;r++)s+=l.get(e,r)*h[r];h[e]-=s,l.set(e,n,h[e])}for(i=n,e=n+1;e<c;e++)Math.abs(h[e])>Math.abs(h[i])&&(i=e);if(i!==n){for(r=0;r<f;r++)o=l.get(i,r),l.set(i,r,l.get(n,r)),l.set(n,r,o);a=p[i],p[i]=p[n],p[n]=a,d=-d}if(n<c&&0!==l.get(n,n))for(e=n+1;e<c;e++)l.set(e,n,l.get(e,n)/l.get(n,n))}this.LU=l,this.pivotVector=p,this.pivotSign=d}isSingular(){let t=this.LU,e=t.columns;for(let n=0;n<e;n++)if(0===t.get(n,n))return!0;return!1}solve(t){t=B.checkMatrix(t);let e=this.LU,n=e.rows;if(n!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let r,i,s,o=t.columns,a=t.subMatrixRow(this.pivotVector,0,o-1),h=e.columns;for(s=0;s<h;s++)for(r=s+1;r<h;r++)for(i=0;i<o;i++)a.set(r,i,a.get(r,i)-a.get(s,i)*e.get(r,s));for(s=h-1;s>=0;s--){for(i=0;i<o;i++)a.set(s,i,a.get(s,i)/e.get(s,s));for(r=0;r<s;r++)for(i=0;i<o;i++)a.set(r,i,a.get(r,i)-a.get(s,i)*e.get(r,s))}return a}get determinant(){let t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");let e=this.pivotSign,n=t.columns;for(let r=0;r<n;r++)e*=t.get(r,r);return e}get lowerTriangularMatrix(){let t=this.LU,e=t.rows,n=t.columns,r=new B(e,n);for(let i=0;i<e;i++)for(let e=0;e<n;e++)i>e?r.set(i,e,t.get(i,e)):i===e?r.set(i,e,1):r.set(i,e,0);return r}get upperTriangularMatrix(){let t=this.LU,e=t.rows,n=t.columns,r=new B(e,n);for(let i=0;i<e;i++)for(let e=0;e<n;e++)i<=e?r.set(i,e,t.get(i,e)):r.set(i,e,0);return r}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function at(t,e){let n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}class ht{constructor(t){t=it.checkMatrix(t);let e,n,r,i,s=t.clone(),o=t.rows,a=t.columns,h=new Float64Array(a);for(r=0;r<a;r++){let t=0;for(e=r;e<o;e++)t=at(t,s.get(e,r));if(0!==t){for(s.get(r,r)<0&&(t=-t),e=r;e<o;e++)s.set(e,r,s.get(e,r)/t);for(s.set(r,r,s.get(r,r)+1),n=r+1;n<a;n++){for(i=0,e=r;e<o;e++)i+=s.get(e,r)*s.get(e,n);for(i=-i/s.get(r,r),e=r;e<o;e++)s.set(e,n,s.get(e,n)+i*s.get(e,r))}}h[r]=-t}this.QR=s,this.Rdiag=h}solve(t){t=B.checkMatrix(t);let e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let r,i,s,o,a=t.columns,h=t.clone(),u=e.columns;for(s=0;s<u;s++)for(i=0;i<a;i++){for(o=0,r=s;r<n;r++)o+=e.get(r,s)*h.get(r,i);for(o=-o/e.get(s,s),r=s;r<n;r++)h.set(r,i,h.get(r,i)+o*e.get(r,s))}for(s=u-1;s>=0;s--){for(i=0;i<a;i++)h.set(s,i,h.get(s,i)/this.Rdiag[s]);for(r=0;r<s;r++)for(i=0;i<a;i++)h.set(r,i,h.get(r,i)-h.get(s,i)*e.get(r,s))}return h.subMatrix(0,u-1,0,a-1)}isFullRank(){let t=this.QR.columns;for(let e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}get upperTriangularMatrix(){let t,e,n=this.QR,r=n.columns,i=new B(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)t<e?i.set(t,e,n.get(t,e)):t===e?i.set(t,e,this.Rdiag[t]):i.set(t,e,0);return i}get orthogonalMatrix(){let t,e,n,r,i=this.QR,s=i.rows,o=i.columns,a=new B(s,o);for(n=o-1;n>=0;n--){for(t=0;t<s;t++)a.set(t,n,0);for(a.set(n,n,1),e=n;e<o;e++)if(0!==i.get(n,n)){for(r=0,t=n;t<s;t++)r+=i.get(t,n)*a.get(t,e);for(r=-r/i.get(n,n),t=n;t<s;t++)a.set(t,e,a.get(t,e)+r*i.get(t,n))}}return a}}class ut{constructor(t,e={}){if(t=it.checkMatrix(t),t.isEmpty())throw new Error("Matrix must be non-empty");let n=t.rows,r=t.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:s=!0,autoTranspose:o=!1}=e;let a,h=Boolean(i),u=Boolean(s),l=!1;if(n<r)if(o){a=t.transpose(),n=a.rows,r=a.columns,l=!0;let e=h;h=u,u=e}else a=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else a=t.clone();let c=Math.min(n,r),f=Math.min(n+1,r),p=new Float64Array(f),d=new B(n,c),m=new B(r,r),g=new Float64Array(r),v=new Float64Array(n),w=new Float64Array(f);for(let A=0;A<f;A++)w[A]=A;let y=Math.min(n-1,r),b=Math.max(0,Math.min(r-2,n)),_=Math.max(y,b);for(let A=0;A<_;A++){if(A<y){p[A]=0;for(let t=A;t<n;t++)p[A]=at(p[A],a.get(t,A));if(0!==p[A]){a.get(A,A)<0&&(p[A]=-p[A]);for(let t=A;t<n;t++)a.set(t,A,a.get(t,A)/p[A]);a.set(A,A,a.get(A,A)+1)}p[A]=-p[A]}for(let t=A+1;t<r;t++){if(A<y&&0!==p[A]){let e=0;for(let r=A;r<n;r++)e+=a.get(r,A)*a.get(r,t);e=-e/a.get(A,A);for(let r=A;r<n;r++)a.set(r,t,a.get(r,t)+e*a.get(r,A))}g[t]=a.get(A,t)}if(h&&A<y)for(let t=A;t<n;t++)d.set(t,A,a.get(t,A));if(A<b){g[A]=0;for(let t=A+1;t<r;t++)g[A]=at(g[A],g[t]);if(0!==g[A]){g[A+1]<0&&(g[A]=0-g[A]);for(let t=A+1;t<r;t++)g[t]/=g[A];g[A+1]+=1}if(g[A]=-g[A],A+1<n&&0!==g[A]){for(let t=A+1;t<n;t++)v[t]=0;for(let t=A+1;t<n;t++)for(let e=A+1;e<r;e++)v[t]+=g[e]*a.get(t,e);for(let t=A+1;t<r;t++){let e=-g[t]/g[A+1];for(let r=A+1;r<n;r++)a.set(r,t,a.get(r,t)+e*v[r])}}if(u)for(let t=A+1;t<r;t++)m.set(t,A,g[t])}}let x=Math.min(r,n+1);if(y<r&&(p[y]=a.get(y,y)),n<x&&(p[x-1]=0),b+1<x&&(g[b]=a.get(b,x-1)),g[x-1]=0,h){for(let t=y;t<c;t++){for(let e=0;e<n;e++)d.set(e,t,0);d.set(t,t,1)}for(let t=y-1;t>=0;t--)if(0!==p[t]){for(let e=t+1;e<c;e++){let r=0;for(let i=t;i<n;i++)r+=d.get(i,t)*d.get(i,e);r=-r/d.get(t,t);for(let i=t;i<n;i++)d.set(i,e,d.get(i,e)+r*d.get(i,t))}for(let e=t;e<n;e++)d.set(e,t,-d.get(e,t));d.set(t,t,1+d.get(t,t));for(let e=0;e<t-1;e++)d.set(e,t,0)}else{for(let e=0;e<n;e++)d.set(e,t,0);d.set(t,t,1)}}if(u)for(let A=r-1;A>=0;A--){if(A<b&&0!==g[A])for(let t=A+1;t<r;t++){let e=0;for(let n=A+1;n<r;n++)e+=m.get(n,A)*m.get(n,t);e=-e/m.get(A+1,A);for(let n=A+1;n<r;n++)m.set(n,t,m.get(n,t)+e*m.get(n,A))}for(let t=0;t<r;t++)m.set(t,A,0);m.set(A,A,1)}let M=x-1,S=Number.EPSILON;while(x>0){let t,e;for(t=x-2;t>=-1;t--){if(-1===t)break;const e=Number.MIN_VALUE+S*Math.abs(p[t]+Math.abs(p[t+1]));if(Math.abs(g[t])<=e||Number.isNaN(g[t])){g[t]=0;break}}if(t===x-2)e=4;else{let n;for(n=x-1;n>=t;n--){if(n===t)break;let e=(n!==x?Math.abs(g[n]):0)+(n!==t+1?Math.abs(g[n-1]):0);if(Math.abs(p[n])<=S*e){p[n]=0;break}}n===t?e=3:n===x-1?e=1:(e=2,t=n)}switch(t++,e){case 1:{let e=g[x-2];g[x-2]=0;for(let n=x-2;n>=t;n--){let i=at(p[n],e),s=p[n]/i,o=e/i;if(p[n]=i,n!==t&&(e=-o*g[n-1],g[n-1]=s*g[n-1]),u)for(let t=0;t<r;t++)i=s*m.get(t,n)+o*m.get(t,x-1),m.set(t,x-1,-o*m.get(t,n)+s*m.get(t,x-1)),m.set(t,n,i)}break}case 2:{let e=g[t-1];g[t-1]=0;for(let r=t;r<x;r++){let i=at(p[r],e),s=p[r]/i,o=e/i;if(p[r]=i,e=-o*g[r],g[r]=s*g[r],h)for(let e=0;e<n;e++)i=s*d.get(e,r)+o*d.get(e,t-1),d.set(e,t-1,-o*d.get(e,r)+s*d.get(e,t-1)),d.set(e,r,i)}break}case 3:{const e=Math.max(Math.abs(p[x-1]),Math.abs(p[x-2]),Math.abs(g[x-2]),Math.abs(p[t]),Math.abs(g[t])),i=p[x-1]/e,s=p[x-2]/e,o=g[x-2]/e,a=p[t]/e,l=g[t]/e,c=((s+i)*(s-i)+o*o)/2,f=i*o*(i*o);let v=0;0===c&&0===f||(v=c<0?0-Math.sqrt(c*c+f):Math.sqrt(c*c+f),v=f/(c+v));let w=(a+i)*(a-i)+v,y=a*l;for(let b=t;b<x-1;b++){let e=at(w,y);0===e&&(e=Number.MIN_VALUE);let i=w/e,s=y/e;if(b!==t&&(g[b-1]=e),w=i*p[b]+s*g[b],g[b]=i*g[b]-s*p[b],y=s*p[b+1],p[b+1]=i*p[b+1],u)for(let t=0;t<r;t++)e=i*m.get(t,b)+s*m.get(t,b+1),m.set(t,b+1,-s*m.get(t,b)+i*m.get(t,b+1)),m.set(t,b,e);if(e=at(w,y),0===e&&(e=Number.MIN_VALUE),i=w/e,s=y/e,p[b]=e,w=i*g[b]+s*p[b+1],p[b+1]=-s*g[b]+i*p[b+1],y=s*g[b+1],g[b+1]=i*g[b+1],h&&b<n-1)for(let t=0;t<n;t++)e=i*d.get(t,b)+s*d.get(t,b+1),d.set(t,b+1,-s*d.get(t,b)+i*d.get(t,b+1)),d.set(t,b,e)}g[x-2]=w;break}case 4:if(p[t]<=0&&(p[t]=p[t]<0?-p[t]:0,u))for(let e=0;e<=M;e++)m.set(e,t,-m.get(e,t));while(t<M){if(p[t]>=p[t+1])break;let e=p[t];if(p[t]=p[t+1],p[t+1]=e,u&&t<r-1)for(let n=0;n<r;n++)e=m.get(n,t+1),m.set(n,t+1,m.get(n,t)),m.set(n,t,e);if(h&&t<n-1)for(let r=0;r<n;r++)e=d.get(r,t+1),d.set(r,t+1,d.get(r,t)),d.set(r,t,e);t++}x--;break}}if(l){let t=m;m=d,d=t}this.m=n,this.n=r,this.s=p,this.U=d,this.V=m}solve(t){let e=t,n=this.threshold,r=this.s.length,i=B.zeros(r,r);for(let c=0;c<r;c++)Math.abs(this.s[c])<=n?i.set(c,c,0):i.set(c,c,1/this.s[c]);let s=this.U,o=this.rightSingularVectors,a=o.mmul(i),h=o.rows,u=s.rows,l=B.zeros(h,u);for(let c=0;c<h;c++)for(let t=0;t<u;t++){let e=0;for(let n=0;n<r;n++)e+=a.get(c,n)*s.get(t,n);l.set(c,t,e)}return l.mmul(e)}solveForDiagonal(t){return this.solve(B.diag(t))}inverse(){let t=this.V,e=this.threshold,n=t.rows,r=t.columns,i=new B(n,this.s.length);for(let u=0;u<n;u++)for(let n=0;n<r;n++)Math.abs(this.s[n])>e&&i.set(u,n,t.get(u,n)/this.s[n]);let s=this.U,o=s.rows,a=s.columns,h=new B(n,o);for(let u=0;u<n;u++)for(let t=0;t<o;t++){let e=0;for(let n=0;n<a;n++)e+=i.get(u,n)*s.get(t,n);h.set(u,t,e)}return h}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s;for(let r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return B.diag(this.s)}}function lt(t,e=!1){return t=it.checkMatrix(t),e?new ut(t).inverse():ct(t,B.eye(t.rows))}function ct(t,e,n=!1){return t=it.checkMatrix(t),e=it.checkMatrix(e),n?new ut(t).solve(e):t.isSquare()?new ot(t).solve(e):new ht(t).solve(e)}function ft(t){if(t=B.checkMatrix(t),t.isSquare()){if(0===t.columns)return 1;let e,n,r,i;if(2===t.columns)return e=t.get(0,0),n=t.get(0,1),r=t.get(1,0),i=t.get(1,1),e*i-n*r;if(3===t.columns){let i,s,o;return i=new tt(t,[1,2],[1,2]),s=new tt(t,[1,2],[0,2]),o=new tt(t,[1,2],[0,1]),e=t.get(0,0),n=t.get(0,1),r=t.get(0,2),e*ft(i)-n*ft(s)+r*ft(o)}return new ot(t).determinant}throw Error("determinant can only be calculated for a square matrix")}function pt(t,e){let n=[];for(let r=0;r<t;r++)r!==e&&n.push(r);return n}function dt(t,e,n,r=1e-9,i=1e-9){if(t>i)return new Array(e.rows+1).fill(0);{let t=e.addRow(n,[0]);for(let e=0;e<t.rows;e++)Math.abs(t.get(e,0))<r&&t.set(e,0,0);return t.to1DArray()}}function mt(t,e={}){const{thresholdValue:n=1e-9,thresholdError:r=1e-9}=e;t=B.checkMatrix(t);let i=t.rows,s=new B(i,i);for(let o=0;o<i;o++){let e=B.columnVector(t.getRow(o)),a=t.subMatrixRow(pt(i,o)).transpose(),h=new ut(a),u=h.solve(e),l=B.sub(e,a.mmul(u)).abs().max();s.setRow(o,dt(l,u,o,n,r))}return s}function gt(t,e=Number.EPSILON){if(t=B.checkMatrix(t),t.isEmpty())return t.transpose();let n=new ut(t,{autoTranspose:!0}),r=n.leftSingularVectors,i=n.rightSingularVectors,s=n.diagonal;for(let o=0;o<s.length;o++)Math.abs(s[o])>e?s[o]=1/s[o]:s[o]=0;return i.mmul(B.diag(s).mmul(r.transpose()))}function vt(t,e=t,n={}){t=new B(t);let i=!1;if("object"!==typeof e||B.isMatrix(e)||r.isAnyArray(e)?e=new B(e):(n=e,e=t,i=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:s=!0}=n;s&&(t=t.center("column"),i||(e=e.center("column")));const o=t.transpose().mmul(e);for(let r=0;r<o.rows;r++)for(let e=0;e<o.columns;e++)o.set(r,e,o.get(r,e)*(1/(t.rows-1)));return o}function wt(t,e=t,n={}){t=new B(t);let i=!1;if("object"!==typeof e||B.isMatrix(e)||r.isAnyArray(e)?e=new B(e):(n=e,e=t,i=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:s=!0,scale:o=!0}=n;s&&(t.center("column"),i||e.center("column")),o&&(t.scale("column"),i||e.scale("column"));const a=t.standardDeviation("column",{unbiased:!0}),h=i?a:e.standardDeviation("column",{unbiased:!0}),u=t.transpose().mmul(e);for(let r=0;r<u.rows;r++)for(let e=0;e<u.columns;e++)u.set(r,e,u.get(r,e)*(1/(a[r]*h[e]))*(1/(t.rows-1)));return u}class yt{constructor(t,e={}){const{assumeSymmetric:n=!1}=e;if(t=it.checkMatrix(t),!t.isSquare())throw new Error("Matrix is not a square matrix");if(t.isEmpty())throw new Error("Matrix must be non-empty");let r,i,s=t.columns,o=new B(s,s),a=new Float64Array(s),h=new Float64Array(s),u=t,l=!1;if(l=!!n||t.isSymmetric(),l){for(r=0;r<s;r++)for(i=0;i<s;i++)o.set(r,i,u.get(r,i));bt(s,h,a,o),_t(s,h,a,o)}else{let t=new B(s,s),e=new Float64Array(s);for(i=0;i<s;i++)for(r=0;r<s;r++)t.set(r,i,u.get(r,i));xt(s,t,e,o),Mt(s,h,a,o,t)}this.n=s,this.e=h,this.d=a,this.V=o}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let t,e,n=this.n,r=this.e,i=this.d,s=new B(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)s.set(t,e,0);s.set(t,t,i[t]),r[t]>0?s.set(t,t+1,r[t]):r[t]<0&&s.set(t,t-1,r[t])}return s}}function bt(t,e,n,r){let i,s,o,a,h,u,l,c;for(h=0;h<t;h++)n[h]=r.get(t-1,h);for(a=t-1;a>0;a--){for(c=0,o=0,u=0;u<a;u++)c+=Math.abs(n[u]);if(0===c)for(e[a]=n[a-1],h=0;h<a;h++)n[h]=r.get(a-1,h),r.set(a,h,0),r.set(h,a,0);else{for(u=0;u<a;u++)n[u]/=c,o+=n[u]*n[u];for(i=n[a-1],s=Math.sqrt(o),i>0&&(s=-s),e[a]=c*s,o-=i*s,n[a-1]=i-s,h=0;h<a;h++)e[h]=0;for(h=0;h<a;h++){for(i=n[h],r.set(h,a,i),s=e[h]+r.get(h,h)*i,u=h+1;u<=a-1;u++)s+=r.get(u,h)*n[u],e[u]+=r.get(u,h)*i;e[h]=s}for(i=0,h=0;h<a;h++)e[h]/=o,i+=e[h]*n[h];for(l=i/(o+o),h=0;h<a;h++)e[h]-=l*n[h];for(h=0;h<a;h++){for(i=n[h],s=e[h],u=h;u<=a-1;u++)r.set(u,h,r.get(u,h)-(i*e[u]+s*n[u]));n[h]=r.get(a-1,h),r.set(a,h,0)}}n[a]=o}for(a=0;a<t-1;a++){if(r.set(t-1,a,r.get(a,a)),r.set(a,a,1),o=n[a+1],0!==o){for(u=0;u<=a;u++)n[u]=r.get(u,a+1)/o;for(h=0;h<=a;h++){for(s=0,u=0;u<=a;u++)s+=r.get(u,a+1)*r.get(u,h);for(u=0;u<=a;u++)r.set(u,h,r.get(u,h)-s*n[u])}}for(u=0;u<=a;u++)r.set(u,a+1,0)}for(h=0;h<t;h++)n[h]=r.get(t-1,h),r.set(t-1,h,0);r.set(t-1,t-1,1),e[0]=0}function _t(t,e,n,r){let i,s,o,a,h,u,l,c,f,p,d,m,g,v,w,y;for(o=1;o<t;o++)e[o-1]=e[o];e[t-1]=0;let b=0,_=0,x=Number.EPSILON;for(u=0;u<t;u++){_=Math.max(_,Math.abs(n[u])+Math.abs(e[u])),l=u;while(l<t){if(Math.abs(e[l])<=x*_)break;l++}if(l>u)do{for(i=n[u],c=(n[u+1]-i)/(2*e[u]),f=at(c,1),c<0&&(f=-f),n[u]=e[u]/(c+f),n[u+1]=e[u]*(c+f),p=n[u+1],s=i-n[u],o=u+2;o<t;o++)n[o]-=s;for(b+=s,c=n[l],d=1,m=d,g=d,v=e[u+1],w=0,y=0,o=l-1;o>=u;o--)for(g=m,m=d,y=w,i=d*e[o],s=d*c,f=at(c,e[o]),e[o+1]=w*f,w=e[o]/f,d=c/f,c=d*n[o]-w*i,n[o+1]=s+w*(d*i+w*n[o]),h=0;h<t;h++)s=r.get(h,o+1),r.set(h,o+1,w*r.get(h,o)+d*s),r.set(h,o,d*r.get(h,o)-w*s);c=-w*y*g*v*e[u]/p,e[u]=w*c,n[u]=d*c}while(Math.abs(e[u])>x*_);n[u]=n[u]+b,e[u]=0}for(o=0;o<t-1;o++){for(h=o,c=n[o],a=o+1;a<t;a++)n[a]<c&&(h=a,c=n[a]);if(h!==o)for(n[h]=n[o],n[o]=c,a=0;a<t;a++)c=r.get(a,o),r.set(a,o,r.get(a,h)),r.set(a,h,c)}}function xt(t,e,n,r){let i,s,o,a,h,u,l,c=0,f=t-1;for(u=c+1;u<=f-1;u++){for(l=0,a=u;a<=f;a++)l+=Math.abs(e.get(a,u-1));if(0!==l){for(o=0,a=f;a>=u;a--)n[a]=e.get(a,u-1)/l,o+=n[a]*n[a];for(s=Math.sqrt(o),n[u]>0&&(s=-s),o-=n[u]*s,n[u]=n[u]-s,h=u;h<t;h++){for(i=0,a=f;a>=u;a--)i+=n[a]*e.get(a,h);for(i/=o,a=u;a<=f;a++)e.set(a,h,e.get(a,h)-i*n[a])}for(a=0;a<=f;a++){for(i=0,h=f;h>=u;h--)i+=n[h]*e.get(a,h);for(i/=o,h=u;h<=f;h++)e.set(a,h,e.get(a,h)-i*n[h])}n[u]=l*n[u],e.set(u,u-1,l*s)}}for(a=0;a<t;a++)for(h=0;h<t;h++)r.set(a,h,a===h?1:0);for(u=f-1;u>=c+1;u--)if(0!==e.get(u,u-1)){for(a=u+1;a<=f;a++)n[a]=e.get(a,u-1);for(h=u;h<=f;h++){for(s=0,a=u;a<=f;a++)s+=n[a]*r.get(a,h);for(s=s/n[u]/e.get(u,u-1),a=u;a<=f;a++)r.set(a,h,r.get(a,h)+s*n[a])}}}function Mt(t,e,n,r,i){let s,o,a,h,u,l,c,f,p,d,m,g,v,w,y,b=t-1,_=0,x=t-1,M=Number.EPSILON,S=0,A=0,k=0,C=0,E=0,P=0,N=0,R=0;for(s=0;s<t;s++)for((s<_||s>x)&&(n[s]=i.get(s,s),e[s]=0),o=Math.max(s-1,0);o<t;o++)A+=Math.abs(i.get(s,o));while(b>=_){h=b;while(h>_){if(P=Math.abs(i.get(h-1,h-1))+Math.abs(i.get(h,h)),0===P&&(P=A),Math.abs(i.get(h,h-1))<M*P)break;h--}if(h===b)i.set(b,b,i.get(b,b)+S),n[b]=i.get(b,b),e[b]=0,b--,R=0;else if(h===b-1){if(c=i.get(b,b-1)*i.get(b-1,b),k=(i.get(b-1,b-1)-i.get(b,b))/2,C=k*k+c,N=Math.sqrt(Math.abs(C)),i.set(b,b,i.get(b,b)+S),i.set(b-1,b-1,i.get(b-1,b-1)+S),f=i.get(b,b),C>=0){for(N=k>=0?k+N:k-N,n[b-1]=f+N,n[b]=n[b-1],0!==N&&(n[b]=f-c/N),e[b-1]=0,e[b]=0,f=i.get(b,b-1),P=Math.abs(f)+Math.abs(N),k=f/P,C=N/P,E=Math.sqrt(k*k+C*C),k/=E,C/=E,o=b-1;o<t;o++)N=i.get(b-1,o),i.set(b-1,o,C*N+k*i.get(b,o)),i.set(b,o,C*i.get(b,o)-k*N);for(s=0;s<=b;s++)N=i.get(s,b-1),i.set(s,b-1,C*N+k*i.get(s,b)),i.set(s,b,C*i.get(s,b)-k*N);for(s=_;s<=x;s++)N=r.get(s,b-1),r.set(s,b-1,C*N+k*r.get(s,b)),r.set(s,b,C*r.get(s,b)-k*N)}else n[b-1]=f+k,n[b]=f+k,e[b-1]=N,e[b]=-N;b-=2,R=0}else{if(f=i.get(b,b),p=0,c=0,h<b&&(p=i.get(b-1,b-1),c=i.get(b,b-1)*i.get(b-1,b)),10===R){for(S+=f,s=_;s<=b;s++)i.set(s,s,i.get(s,s)-f);P=Math.abs(i.get(b,b-1))+Math.abs(i.get(b-1,b-2)),f=p=.75*P,c=-.4375*P*P}if(30===R&&(P=(p-f)/2,P=P*P+c,P>0)){for(P=Math.sqrt(P),p<f&&(P=-P),P=f-c/((p-f)/2+P),s=_;s<=b;s++)i.set(s,s,i.get(s,s)-P);S+=P,f=p=c=.964}R+=1,u=b-2;while(u>=h){if(N=i.get(u,u),E=f-N,P=p-N,k=(E*P-c)/i.get(u+1,u)+i.get(u,u+1),C=i.get(u+1,u+1)-N-E-P,E=i.get(u+2,u+1),P=Math.abs(k)+Math.abs(C)+Math.abs(E),k/=P,C/=P,E/=P,u===h)break;if(Math.abs(i.get(u,u-1))*(Math.abs(C)+Math.abs(E))<M*(Math.abs(k)*(Math.abs(i.get(u-1,u-1))+Math.abs(N)+Math.abs(i.get(u+1,u+1)))))break;u--}for(s=u+2;s<=b;s++)i.set(s,s-2,0),s>u+2&&i.set(s,s-3,0);for(a=u;a<=b-1;a++){if(w=a!==b-1,a!==u&&(k=i.get(a,a-1),C=i.get(a+1,a-1),E=w?i.get(a+2,a-1):0,f=Math.abs(k)+Math.abs(C)+Math.abs(E),0!==f&&(k/=f,C/=f,E/=f)),0===f)break;if(P=Math.sqrt(k*k+C*C+E*E),k<0&&(P=-P),0!==P){for(a!==u?i.set(a,a-1,-P*f):h!==u&&i.set(a,a-1,-i.get(a,a-1)),k+=P,f=k/P,p=C/P,N=E/P,C/=k,E/=k,o=a;o<t;o++)k=i.get(a,o)+C*i.get(a+1,o),w&&(k+=E*i.get(a+2,o),i.set(a+2,o,i.get(a+2,o)-k*N)),i.set(a,o,i.get(a,o)-k*f),i.set(a+1,o,i.get(a+1,o)-k*p);for(s=0;s<=Math.min(b,a+3);s++)k=f*i.get(s,a)+p*i.get(s,a+1),w&&(k+=N*i.get(s,a+2),i.set(s,a+2,i.get(s,a+2)-k*E)),i.set(s,a,i.get(s,a)-k),i.set(s,a+1,i.get(s,a+1)-k*C);for(s=_;s<=x;s++)k=f*r.get(s,a)+p*r.get(s,a+1),w&&(k+=N*r.get(s,a+2),r.set(s,a+2,r.get(s,a+2)-k*E)),r.set(s,a,r.get(s,a)-k),r.set(s,a+1,r.get(s,a+1)-k*C)}}}}if(0!==A){for(b=t-1;b>=0;b--)if(k=n[b],C=e[b],0===C)for(h=b,i.set(b,b,1),s=b-1;s>=0;s--){for(c=i.get(s,s)-k,E=0,o=h;o<=b;o++)E+=i.get(s,o)*i.get(o,b);if(e[s]<0)N=c,P=E;else if(h=s,0===e[s]?i.set(s,b,0!==c?-E/c:-E/(M*A)):(f=i.get(s,s+1),p=i.get(s+1,s),C=(n[s]-k)*(n[s]-k)+e[s]*e[s],l=(f*P-N*E)/C,i.set(s,b,l),i.set(s+1,b,Math.abs(f)>Math.abs(N)?(-E-c*l)/f:(-P-p*l)/N)),l=Math.abs(i.get(s,b)),M*l*l>1)for(o=s;o<=b;o++)i.set(o,b,i.get(o,b)/l)}else if(C<0)for(h=b-1,Math.abs(i.get(b,b-1))>Math.abs(i.get(b-1,b))?(i.set(b-1,b-1,C/i.get(b,b-1)),i.set(b-1,b,-(i.get(b,b)-k)/i.get(b,b-1))):(y=St(0,-i.get(b-1,b),i.get(b-1,b-1)-k,C),i.set(b-1,b-1,y[0]),i.set(b-1,b,y[1])),i.set(b,b-1,0),i.set(b,b,1),s=b-2;s>=0;s--){for(d=0,m=0,o=h;o<=b;o++)d+=i.get(s,o)*i.get(o,b-1),m+=i.get(s,o)*i.get(o,b);if(c=i.get(s,s)-k,e[s]<0)N=c,E=d,P=m;else if(h=s,0===e[s]?(y=St(-d,-m,c,C),i.set(s,b-1,y[0]),i.set(s,b,y[1])):(f=i.get(s,s+1),p=i.get(s+1,s),g=(n[s]-k)*(n[s]-k)+e[s]*e[s]-C*C,v=2*(n[s]-k)*C,0===g&&0===v&&(g=M*A*(Math.abs(c)+Math.abs(C)+Math.abs(f)+Math.abs(p)+Math.abs(N))),y=St(f*E-N*d+C*m,f*P-N*m-C*d,g,v),i.set(s,b-1,y[0]),i.set(s,b,y[1]),Math.abs(f)>Math.abs(N)+Math.abs(C)?(i.set(s+1,b-1,(-d-c*i.get(s,b-1)+C*i.get(s,b))/f),i.set(s+1,b,(-m-c*i.get(s,b)-C*i.get(s,b-1))/f)):(y=St(-E-p*i.get(s,b-1),-P-p*i.get(s,b),N,C),i.set(s+1,b-1,y[0]),i.set(s+1,b,y[1]))),l=Math.max(Math.abs(i.get(s,b-1)),Math.abs(i.get(s,b))),M*l*l>1)for(o=s;o<=b;o++)i.set(o,b-1,i.get(o,b-1)/l),i.set(o,b,i.get(o,b)/l)}for(s=0;s<t;s++)if(s<_||s>x)for(o=s;o<t;o++)r.set(s,o,i.get(s,o));for(o=t-1;o>=_;o--)for(s=_;s<=x;s++){for(N=0,a=_;a<=Math.min(o,x);a++)N+=r.get(s,a)*i.get(a,o);r.set(s,o,N)}}}function St(t,e,n,r){let i,s;return Math.abs(n)>Math.abs(r)?(i=r/n,s=n+i*r,[(t+i*e)/s,(e-i*t)/s]):(i=n/r,s=r+i*n,[(i*t+e)/s,(i*e-t)/s])}class At{constructor(t){if(t=it.checkMatrix(t),!t.isSymmetric())throw new Error("Matrix is not symmetric");let e,n,r,i=t,s=i.rows,o=new B(s,s),a=!0;for(n=0;n<s;n++){let t=0;for(r=0;r<n;r++){let s=0;for(e=0;e<r;e++)s+=o.get(r,e)*o.get(n,e);s=(i.get(n,r)-s)/o.get(r,r),o.set(n,r,s),t+=s*s}for(t=i.get(n,n)-t,a&=t>0,o.set(n,n,Math.sqrt(Math.max(t,0))),r=n+1;r<s;r++)o.set(n,r,0)}this.L=o,this.positiveDefinite=Boolean(a)}isPositiveDefinite(){return this.positiveDefinite}solve(t){t=it.checkMatrix(t);let e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");let r,i,s,o=t.columns,a=t.clone();for(s=0;s<n;s++)for(i=0;i<o;i++){for(r=0;r<s;r++)a.set(s,i,a.get(s,i)-a.get(r,i)*e.get(s,r));a.set(s,i,a.get(s,i)/e.get(s,s))}for(s=n-1;s>=0;s--)for(i=0;i<o;i++){for(r=s+1;r<n;r++)a.set(s,i,a.get(s,i)-a.get(r,i)*e.get(r,s));a.set(s,i,a.get(s,i)/e.get(s,s))}return a}get lowerTriangularMatrix(){return this.L}}class kt{constructor(t,e={}){t=it.checkMatrix(t);let{Y:n}=e;const{scaleScores:i=!1,maxIterations:s=1e3,terminationCriteria:o=1e-10}=e;let a;if(n){if(n=r.isAnyArray(n)&&"number"===typeof n[0]?B.columnVector(n):it.checkMatrix(n),n.rows!==t.rows)throw new Error("Y should have the same number of rows as X");a=n.getColumnVector(0)}else a=t.getColumnVector(0);let h,u,l,c,f=1;for(let r=0;r<s&&f>o;r++)l=t.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0)),l=l.div(l.norm()),h=t.mmul(l).div(l.transpose().mmul(l).get(0,0)),r>0&&(f=h.clone().sub(c).pow(2).sum()),c=h.clone(),n?(u=n.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0)),u=u.div(u.norm()),a=n.mmul(u).div(u.transpose().mmul(u).get(0,0))):a=h;if(n){let e=t.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0));e=e.div(e.norm());let r=t.clone().sub(h.clone().mmul(e.transpose())),i=a.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0)),s=n.clone().sub(h.clone().mulS(i.get(0,0)).mmul(u.transpose()));this.t=h,this.p=e.transpose(),this.w=l.transpose(),this.q=u,this.u=a,this.s=h.transpose().mmul(h),this.xResidual=r,this.yResidual=s,this.betas=i}else this.w=l.transpose(),this.s=h.transpose().mmul(h).sqrt(),this.t=i?h.clone().div(this.s.get(0,0)):h,this.xResidual=t.sub(h.mmul(l.transpose()))}}e.y3=U,e.jy=At,e.oN=At,e.Hc=W,e.cg=yt,e.hj=yt,e.LU=ot,e.Tb=ot,e.uq=B,e.Zm=G,e.Dq=Q,e.__=Y,e.q0=K,e.lh=Z,e.pI=J,e.zC=tt,e.zg=et,e.g6=nt,e.OL=kt,e.ks=kt,e.QR=ht,e.jp=ht,e.mk=ut,e.W2=ut,e.l=j,e.KY=rt,e.dv=it,e.BR=wt,e.Wu=vt,e.a4=ft,e.DI=lt,e.Jo=mt,e.Zi=gt,e.kH=ct,e.LV=st},41853:function(t,e,n){var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(38186));function s(t,e){var n=function(n){return i.empty(t).map((function(){return i.filled(e,n)}))},r=[];return r.push(n(-1)),r.push(n(1/0)),r.push(n(0)),r}function o(t,e,n){for(var r=i.zeros(t),s=0;s<t;s++){var o=!0,a=0;while(o){a=i.tauRandInt(e,n);for(var h=!1,u=0;u<s;u++)if(a===r[u]){h=!0;break}h||(o=!1)}r[s]=a}return r}function a(t,e,n,r,i){e=Math.floor(e);var s=t[0][e],o=t[1][e];t[2][e];if(n>=o[0])return 0;for(var a=0;a<s.length;a++)if(r===s[a])return 0;return h(t,e,n,r,i)}function h(t,e,n,r,i){var s=t[0][e],o=t[1][e],a=t[2][e];if(n>=o[0])return 0;o[0]=n,s[0]=r,a[0]=i;var h=0,u=0;while(1){var l=2*h+1,c=l+1,f=t[0][0].length;if(l>=f)break;if(c>=f){if(!(o[l]>n))break;u=l}else if(o[l]>=o[c]){if(!(n<o[l]))break;u=l}else{if(!(n<o[c]))break;u=c}o[h]=o[u],s[h]=s[u],a[h]=a[u],h=u}return o[h]=n,s[h]=r,a[h]=i,1}function u(t,e,n,r,o){for(var h=s(e,r),u=0;u<e;u++)for(var l=0;l<n;l++)if(!(t[0][u][l]<0)){var c=t[0][u][l],f=t[2][u][l],p=i.tauRand(o);a(h,u,p,c,f),a(h,c,p,u,f),t[2][u][l]=0}return h}function l(t){for(var e=t[0],n=t[1],r=0;r<e.length;r++)for(var i=e[r],s=n[r],o=0;o<i.length-1;o++){var a=i.length-o-1,h=s.length-o-1,u=i[0];i[0]=i[a],i[a]=u;var l=s[0];s[0]=s[h],s[h]=l,c(s,i,h,0)}return{indices:e,weights:n}}function c(t,e,n,r){while(2*r+1<n){var i=2*r+1,s=i+1,o=r;if(t[o]<t[i]&&(o=i),s<n&&t[o]<t[s]&&(o=s),o===r)break;var a=t[r];t[r]=t[o],t[o]=a;var h=e[r];e[r]=e[o],e[o]=h,r=o}}function f(t,e){for(var n=t[0][e],r=t[1][e],i=t[2][e],s=1/0,o=-1,a=0;a>n.length;a++)1===i[a]&&r[a]<s&&(s=r[a],o=a);return o>=0?(i[o]=0,Math.floor(n[o])):-1}e.makeHeap=s,e.rejectionSample=o,e.heapPush=a,e.uncheckedHeapPush=h,e.buildCandidates=u,e.deheapSort=l,e.smallestFlagged=f},22415:function(t,e,n){var r=n(65112);r.UMAP},40702:function(t,e,n){var r,i=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{while((void 0===e||e-- >0)&&!(r=s.next()).done)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s["return"])&&n.call(s)}finally{if(i)throw i.error}}return o},s=this&&this.__values||function(t){var e="function"===typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=o(n(38186)),h=function(){function t(t,e,n,r){if(this.entries=new Map,this.nRows=0,this.nCols=0,t.length!==e.length||t.length!==n.length)throw new Error("rows, cols and values arrays must all have the same length");this.nRows=r[0],this.nCols=r[1];for(var i=0;i<n.length;i++){var s=t[i],o=e[i];this.checkDims(s,o);var a=this.makeKey(s,o);this.entries.set(a,{value:n[i],row:s,col:o})}}return t.prototype.makeKey=function(t,e){return t+":"+e},t.prototype.checkDims=function(t,e){var n=t<this.nRows&&e<this.nCols;if(!n)throw new Error("row and/or col specified outside of matrix dimensions")},t.prototype.set=function(t,e,n){this.checkDims(t,e);var r=this.makeKey(t,e);this.entries.has(r)?this.entries.get(r).value=n:this.entries.set(r,{value:n,row:t,col:e})},t.prototype.get=function(t,e,n){void 0===n&&(n=0),this.checkDims(t,e);var r=this.makeKey(t,e);return this.entries.has(r)?this.entries.get(r).value:n},t.prototype.getAll=function(t){void 0===t&&(t=!0);var e=[];return this.entries.forEach((function(t){e.push(t)})),t&&e.sort((function(t,e){return t.row===e.row?t.col-e.col:t.row-e.row})),e},t.prototype.getDims=function(){return[this.nRows,this.nCols]},t.prototype.getRows=function(){return Array.from(this.entries,(function(t){var e=i(t,2),n=(e[0],e[1]);return n.row}))},t.prototype.getCols=function(){return Array.from(this.entries,(function(t){var e=i(t,2),n=(e[0],e[1]);return n.col}))},t.prototype.getValues=function(){return Array.from(this.entries,(function(t){var e=i(t,2),n=(e[0],e[1]);return n.value}))},t.prototype.forEach=function(t){this.entries.forEach((function(e){return t(e.value,e.row,e.col)}))},t.prototype.map=function(e){var n=[];this.entries.forEach((function(t){n.push(e(t.value,t.row,t.col))}));var r=[this.nRows,this.nCols];return new t(this.getRows(),this.getCols(),n,r)},t.prototype.toArray=function(){var t=this,e=a.empty(this.nRows),n=e.map((function(){return a.zeros(t.nCols)}));return this.entries.forEach((function(t){n[t.row][t.col]=t.value})),n},t}();function u(t){var e=[],n=[],r=[];t.forEach((function(t,i,s){e.push(i),n.push(s),r.push(t)}));var i=[t.nCols,t.nRows];return new h(n,e,r,i)}function l(t){for(var e=i(t,1),n=e[0],r=new h([],[],[],t),s=0;s<n;s++)r.set(s,s,1);return r}function c(t,e){return y(t,e,(function(t,e){return t*e}))}function f(t,e){return y(t,e,(function(t,e){return t+e}))}function p(t,e){return y(t,e,(function(t,e){return t-e}))}function d(t,e){return y(t,e,(function(t,e){return t>e?t:e}))}function m(t,e){return t.map((function(t){return t*e}))}function g(t){for(var e=new Set,n=t.getValues(),r=t.getRows(),i=t.getCols(),s=0;s<n.length;s++)0===n[s]&&e.add(s);var o=function(t,n){return!e.has(n)},a=n.filter(o),u=r.filter(o),l=i.filter(o);return new h(u,l,a,t.getDims())}function v(t,e){var n,r;void 0===e&&(e="l2");var i=w[e],o=new Map;t.forEach((function(t,e,n){var r=o.get(e)||[];r.push(n),o.set(e,r)}));var a=new h([],[],[],t.getDims()),u=function(e){for(var n=o.get(e).sort(),r=n.map((function(n){return t.get(e,n)})),s=i(r),h=0;h<s.length;h++)a.set(e,n[h],s[h])};try{for(var l=s(o.keys()),c=l.next();!c.done;c=l.next()){var f=c.value;u(f)}}catch(p){n={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return a}e.SparseMatrix=h,e.transpose=u,e.identity=l,e.pairwiseMultiply=c,e.add=f,e.subtract=p,e.maximum=d,e.multiplyScalar=m,e.eliminateZeros=g,e.normalize=v;var w=(r={},r["max"]=function(t){for(var e=-1/0,n=0;n<t.length;n++)e=t[n]>e?t[n]:e;return t.map((function(t){return t/e}))},r["l1"]=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return t.map((function(t){return t/e}))},r["l2"]=function(t){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n],2);return t.map((function(t){return Math.sqrt(Math.pow(t,2)/e)}))},r);function y(t,e,n){for(var r=new Set,i=[],s=[],o=[],a=function(r,a){i.push(r),s.push(a);var h=n(t.get(r,a),e.get(r,a));o.push(h)},u=t.getValues(),l=t.getRows(),c=t.getCols(),f=0;f<u.length;f++){var p=l[f],d=c[f],m=p+":"+d;r.add(m),a(p,d)}var g=e.getValues(),v=e.getRows(),w=e.getCols();for(f=0;f<g.length;f++){p=v[f],d=w[f],m=p+":"+d;r.has(m)||a(p,d)}var y=[t.nRows,t.nCols];return new h(i,s,o,y)}function b(t){var e=[];t.forEach((function(t,n,r){e.push({value:t,row:n,col:r})})),e.sort((function(t,e){return t.row===e.row?t.col-e.col:t.row-e.row}));for(var n=[],r=[],i=[],s=-1,o=0;o<e.length;o++){var a=e[o],h=a.row,u=a.col,l=a.value;h!==s&&(s=h,i.push(o)),n.push(u),r.push(l)}return{indices:n,values:r,indptr:i}}e.getCSR=b},32286:function(t,e,n){var r=this&&this.__values||function(t){var e="function"===typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s=i(n(41853)),o=i(n(40702)),a=i(n(53731)),h=i(n(38186));function u(t,e){return function(n,r,i,o,a,u,l,c){void 0===o&&(o=10),void 0===a&&(a=50),void 0===u&&(u=.001),void 0===l&&(l=.5),void 0===c&&(c=!0);for(var f=n.length,p=s.makeHeap(n.length,i),d=0;d<n.length;d++)for(var m=s.rejectionSample(i,n.length,e),g=0;g<m.length;g++){var v=t(n[d],n[m[g]]);s.heapPush(p,d,v,m[g],1),s.heapPush(p,m[g],v,d,1)}if(c)for(var w=0;w<r.length;w++)for(d=0;d<r[w].length;d++){if(r[w][d]<0)break;for(g=d+1;g<r[w].length;g++){if(r[w][g]<0)break;v=t(n[r[w][d]],n[r[w][g]]);s.heapPush(p,r[w][d],v,r[w][g],1),s.heapPush(p,r[w][g],v,r[w][d],1)}}for(w=0;w<o;w++){var y=s.buildCandidates(p,f,i,a,e),b=0;for(d=0;d<f;d++)for(g=0;g<a;g++){var _=Math.floor(y[0][d][g]);if(!(_<0||h.tauRand(e)<l))for(var x=0;x<a;x++){var M=Math.floor(y[0][d][x]),S=y[2][d][g],A=y[2][d][x];if(!(M<0||!S&&!A)){v=t(n[_],n[M]);b+=s.heapPush(p,_,v,M,1),b+=s.heapPush(p,M,v,_,1)}}}if(b<=u*i*n.length)break}var k=s.deheapSort(p);return k}}function l(t){function e(e,n,r,i,o){for(var a=0;a<r.length;a++)for(var u=h.rejectionSample(e,n.length,o),l=0;l<u.length;l++)if(!(u[l]<0)){var c=t(n[u[l]],r[a]);s.heapPush(i,a,c,u[l],1)}}function n(e,n,r,i,o){for(var h=0;h<r.length;h++)for(var u=a.searchFlatTree(r[h],e,o),l=0;l<u.length;l++){if(u[l]<0)return;var c=t(n[u[l]],r[h]);s.heapPush(i,h,c,u[l],1)}}return{initFromRandom:e,initFromTree:n}}function c(t){return function(e,n,i,a){for(var h,u,l=o.getCSR(n),c=l.indices,f=l.indptr,p=0;p<a.length;p++){var d=new Set(i[0][p]);while(1){var m=s.smallestFlagged(i,p);if(-1===m)break;var g=c.slice(f[m],f[m+1]);try{for(var v=r(g),w=v.next();!w.done;w=v.next()){var y=w.value;if(y!==m&&-1!==y&&!d.has(y)){var b=t(e[y],a[p]);s.uncheckedHeapPush(i,p,b,y,1),d.add(y)}}}catch(_){h={error:_}}finally{try{w&&!w.done&&(u=v.return)&&u.call(v)}finally{if(h)throw h.error}}}}return i}}function f(t,e,n,i,o,a,h){var u,l,c=s.makeHeap(n.length,i);if(o(i,e,n,c,h),t)try{for(var f=r(t),p=f.next();!p.done;p=f.next()){var d=p.value;a(d,e,n,c,h)}}catch(m){u={error:m}}finally{try{p&&!p.done&&(l=f.return)&&l.call(f)}finally{if(u)throw u.error}}return c}e.makeNNDescent=u,e.makeInitializations=l,e.makeInitializedNNSearch=c,e.initializeSearch=f},53731:function(t,e,n){var r=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{while((void 0===e||e-- >0)&&!(r=s.next()).done)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s["return"])&&n.call(s)}finally{if(i)throw i.error}}return o},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t},s=this&&this.__values||function(t){var e="function"===typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=o(n(38186)),h=function(){function t(t,e,n,r){this.hyperplanes=t,this.offsets=e,this.children=n,this.indices=r}return t}();function u(t,e,n,r){var i=Math.max(10,e),s=a.range(n).map((function(e,n){return l(t,i,n,r)})),o=s.map((function(t){return p(t,i)}));return o}function l(t,e,n,r){void 0===e&&(e=30);var i=a.range(t.length),s=c(t,i,e,n,r);return s}function c(t,e,n,r,i){if(void 0===n&&(n=30),e.length>n){var s=f(t,e,i),o=s.indicesLeft,a=s.indicesRight,h=s.hyperplane,u=s.offset,l=c(t,o,n,r+1,i),p=c(t,a,n,r+1,i),d={leftChild:l,rightChild:p,isLeaf:!1,hyperplane:h,offset:u};return d}d={indices:e,isLeaf:!0};return d}function f(t,e,n){var r=t[0].length,i=a.tauRandInt(e.length,n),s=a.tauRandInt(e.length,n);s+=i===s?1:0,s%=e.length;for(var o=e[i],h=e[s],u=0,l=a.zeros(r),c=0;c<l.length;c++)l[c]=t[o][c]-t[h][c],u-=l[c]*(t[o][c]+t[h][c])/2;var f=0,p=0,d=a.zeros(e.length);for(c=0;c<e.length;c++){for(var m=u,g=0;g<r;g++)m+=l[g]*t[e[c]][g];0===m?(d[c]=a.tauRandInt(2,n),0===d[c]?f+=1:p+=1):m>0?(d[c]=0,f+=1):(d[c]=1,p+=1)}var v=a.zeros(f),w=a.zeros(p);f=0,p=0;for(c=0;c<d.length;c++)0===d[c]?(v[f]=e[c],f+=1):(w[p]=e[c],p+=1);return{indicesLeft:v,indicesRight:w,hyperplane:l,offset:u}}function p(t,e){var n=m(t),r=g(t),i=a.range(n).map((function(){return a.zeros(t.hyperplane?t.hyperplane.length:0)})),s=a.zeros(n),o=a.range(n).map((function(){return[-1,-1]})),u=a.range(r).map((function(){return a.range(e).map((function(){return-1}))}));return d(t,i,s,o,u,0,0),new h(i,s,o,u)}function d(t,e,n,r,s,o,a){var h;if(t.isLeaf)return r[o][0]=-a,(h=s[a]).splice.apply(h,i([0,t.indices.length],t.indices)),a+=1,{nodeNum:o,leafNum:a};e[o]=t.hyperplane,n[o]=t.offset,r[o][0]=o+1;var u=o,l=d(t.leftChild,e,n,r,s,o+1,a);return o=l.nodeNum,a=l.leafNum,r[u][1]=o+1,l=d(t.rightChild,e,n,r,s,o+1,a),{nodeNum:l.nodeNum,leafNum:l.leafNum}}function m(t){return t.isLeaf?1:1+m(t.leftChild)+m(t.rightChild)}function g(t){return t.isLeaf?1:g(t.leftChild)+g(t.rightChild)}function v(t){var e,n;if(t.length>0){var r=[];try{for(var o=s(t),a=o.next();!a.done;a=o.next()){var h=a.value;r.push.apply(r,i(h.indices))}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}return[[-1]]}function w(t,e,n,r){for(var i=e,s=0;s<n.length;s++)i+=t[s]*n[s];if(0===i){var o=a.tauRandInt(2,r);return o}return i>0?0:1}function y(t,e,n){var r=0;while(e.children[r][0]>0){var i=w(e.hyperplanes[r],e.offsets[r],t,n);r=0===i?e.children[r][0]:e.children[r][1]}var s=-1*e.children[r][0];return e.indices[s]}e.FlatTree=h,e.makeForest=u,e.makeLeafArray=v,e.searchFlatTree=y},65112:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{h(r.next(t))}catch(e){s(e)}}function a(t){try{h(r["throw"](t))}catch(e){s(e)}}function h(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,a)}h((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(t){return function(e){return h([t,e])}}function h(s){if(n)throw new TypeError("Generator is already executing.");while(o)try{if(n=1,r&&(i=2&s[0]?r["return"]:s[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},s=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{while((void 0===e||e-- >0)&&!(r=s.next()).done)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s["return"])&&n.call(s)}finally{if(i)throw i.error}}return o},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=a(n(41853)),l=a(n(40702)),c=a(n(32286)),f=a(n(53731)),p=a(n(38186)),d=h(n(55902)),m=1e-5,g=.001,v=function(){function t(t){void 0===t&&(t={});var e=this;this.learningRate=1,this.localConnectivity=1,this.minDist=.1,this.nComponents=2,this.nEpochs=0,this.nNeighbors=15,this.negativeSampleRate=5,this.random=Math.random,this.repulsionStrength=1,this.setOpMixRatio=1,this.spread=1,this.transformQueueSize=4,this.targetMetric="categorical",this.targetWeight=.5,this.targetNNeighbors=this.nNeighbors,this.distanceFn=w,this.isInitialized=!1,this.rpForest=[],this.embedding=[],this.optimizationState=new b;var n=function(n){void 0!==t[n]&&(e[n]=t[n])};n("distanceFn"),n("learningRate"),n("localConnectivity"),n("minDist"),n("nComponents"),n("nEpochs"),n("nNeighbors"),n("negativeSampleRate"),n("random"),n("repulsionStrength"),n("setOpMixRatio"),n("spread"),n("transformQueueSize")}return t.prototype.fit=function(t){return this.initializeFit(t),this.optimizeLayout(),this.embedding},t.prototype.fitAsync=function(t,e){return void 0===e&&(e=function(){return!0}),r(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return this.initializeFit(t),[4,this.optimizeLayoutAsync(e)];case 1:return n.sent(),[2,this.embedding]}}))}))},t.prototype.setSupervisedProjection=function(t,e){void 0===e&&(e={}),this.Y=t,this.targetMetric=e.targetMetric||this.targetMetric,this.targetWeight=e.targetWeight||this.targetWeight,this.targetNNeighbors=e.targetNNeighbors||this.targetNNeighbors},t.prototype.setPrecomputedKNN=function(t,e){this.knnIndices=t,this.knnDistances=e},t.prototype.initializeFit=function(t){if(t.length<=this.nNeighbors)throw new Error("Not enough data points ("+t.length+") to create nNeighbors: "+this.nNeighbors+".  Add more data points or adjust the configuration.");if(this.X===t&&this.isInitialized)return this.getNEpochs();if(this.X=t,!this.knnIndices&&!this.knnDistances){var e=this.nearestNeighbors(t);this.knnIndices=e.knnIndices,this.knnDistances=e.knnDistances}this.graph=this.fuzzySimplicialSet(t,this.nNeighbors,this.setOpMixRatio),this.makeSearchFns(),this.searchGraph=this.makeSearchGraph(t),this.processGraphForSupervisedProjection();var n=this.initializeSimplicialSetEmbedding(),r=n.head,i=n.tail,s=n.epochsPerSample;return this.optimizationState.head=r,this.optimizationState.tail=i,this.optimizationState.epochsPerSample=s,this.initializeOptimization(),this.prepareForOptimizationLoop(),this.isInitialized=!0,this.getNEpochs()},t.prototype.makeSearchFns=function(){var t=c.makeInitializations(this.distanceFn),e=t.initFromTree,n=t.initFromRandom;this.initFromTree=e,this.initFromRandom=n,this.search=c.makeInitializedNNSearch(this.distanceFn)},t.prototype.makeSearchGraph=function(t){for(var e=this.knnIndices,n=this.knnDistances,r=[t.length,t.length],i=new l.SparseMatrix([],[],[],r),s=0;s<e.length;s++)for(var o=e[s],a=n[s],h=0;h<o.length;h++){var u=o[h],c=a[h];c>0&&i.set(s,u,c)}var f=l.transpose(i);return l.maximum(i,f)},t.prototype.transform=function(t){var e=this,n=this.X;if(void 0===n||0===n.length)throw new Error("No data has been fit.");var r=Math.floor(this.nNeighbors*this.transformQueueSize);r=Math.min(n.length,r);var i=c.initializeSearch(this.rpForest,n,t,r,this.initFromRandom,this.initFromTree,this.random),s=this.search(n,this.searchGraph,i,t),o=u.deheapSort(s),a=o.indices,h=o.weights;a=a.map((function(t){return t.slice(0,e.nNeighbors)})),h=h.map((function(t){return t.slice(0,e.nNeighbors)}));var f=Math.max(0,this.localConnectivity-1),d=this.smoothKNNDistance(h,this.nNeighbors,f),m=d.sigmas,g=d.rhos,v=this.computeMembershipStrengths(a,h,m,g),w=v.rows,y=v.cols,b=v.vals,_=[t.length,n.length],x=new l.SparseMatrix(w,y,b,_),M=l.normalize(x,"l1"),S=l.getCSR(M),A=t.length,C=p.reshape2d(S.indices,A,this.nNeighbors),E=p.reshape2d(S.values,A,this.nNeighbors),P=k(C,E,this.embedding),N=this.nEpochs?this.nEpochs/3:x.nRows<=1e4?100:30,R=x.getValues().reduce((function(t,e){return e>t?e:t}),0);x=x.map((function(t){return t<R/N?0:t})),x=l.eliminateZeros(x);var D=this.makeEpochsPerSample(x.getValues(),N),I=x.getRows(),T=x.getCols();return this.assignOptimizationStateParameters({headEmbedding:P,tailEmbedding:this.embedding,head:I,tail:T,currentEpoch:0,nEpochs:N,nVertices:x.getDims()[1],epochsPerSample:D}),this.prepareForOptimizationLoop(),this.optimizeLayout()},t.prototype.processGraphForSupervisedProjection=function(){var t=this,e=t.Y,n=t.X;if(e){if(e.length!==n.length)throw new Error("Length of X and y must be equal");if("categorical"===this.targetMetric){var r=this.targetWeight<1,i=r?1/(1-this.targetWeight)*2.5:1e12;this.graph=this.categoricalSimplicialSetIntersection(this.graph,e,i)}}},t.prototype.step=function(){var t=this.optimizationState.currentEpoch;return t<this.getNEpochs()&&this.optimizeLayoutStep(t),this.optimizationState.currentEpoch},t.prototype.getEmbedding=function(){return this.embedding},t.prototype.nearestNeighbors=function(t){var e=this,n=e.distanceFn,r=e.nNeighbors,i=function(t){return Math.log(t)/Math.log(2)},s=c.makeNNDescent(n,this.random),o=function(t){return.5===t?0:Math.round(t)},a=5+Math.floor(o(Math.pow(t.length,.5)/20)),h=Math.max(5,Math.floor(Math.round(i(t.length))));this.rpForest=f.makeForest(t,r,a,this.random);var u=f.makeLeafArray(this.rpForest),l=s(t,u,r,h),p=l.indices,d=l.weights;return{knnIndices:p,knnDistances:d}},t.prototype.fuzzySimplicialSet=function(t,e,n){void 0===n&&(n=1);var r=this,i=r.knnIndices,s=void 0===i?[]:i,o=r.knnDistances,a=void 0===o?[]:o,h=r.localConnectivity,u=this.smoothKNNDistance(a,e,h),c=u.sigmas,f=u.rhos,p=this.computeMembershipStrengths(s,a,c,f),d=p.rows,m=p.cols,g=p.vals,v=[t.length,t.length],w=new l.SparseMatrix(d,m,g,v),y=l.transpose(w),b=l.pairwiseMultiply(w,y),_=l.subtract(l.add(w,y),b),x=l.multiplyScalar(_,n),M=l.multiplyScalar(b,1-n),S=l.add(x,M);return S},t.prototype.categoricalSimplicialSetIntersection=function(t,e,n,r){void 0===r&&(r=1);var i=S(t,e,r,n);return i=l.eliminateZeros(i),A(i)},t.prototype.smoothKNNDistance=function(t,e,n,r,i){void 0===n&&(n=1),void 0===r&&(r=64),void 0===i&&(i=1);for(var s=Math.log(e)/Math.log(2)*i,o=p.zeros(t.length),a=p.zeros(t.length),h=0;h<t.length;h++){var u=0,l=1/0,c=1,f=t[h],d=f.filter((function(t){return t>0}));if(d.length>=n){var v=Math.floor(n),w=n-v;v>0?(o[h]=d[v-1],w>m&&(o[h]+=w*(d[v]-d[v-1]))):o[h]=w*d[0]}else d.length>0&&(o[h]=p.max(d));for(var y=0;y<r;y++){for(var b=0,_=1;_<t[h].length;_++){var x=t[h][_]-o[h];b+=x>0?Math.exp(-x/c):1}if(Math.abs(b-s)<m)break;b>s?(l=c,c=(u+l)/2):(u=c,l===1/0?c*=2:c=(u+l)/2)}if(a[h]=c,o[h]>0){var M=p.mean(f);a[h]<g*M&&(a[h]=g*M)}else{var S=p.mean(t.map(p.mean));a[h]<g*S&&(a[h]=g*S)}}return{sigmas:a,rhos:o}},t.prototype.computeMembershipStrengths=function(t,e,n,r){for(var i=t.length,s=t[0].length,o=p.zeros(i*s),a=p.zeros(i*s),h=p.zeros(i*s),u=0;u<i;u++)for(var l=0;l<s;l++){var c=0;-1!==t[u][l]&&(c=t[u][l]===u?0:e[u][l]-r[u]<=0?1:Math.exp(-(e[u][l]-r[u])/n[u]),o[u*s+l]=u,a[u*s+l]=t[u][l],h[u*s+l]=c)}return{rows:o,cols:a,vals:h}},t.prototype.initializeSimplicialSetEmbedding=function(){for(var t=this,e=this.getNEpochs(),n=this.nComponents,r=this.graph.getValues(),i=0,s=0;s<r.length;s++){var o=r[s];i<r[s]&&(i=o)}var a=this.graph.map((function(t){return t<i/e?0:t}));this.embedding=p.zeros(a.nRows).map((function(){return p.zeros(n).map((function(){return 20*p.tauRand(t.random)-10}))}));var h=[],u=[],l=[],c=a.getAll();for(s=0;s<c.length;s++){var f=c[s];f.value&&(h.push(f.value),l.push(f.row),u.push(f.col))}var d=this.makeEpochsPerSample(h,e);return{head:u,tail:l,epochsPerSample:d}},t.prototype.makeEpochsPerSample=function(t,e){var n=p.filled(t.length,-1),r=p.max(t),i=t.map((function(t){return t/r*e}));return i.forEach((function(t,r){t>0&&(n[r]=e/i[r])})),n},t.prototype.assignOptimizationStateParameters=function(t){Object.assign(this.optimizationState,t)},t.prototype.prepareForOptimizationLoop=function(){var t=this,e=t.repulsionStrength,n=t.learningRate,r=t.negativeSampleRate,i=this.optimizationState,s=i.epochsPerSample,a=i.headEmbedding,h=i.tailEmbedding,u=a[0].length,l=a.length===h.length,c=s.map((function(t){return t/r})),f=o(c),p=o(s);this.assignOptimizationStateParameters({epochOfNextSample:p,epochOfNextNegativeSample:f,epochsPerNegativeSample:c,moveOther:l,initialAlpha:n,alpha:n,gamma:e,dim:u})},t.prototype.initializeOptimization=function(){var t=this.embedding,e=this.embedding,n=this.optimizationState,r=n.head,i=n.tail,s=n.epochsPerSample,o=this.getNEpochs(),a=this.graph.nCols,h=M(this.spread,this.minDist),u=h.a,l=h.b;this.assignOptimizationStateParameters({headEmbedding:t,tailEmbedding:e,head:r,tail:i,epochsPerSample:s,a:u,b:l,nEpochs:o,nVertices:a})},t.prototype.optimizeLayoutStep=function(t){for(var e=this.optimizationState,n=e.head,r=e.tail,i=e.headEmbedding,s=e.tailEmbedding,o=e.epochsPerSample,a=e.epochOfNextSample,h=e.epochOfNextNegativeSample,u=e.epochsPerNegativeSample,l=e.moveOther,c=e.initialAlpha,f=e.alpha,d=e.gamma,m=e.a,g=e.b,v=e.dim,w=e.nEpochs,y=e.nVertices,b=4,M=0;M<o.length;M++)if(!(a[M]>t)){var S=n[M],A=r[M],k=i[S],C=s[A],E=x(k,C),P=0;E>0&&(P=-2*m*g*Math.pow(E,g-1),P/=m*Math.pow(E,g)+1);for(var N=0;N<v;N++){var R=_(P*(k[N]-C[N]),b);k[N]+=R*f,l&&(C[N]+=-R*f)}a[M]+=o[M];for(var D=Math.floor((t-h[M])/u[M]),I=0;I<D;I++){var T=p.tauRandInt(y,this.random),L=s[T],z=x(k,L),O=0;if(z>0)O=2*d*g,O/=(.001+z)*(m*Math.pow(z,g)+1);else if(S===T)continue;for(N=0;N<v;N++){R=4;O>0&&(R=_(O*(k[N]-L[N]),b)),k[N]+=R*f}}h[M]+=D*u[M]}return e.alpha=c*(1-t/w),e.currentEpoch+=1,i},t.prototype.optimizeLayoutAsync=function(t){var e=this;return void 0===t&&(t=function(){return!0}),new Promise((function(n,s){var o=function(){return r(e,void 0,void 0,(function(){var e,r,a,h,u,l;return i(this,(function(i){try{if(e=this.optimizationState,r=e.nEpochs,a=e.currentEpoch,this.embedding=this.optimizeLayoutStep(a),h=this.optimizationState.currentEpoch,u=!1===t(h),l=h===r,u||l)return[2,n(l)];setTimeout((function(){return o()}),0)}catch(c){s(c)}return[2]}))}))};setTimeout((function(){return o()}),0)}))},t.prototype.optimizeLayout=function(t){void 0===t&&(t=function(){return!0});var e=!1,n=[];while(!e){var r=this.optimizationState,i=r.nEpochs,s=r.currentEpoch;n=this.optimizeLayoutStep(s);var o=this.optimizationState.currentEpoch,a=!1===t(o);e=o===i||a}return n},t.prototype.getNEpochs=function(){var t=this.graph;if(this.nEpochs>0)return this.nEpochs;var e=t.nRows;return e<=2500?500:e<=5e3?400:e<=7500?300:200},t}();function w(t,e){for(var n=0,r=0;r<t.length;r++)n+=Math.pow(t[r]-e[r],2);return Math.sqrt(n)}function y(t,e){for(var n=0,r=0,i=0,s=0;s<t.length;s++)n+=t[s]*e[s],r+=Math.pow(t[s],2),i+=Math.pow(e[s],2);return 0===r&&0===i?0:0===r||0===i?1:1-n/Math.sqrt(r*i)}e.UMAP=v,e.euclidean=w,e.cosine=y;var b=function(){function t(){this.currentEpoch=0,this.headEmbedding=[],this.tailEmbedding=[],this.head=[],this.tail=[],this.epochsPerSample=[],this.epochOfNextSample=[],this.epochOfNextNegativeSample=[],this.epochsPerNegativeSample=[],this.moveOther=!0,this.initialAlpha=1,this.alpha=1,this.gamma=1,this.a=1.5769434603113077,this.b=.8950608779109733,this.dim=2,this.nEpochs=500,this.nVertices=0}return t}();function _(t,e){return t>e?e:t<-e?-e:t}function x(t,e){for(var n=0,r=0;r<t.length;r++)n+=Math.pow(t[r]-e[r],2);return n}function M(t,e){var n=function(t){var e=s(t,2),n=e[0],r=e[1];return function(t){return 1/(1+n*Math.pow(t,2*r))}},r=p.linear(0,3*t,300).map((function(t){return t<e?1:t})),i=p.zeros(r.length).map((function(n,i){var s=r[i]>=e;return s?Math.exp(-(r[i]-e)/t):n})),o=[.5,.5],a={x:r,y:i},h={damping:1.5,initialValues:o,gradientDifference:.1,maxIterations:100,errorTolerance:.01},u=d.default(a,n,h).parameterValues,l=s(u,2),c=l[0],f=l[1];return{a:c,b:f}}function S(t,e,n,r){return void 0===n&&(n=1),void 0===r&&(r=5),t.map((function(t,i,s){return-1===e[i]||-1===e[s]?t*Math.exp(-n):e[i]!==e[s]?t*Math.exp(-r):t}))}function A(t){t=l.normalize(t,"max");var e=l.transpose(t),n=l.pairwiseMultiply(e,t);return t=l.add(t,l.subtract(e,n)),l.eliminateZeros(t)}function k(t,e,n){for(var r=p.zeros(t.length).map((function(t){return p.zeros(n[0].length)})),i=0;i<t.length;i++)for(var s=0;s<t[0].length;s++)for(var o=0;o<n[0].length;o++){var a=t[i][s];r[i][o]+=e[i][s]*n[a][o]}return r}e.findABParams=M,e.fastIntersection=S,e.resetLocalConnectivity=A,e.initTransform=k},38186:function(t,e){var n=this&&this.__values||function(t){var e="function"===typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};function r(t,e){return Math.floor(e()*t)}function i(t){return t()}function s(t){var e,r,i=0;try{for(var s=n(t),o=s.next();!o.done;o=s.next()){var a=o.value;i+=Math.pow(a,2)}}catch(h){e={error:h}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return Math.sqrt(i)}function o(t){for(var e=[],n=0;n<t;n++)e.push(void 0);return e}function a(t){return o(t).map((function(t,e){return e}))}function h(t,e){return o(t).map((function(){return e}))}function u(t){return h(t,0)}function l(t){return h(t,1)}function c(t,e,n){return o(n).map((function(r,i){return t+i*((e-t)/(n-1))}))}function f(t){return t.reduce((function(t,e){return t+e}))}function p(t){return f(t)/t.length}function d(t){for(var e=0,n=0;n<t.length;n++)e=t[n]>e?t[n]:e;return e}function m(t){for(var e=0,n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)e=t[n][r]>e?t[n][r]:e;return e}function g(t,e,n){for(var i=u(t),s=0;s<t;s++){var o=!0;while(o){for(var a=r(e,n),h=!1,l=0;l<s;l++)if(a===i[l]){h=!0;break}h||(o=!1),i[s]=a}}return i}function v(t,e,n){var r=[],i=0;if(t.length!==e*n)throw new Error("Array dimensions must match input length.");for(var s=0;s<e;s++){for(var o=[],a=0;a<n;a++)o.push(t[i]),i+=1;r.push(o),1}return r}Object.defineProperty(e,"__esModule",{value:!0}),e.tauRandInt=r,e.tauRand=i,e.norm=s,e.empty=o,e.range=a,e.filled=h,e.zeros=u,e.ones=l,e.linear=c,e.sum=f,e.mean=p,e.max=d,e.max2d=m,e.rejectionSample=g,e.reshape2d=v},44124:function(t,e,n){var r=n(24475);t.exports=function(t,e){var n=r[t],i=n&&n.prototype;return i&&i[e]}},3470:function(t){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}},3717:function(t,e,n){var r=n(79504),i=2147483647,s=36,o=1,a=26,h=38,u=700,l=72,c=128,f="-",p=/[^\0-\u007E]/,d=/[.\u3002\uFF0E\uFF61]/g,m="Overflow: input needs wider integers to process",g=s-o,v=RangeError,w=r(d.exec),y=Math.floor,b=String.fromCharCode,_=r("".charCodeAt),x=r([].join),M=r([].push),S=r("".replace),A=r("".split),k=r("".toLowerCase),C=function(t){var e=[],n=0,r=t.length;while(n<r){var i=_(t,n++);if(i>=55296&&i<=56319&&n<r){var s=_(t,n++);56320===(64512&s)?M(e,((1023&i)<<10)+(1023&s)+65536):(M(e,i),n--)}else M(e,i)}return e},E=function(t){return t+22+75*(t<26)},P=function(t,e,n){var r=0;t=n?y(t/u):t>>1,t+=y(t/e);while(t>g*a>>1)t=y(t/g),r+=s;return y(r+(g+1)*t/(t+h))},N=function(t){var e=[];t=C(t);var n,r,h=t.length,u=c,p=0,d=l;for(n=0;n<t.length;n++)r=t[n],r<128&&M(e,b(r));var g=e.length,w=g;g&&M(e,f);while(w<h){var _=i;for(n=0;n<t.length;n++)r=t[n],r>=u&&r<_&&(_=r);var S=w+1;if(_-u>y((i-p)/S))throw new v(m);for(p+=(_-u)*S,u=_,n=0;n<t.length;n++){if(r=t[n],r<u&&++p>i)throw new v(m);if(r===u){var A=p,k=s;while(1){var N=k<=d?o:k>=d+a?a:k-d;if(A<N)break;var R=A-N,D=s-N;M(e,b(E(N+R%D))),A=y(R/D),k+=s}M(e,b(E(A))),d=P(p,S,w===g),p=0,w++}}p++,u++}return x(e,"")};t.exports=function(t){var e,n,r=[],i=A(S(k(t),d,"."),".");for(e=0;e<i.length;e++)n=i[e],M(r,w(p,n)?"xn--"+N(n):n);return x(r,".")}},67416:function(t,e,n){var r=n(79039),i=n(78227),s=n(43724),o=n(96395),a=i("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),r="";return t.pathname="c%20d",e.forEach((function(t,n){e["delete"]("b"),r+=n+t})),n["delete"]("a",2),n["delete"]("b",void 0),o&&(!t.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b"))||!e.size&&(o||!s)||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},57145:function(t,e,n){var r=n(46518),i=n(79504),s=n(79306),o=n(25397),a=n(35370),h=n(44124),u=n(6469),l=Array,c=i(h("Array","sort"));r({target:"Array",proto:!0},{toSorted:function(t){void 0!==t&&s(t);var e=o(this),n=a(l,e);return c(n,t)}}),u("toSorted")},5746:function(t,e,n){var r=n(69565),i=n(89228),s=n(28551),o=n(64117),a=n(67750),h=n(3470),u=n(655),l=n(55966),c=n(56682);i("search",(function(t,e,n){return[function(e){var n=a(this),i=o(e)?void 0:l(e,t);return i?r(i,e,n):new RegExp(e)[t](u(n))},function(t){var r=s(this),i=u(t),o=n(e,r,i);if(o.done)return o.value;var a=r.lastIndex;h(a,0)||(r.lastIndex=0);var l=c(r,i);return h(r.lastIndex,a)||(r.lastIndex=a),null===l?-1:l.index}]}))},98406:function(t,e,n){n(23792);var r=n(46518),i=n(24475),s=n(93389),o=n(69565),a=n(79504),h=n(43724),u=n(67416),l=n(36840),c=n(62106),f=n(56279),p=n(10687),d=n(33994),m=n(91181),g=n(90679),v=n(94901),w=n(39297),y=n(76080),b=n(36955),_=n(28551),x=n(20034),M=n(655),S=n(2360),A=n(6980),k=n(70081),C=n(50851),E=n(62529),P=n(22812),N=n(78227),R=n(74488),D=N("iterator"),I="URLSearchParams",T=I+"Iterator",L=m.set,z=m.getterFor(I),O=m.getterFor(T),$=s("fetch"),F=s("Request"),V=s("Headers"),U=F&&F.prototype,q=V&&V.prototype,H=i.RegExp,B=i.TypeError,j=i.decodeURIComponent,W=i.encodeURIComponent,X=a("".charAt),Q=a([].join),G=a([].push),Y=a("".replace),K=a([].shift),J=a([].splice),Z=a("".split),tt=a("".slice),et=/\+/g,nt=Array(4),rt=function(t){return nt[t-1]||(nt[t-1]=H("((?:%[\\da-f]{2}){"+t+"})","gi"))},it=function(t){try{return j(t)}catch(e){return t}},st=function(t){var e=Y(t,et," "),n=4;try{return j(e)}catch(r){while(n)e=Y(e,rt(n--),it);return e}},ot=/[!'()~]|%20/g,at={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ht=function(t){return at[t]},ut=function(t){return Y(W(t),ot,ht)},lt=d((function(t,e){L(this,{type:T,target:z(t).entries,index:0,kind:e})}),I,(function(){var t=O(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=void 0,E(void 0,!0);var r=e[n];switch(t.kind){case"keys":return E(r.key,!1);case"values":return E(r.value,!1)}return E([r.key,r.value],!1)}),!0),ct=function(t){this.entries=[],this.url=null,void 0!==t&&(x(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===X(t,0)?tt(t,1):t:M(t)))};ct.prototype={type:I,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,n,r,i,s,a,h,u=this.entries,l=C(t);if(l){e=k(t,l),n=e.next;while(!(r=o(n,e)).done){if(i=k(_(r.value)),s=i.next,(a=o(s,i)).done||(h=o(s,i)).done||!o(s,i).done)throw new B("Expected sequence with length 2");G(u,{key:M(a.value),value:M(h.value)})}}else for(var c in t)w(t,c)&&G(u,{key:c,value:M(t[c])})},parseQuery:function(t){if(t){var e,n,r=this.entries,i=Z(t,"&"),s=0;while(s<i.length)e=i[s++],e.length&&(n=Z(e,"="),G(r,{key:st(K(n)),value:st(Q(n,"="))}))}},serialize:function(){var t,e=this.entries,n=[],r=0;while(r<e.length)t=e[r++],G(n,ut(t.key)+"="+ut(t.value));return Q(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ft=function(){g(this,pt);var t=arguments.length>0?arguments[0]:void 0,e=L(this,new ct(t));h||(this.size=e.entries.length)},pt=ft.prototype;if(f(pt,{append:function(t,e){var n=z(this);P(arguments.length,2),G(n.entries,{key:M(t),value:M(e)}),h||this.length++,n.updateURL()},delete:function(t){var e=z(this),n=P(arguments.length,1),r=e.entries,i=M(t),s=n<2?void 0:arguments[1],o=void 0===s?s:M(s),a=0;while(a<r.length){var u=r[a];if(u.key!==i||void 0!==o&&u.value!==o)a++;else if(J(r,a,1),void 0!==o)break}h||(this.size=r.length),e.updateURL()},get:function(t){var e=z(this).entries;P(arguments.length,1);for(var n=M(t),r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){var e=z(this).entries;P(arguments.length,1);for(var n=M(t),r=[],i=0;i<e.length;i++)e[i].key===n&&G(r,e[i].value);return r},has:function(t){var e=z(this).entries,n=P(arguments.length,1),r=M(t),i=n<2?void 0:arguments[1],s=void 0===i?i:M(i),o=0;while(o<e.length){var a=e[o++];if(a.key===r&&(void 0===s||a.value===s))return!0}return!1},set:function(t,e){var n=z(this);P(arguments.length,1);for(var r,i=n.entries,s=!1,o=M(t),a=M(e),u=0;u<i.length;u++)r=i[u],r.key===o&&(s?J(i,u--,1):(s=!0,r.value=a));s||G(i,{key:o,value:a}),h||(this.size=i.length),n.updateURL()},sort:function(){var t=z(this);R(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){var e,n=z(this).entries,r=y(t,arguments.length>1?arguments[1]:void 0),i=0;while(i<n.length)e=n[i++],r(e.value,e.key,this)},keys:function(){return new lt(this,"keys")},values:function(){return new lt(this,"values")},entries:function(){return new lt(this,"entries")}},{enumerable:!0}),l(pt,D,pt.entries,{name:"entries"}),l(pt,"toString",(function(){return z(this).serialize()}),{enumerable:!0}),h&&c(pt,"size",{get:function(){return z(this).entries.length},configurable:!0,enumerable:!0}),p(ft,I),r({global:!0,constructor:!0,forced:!u},{URLSearchParams:ft}),!u&&v(V)){var dt=a(q.has),mt=a(q.set),gt=function(t){if(x(t)){var e,n=t.body;if(b(n)===I)return e=t.headers?new V(t.headers):new V,dt(e,"content-type")||mt(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),S(t,{body:A(0,M(n)),headers:A(0,e)})}return t};if(v($)&&r({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return $(t,arguments.length>1?gt(arguments[1]):{})}}),v(F)){var vt=function(t){return g(this,U),new F(t,arguments.length>1?gt(arguments[1]):{})};U.constructor=vt,vt.prototype=U,r({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:vt})}}t.exports={URLSearchParams:ft,getState:z}},14603:function(t,e,n){var r=n(36840),i=n(79504),s=n(655),o=n(22812),a=URLSearchParams,h=a.prototype,u=i(h.append),l=i(h["delete"]),c=i(h.forEach),f=i([].push),p=new a("a=1&a=2&b=3");p["delete"]("a",1),p["delete"]("b",void 0),p+""!=="a=2"&&r(h,"delete",(function(t){var e=arguments.length,n=e<2?void 0:arguments[1];if(e&&void 0===n)return l(this,t);var r=[];c(this,(function(t,e){f(r,{key:e,value:t})})),o(e,1);var i,a=s(t),h=s(n),p=0,d=0,m=!1,g=r.length;while(p<g)i=r[p++],m||i.key===a?(m=!0,l(this,i.key)):d++;while(d<g)i=r[d++],i.key===a&&i.value===h||u(this,i.key,i.value)}),{enumerable:!0,unsafe:!0})},47566:function(t,e,n){var r=n(36840),i=n(79504),s=n(655),o=n(22812),a=URLSearchParams,h=a.prototype,u=i(h.getAll),l=i(h.has),c=new a("a=1");!c.has("a",2)&&c.has("a",void 0)||r(h,"has",(function(t){var e=arguments.length,n=e<2?void 0:arguments[1];if(e&&void 0===n)return l(this,t);var r=u(this,t);o(e,1);var i=s(n),a=0;while(a<r.length)if(r[a++]===i)return!0;return!1}),{enumerable:!0,unsafe:!0})},48408:function(t,e,n){n(98406)},98721:function(t,e,n){var r=n(43724),i=n(79504),s=n(62106),o=URLSearchParams.prototype,a=i(o.forEach);r&&!("size"in o)&&s(o,"size",{get:function(){var t=0;return a(this,(function(){t++})),t},configurable:!0,enumerable:!0})},45806:function(t,e,n){n(47764);var r,i=n(46518),s=n(43724),o=n(67416),a=n(24475),h=n(76080),u=n(79504),l=n(36840),c=n(62106),f=n(90679),p=n(39297),d=n(44213),m=n(97916),g=n(67680),v=n(68183).codeAt,w=n(3717),y=n(655),b=n(10687),_=n(22812),x=n(98406),M=n(91181),S=M.set,A=M.getterFor("URL"),k=x.URLSearchParams,C=x.getState,E=a.URL,P=a.TypeError,N=a.parseInt,R=Math.floor,D=Math.pow,I=u("".charAt),T=u(/./.exec),L=u([].join),z=u(1..toString),O=u([].pop),$=u([].push),F=u("".replace),V=u([].shift),U=u("".split),q=u("".slice),H=u("".toLowerCase),B=u([].unshift),j="Invalid authority",W="Invalid scheme",X="Invalid host",Q="Invalid port",G=/[a-z]/i,Y=/[\d+-.a-z]/i,K=/\d/,J=/^0x/i,Z=/^[0-7]+$/,tt=/^\d+$/,et=/^[\da-f]+$/i,nt=/[\0\t\n\r #%/:<>?@[\\\]^|]/,rt=/[\0\t\n\r #/:<>?@[\\\]^|]/,it=/^[\u0000-\u0020]+/,st=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ot=/[\t\n\r]/g,at=function(t){var e,n,r,i,s,o,a,h=U(t,".");if(h.length&&""===h[h.length-1]&&h.length--,e=h.length,e>4)return t;for(n=[],r=0;r<e;r++){if(i=h[r],""===i)return t;if(s=10,i.length>1&&"0"===I(i,0)&&(s=T(J,i)?16:8,i=q(i,8===s?1:2)),""===i)o=0;else{if(!T(10===s?tt:8===s?Z:et,i))return t;o=N(i,s)}$(n,o)}for(r=0;r<e;r++)if(o=n[r],r===e-1){if(o>=D(256,5-e))return null}else if(o>255)return null;for(a=O(n),r=0;r<n.length;r++)a+=n[r]*D(256,3-r);return a},ht=function(t){var e,n,r,i,s,o,a,h=[0,0,0,0,0,0,0,0],u=0,l=null,c=0,f=function(){return I(t,c)};if(":"===f()){if(":"!==I(t,1))return;c+=2,u++,l=u}while(f()){if(8===u)return;if(":"!==f()){e=n=0;while(n<4&&T(et,f()))e=16*e+N(f(),16),c++,n++;if("."===f()){if(0===n)return;if(c-=n,u>6)return;r=0;while(f()){if(i=null,r>0){if(!("."===f()&&r<4))return;c++}if(!T(K,f()))return;while(T(K,f())){if(s=N(f(),10),null===i)i=s;else{if(0===i)return;i=10*i+s}if(i>255)return;c++}h[u]=256*h[u]+i,r++,2!==r&&4!==r||u++}if(4!==r)return;break}if(":"===f()){if(c++,!f())return}else if(f())return;h[u++]=e}else{if(null!==l)return;c++,u++,l=u}}if(null!==l){o=u-l,u=7;while(0!==u&&o>0)a=h[u],h[u--]=h[l+o-1],h[l+--o]=a}else if(8!==u)return;return h},ut=function(t){for(var e=null,n=1,r=null,i=0,s=0;s<8;s++)0!==t[s]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=s),++i);return i>n&&(e=r,n=i),e},lt=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)B(e,t%256),t=R(t/256);return L(e,".")}if("object"==typeof t){for(e="",r=ut(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=z(t[n],16),n<7&&(e+=":")));return"["+e+"]"}return t},ct={},ft=d({},ct,{" ":1,'"':1,"<":1,">":1,"`":1}),pt=d({},ft,{"#":1,"?":1,"{":1,"}":1}),dt=d({},pt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),mt=function(t,e){var n=v(t,0);return n>32&&n<127&&!p(e,t)?t:encodeURIComponent(t)},gt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},vt=function(t,e){var n;return 2===t.length&&T(G,I(t,0))&&(":"===(n=I(t,1))||!e&&"|"===n)},wt=function(t){var e;return t.length>1&&vt(q(t,0,2))&&(2===t.length||"/"===(e=I(t,2))||"\\"===e||"?"===e||"#"===e)},yt=function(t){return"."===t||"%2e"===H(t)},bt=function(t){return t=H(t),".."===t||"%2e."===t||".%2e"===t||"%2e%2e"===t},_t={},xt={},Mt={},St={},At={},kt={},Ct={},Et={},Pt={},Nt={},Rt={},Dt={},It={},Tt={},Lt={},zt={},Ot={},$t={},Ft={},Vt={},Ut={},qt=function(t,e,n){var r,i,s,o=y(t);if(e){if(i=this.parse(o),i)throw new P(i);this.searchParams=null}else{if(void 0!==n&&(r=new qt(n,!0)),i=this.parse(o,null,r),i)throw new P(i);s=C(new k),s.bindURL(this),this.searchParams=s}};qt.prototype={type:"URL",parse:function(t,e,n){var i,s,o,a,h=this,u=e||_t,l=0,c="",f=!1,d=!1,v=!1;t=y(t),e||(h.scheme="",h.username="",h.password="",h.host=null,h.port=null,h.path=[],h.query=null,h.fragment=null,h.cannotBeABaseURL=!1,t=F(t,it,""),t=F(t,st,"$1")),t=F(t,ot,""),i=m(t);while(l<=i.length){switch(s=i[l],u){case _t:if(!s||!T(G,s)){if(e)return W;u=Mt;continue}c+=H(s),u=xt;break;case xt:if(s&&(T(Y,s)||"+"===s||"-"===s||"."===s))c+=H(s);else{if(":"!==s){if(e)return W;c="",u=Mt,l=0;continue}if(e&&(h.isSpecial()!==p(gt,c)||"file"===c&&(h.includesCredentials()||null!==h.port)||"file"===h.scheme&&!h.host))return;if(h.scheme=c,e)return void(h.isSpecial()&&gt[h.scheme]===h.port&&(h.port=null));c="","file"===h.scheme?u=Tt:h.isSpecial()&&n&&n.scheme===h.scheme?u=St:h.isSpecial()?u=Et:"/"===i[l+1]?(u=At,l++):(h.cannotBeABaseURL=!0,$(h.path,""),u=Ft)}break;case Mt:if(!n||n.cannotBeABaseURL&&"#"!==s)return W;if(n.cannotBeABaseURL&&"#"===s){h.scheme=n.scheme,h.path=g(n.path),h.query=n.query,h.fragment="",h.cannotBeABaseURL=!0,u=Ut;break}u="file"===n.scheme?Tt:kt;continue;case St:if("/"!==s||"/"!==i[l+1]){u=kt;continue}u=Pt,l++;break;case At:if("/"===s){u=Nt;break}u=$t;continue;case kt:if(h.scheme=n.scheme,s===r)h.username=n.username,h.password=n.password,h.host=n.host,h.port=n.port,h.path=g(n.path),h.query=n.query;else if("/"===s||"\\"===s&&h.isSpecial())u=Ct;else if("?"===s)h.username=n.username,h.password=n.password,h.host=n.host,h.port=n.port,h.path=g(n.path),h.query="",u=Vt;else{if("#"!==s){h.username=n.username,h.password=n.password,h.host=n.host,h.port=n.port,h.path=g(n.path),h.path.length--,u=$t;continue}h.username=n.username,h.password=n.password,h.host=n.host,h.port=n.port,h.path=g(n.path),h.query=n.query,h.fragment="",u=Ut}break;case Ct:if(!h.isSpecial()||"/"!==s&&"\\"!==s){if("/"!==s){h.username=n.username,h.password=n.password,h.host=n.host,h.port=n.port,u=$t;continue}u=Nt}else u=Pt;break;case Et:if(u=Pt,"/"!==s||"/"!==I(c,l+1))continue;l++;break;case Pt:if("/"!==s&&"\\"!==s){u=Nt;continue}break;case Nt:if("@"===s){f&&(c="%40"+c),f=!0,o=m(c);for(var w=0;w<o.length;w++){var b=o[w];if(":"!==b||v){var _=mt(b,dt);v?h.password+=_:h.username+=_}else v=!0}c=""}else if(s===r||"/"===s||"?"===s||"#"===s||"\\"===s&&h.isSpecial()){if(f&&""===c)return j;l-=m(c).length+1,c="",u=Rt}else c+=s;break;case Rt:case Dt:if(e&&"file"===h.scheme){u=zt;continue}if(":"!==s||d){if(s===r||"/"===s||"?"===s||"#"===s||"\\"===s&&h.isSpecial()){if(h.isSpecial()&&""===c)return X;if(e&&""===c&&(h.includesCredentials()||null!==h.port))return;if(a=h.parseHost(c),a)return a;if(c="",u=Ot,e)return;continue}"["===s?d=!0:"]"===s&&(d=!1),c+=s}else{if(""===c)return X;if(a=h.parseHost(c),a)return a;if(c="",u=It,e===Dt)return}break;case It:if(!T(K,s)){if(s===r||"/"===s||"?"===s||"#"===s||"\\"===s&&h.isSpecial()||e){if(""!==c){var x=N(c,10);if(x>65535)return Q;h.port=h.isSpecial()&&x===gt[h.scheme]?null:x,c=""}if(e)return;u=Ot;continue}return Q}c+=s;break;case Tt:if(h.scheme="file","/"===s||"\\"===s)u=Lt;else{if(!n||"file"!==n.scheme){u=$t;continue}switch(s){case r:h.host=n.host,h.path=g(n.path),h.query=n.query;break;case"?":h.host=n.host,h.path=g(n.path),h.query="",u=Vt;break;case"#":h.host=n.host,h.path=g(n.path),h.query=n.query,h.fragment="",u=Ut;break;default:wt(L(g(i,l),""))||(h.host=n.host,h.path=g(n.path),h.shortenPath()),u=$t;continue}}break;case Lt:if("/"===s||"\\"===s){u=zt;break}n&&"file"===n.scheme&&!wt(L(g(i,l),""))&&(vt(n.path[0],!0)?$(h.path,n.path[0]):h.host=n.host),u=$t;continue;case zt:if(s===r||"/"===s||"\\"===s||"?"===s||"#"===s){if(!e&&vt(c))u=$t;else if(""===c){if(h.host="",e)return;u=Ot}else{if(a=h.parseHost(c),a)return a;if("localhost"===h.host&&(h.host=""),e)return;c="",u=Ot}continue}c+=s;break;case Ot:if(h.isSpecial()){if(u=$t,"/"!==s&&"\\"!==s)continue}else if(e||"?"!==s)if(e||"#"!==s){if(s!==r&&(u=$t,"/"!==s))continue}else h.fragment="",u=Ut;else h.query="",u=Vt;break;case $t:if(s===r||"/"===s||"\\"===s&&h.isSpecial()||!e&&("?"===s||"#"===s)){if(bt(c)?(h.shortenPath(),"/"===s||"\\"===s&&h.isSpecial()||$(h.path,"")):yt(c)?"/"===s||"\\"===s&&h.isSpecial()||$(h.path,""):("file"===h.scheme&&!h.path.length&&vt(c)&&(h.host&&(h.host=""),c=I(c,0)+":"),$(h.path,c)),c="","file"===h.scheme&&(s===r||"?"===s||"#"===s))while(h.path.length>1&&""===h.path[0])V(h.path);"?"===s?(h.query="",u=Vt):"#"===s&&(h.fragment="",u=Ut)}else c+=mt(s,pt);break;case Ft:"?"===s?(h.query="",u=Vt):"#"===s?(h.fragment="",u=Ut):s!==r&&(h.path[0]+=mt(s,ct));break;case Vt:e||"#"!==s?s!==r&&("'"===s&&h.isSpecial()?h.query+="%27":h.query+="#"===s?"%23":mt(s,ct)):(h.fragment="",u=Ut);break;case Ut:s!==r&&(h.fragment+=mt(s,ft));break}l++}},parseHost:function(t){var e,n,r;if("["===I(t,0)){if("]"!==I(t,t.length-1))return X;if(e=ht(q(t,1,-1)),!e)return X;this.host=e}else if(this.isSpecial()){if(t=w(t),T(nt,t))return X;if(e=at(t),null===e)return X;this.host=e}else{if(T(rt,t))return X;for(e="",n=m(t),r=0;r<n.length;r++)e+=mt(n[r],ct);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return p(gt,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"===this.scheme&&1===e&&vt(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,n=t.username,r=t.password,i=t.host,s=t.port,o=t.path,a=t.query,h=t.fragment,u=e+":";return null!==i?(u+="//",t.includesCredentials()&&(u+=n+(r?":"+r:"")+"@"),u+=lt(i),null!==s&&(u+=":"+s)):"file"===e&&(u+="//"),u+=t.cannotBeABaseURL?o[0]:o.length?"/"+L(o,"/"):"",null!==a&&(u+="?"+a),null!==h&&(u+="#"+h),u},setHref:function(t){var e=this.parse(t);if(e)throw new P(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"===t)try{return new Ht(t.path[0]).origin}catch(n){return"null"}return"file"!==t&&this.isSpecial()?t+"://"+lt(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(y(t)+":",_t)},getUsername:function(){return this.username},setUsername:function(t){var e=m(y(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<e.length;n++)this.username+=mt(e[n],dt)}},getPassword:function(){return this.password},setPassword:function(t){var e=m(y(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<e.length;n++)this.password+=mt(e[n],dt)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?lt(t):lt(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,Rt)},getHostname:function(){var t=this.host;return null===t?"":lt(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,Dt)},getPort:function(){var t=this.port;return null===t?"":y(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(t=y(t),""===t?this.port=null:this.parse(t,It))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+L(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Ot))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){t=y(t),""===t?this.query=null:("?"===I(t,0)&&(t=q(t,1)),this.query="",this.parse(t,Vt)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){t=y(t),""!==t?("#"===I(t,0)&&(t=q(t,1)),this.fragment="",this.parse(t,Ut)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Ht=function(t){var e=f(this,Bt),n=_(arguments.length,1)>1?arguments[1]:void 0,r=S(e,new qt(t,!1,n));s||(e.href=r.serialize(),e.origin=r.getOrigin(),e.protocol=r.getProtocol(),e.username=r.getUsername(),e.password=r.getPassword(),e.host=r.getHost(),e.hostname=r.getHostname(),e.port=r.getPort(),e.pathname=r.getPathname(),e.search=r.getSearch(),e.searchParams=r.getSearchParams(),e.hash=r.getHash())},Bt=Ht.prototype,jt=function(t,e){return{get:function(){return A(this)[t]()},set:e&&function(t){return A(this)[e](t)},configurable:!0,enumerable:!0}};if(s&&(c(Bt,"href",jt("serialize","setHref")),c(Bt,"origin",jt("getOrigin")),c(Bt,"protocol",jt("getProtocol","setProtocol")),c(Bt,"username",jt("getUsername","setUsername")),c(Bt,"password",jt("getPassword","setPassword")),c(Bt,"host",jt("getHost","setHost")),c(Bt,"hostname",jt("getHostname","setHostname")),c(Bt,"port",jt("getPort","setPort")),c(Bt,"pathname",jt("getPathname","setPathname")),c(Bt,"search",jt("getSearch","setSearch")),c(Bt,"searchParams",jt("getSearchParams")),c(Bt,"hash",jt("getHash","setHash"))),l(Bt,"toJSON",(function(){return A(this).serialize()}),{enumerable:!0}),l(Bt,"toString",(function(){return A(this).serialize()}),{enumerable:!0}),E){var Wt=E.createObjectURL,Xt=E.revokeObjectURL;Wt&&l(Ht,"createObjectURL",h(Wt,E)),Xt&&l(Ht,"revokeObjectURL",h(Xt,E))}b(Ht,"URL"),i({global:!0,constructor:!0,forced:!o,sham:!s},{URL:Ht})},3296:function(t,e,n){n(45806)},27208:function(t,e,n){var r=n(46518),i=n(69565);r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return i(URL.prototype.toString,this)}})},17982:function(t,e,n){function r(){}function i(t){return null==t?r:function(){return this.querySelector(t)}}function s(t){"function"!==typeof t&&(t=i(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o,a,h=e[s],u=h.length,l=r[s]=new Array(u),c=0;c<u;++c)(o=h[c])&&(a=t.call(o,o.__data__,c,h))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new Zt(r,this._parents)}function o(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function a(){return[]}function h(t){return null==t?a:function(){return this.querySelectorAll(t)}}function u(t){return function(){return o(t.apply(this,arguments))}}function l(t){t="function"===typeof t?u(t):h(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o,a=e[s],l=a.length,c=0;c<l;++c)(o=a[c])&&(r.push(t.call(o,o.__data__,c,a)),i.push(o));return new Zt(r,i)}function c(t){return function(){return this.matches(t)}}function f(t){return function(e){return e.matches(t)}}n.d(e,{qrM:function(){return Fi},n8j:function(){return zi},Ltv:function(){return bi}});var p=Array.prototype.find;function d(t){return function(){return p.call(this.children,t)}}function m(){return this.firstElementChild}function g(t){return this.select(null==t?m:d("function"===typeof t?t:f(t)))}var v=Array.prototype.filter;function w(){return Array.from(this.children)}function y(t){return function(){return v.call(this.children,t)}}function b(t){return this.selectAll(null==t?w:y("function"===typeof t?t:f(t)))}function _(t){"function"!==typeof t&&(t=c(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,h=r[i]=[],u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&h.push(s);return new Zt(r,this._parents)}function x(t){return new Array(t.length)}function M(){return new Zt(this._enter||this._groups.map(x),this._parents)}function S(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function A(t){return function(){return t}}function k(t,e,n,r,i,s){for(var o,a=0,h=e.length,u=s.length;a<u;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new S(t,s[a]);for(;a<h;++a)(o=e[a])&&(i[a]=o)}function C(t,e,n,r,i,s,o){var a,h,u,l=new Map,c=e.length,f=s.length,p=new Array(c);for(a=0;a<c;++a)(h=e[a])&&(p[a]=u=o.call(h,h.__data__,a,e)+"",l.has(u)?i[a]=h:l.set(u,h));for(a=0;a<f;++a)u=o.call(t,s[a],a,s)+"",(h=l.get(u))?(r[a]=h,h.__data__=s[a],l.delete(u)):n[a]=new S(t,s[a]);for(a=0;a<c;++a)(h=e[a])&&l.get(p[a])===h&&(i[a]=h)}function E(t){return t.__data__}function P(t,e){if(!arguments.length)return Array.from(this,E);var n=e?C:k,r=this._parents,i=this._groups;"function"!==typeof t&&(t=A(t));for(var s=i.length,o=new Array(s),a=new Array(s),h=new Array(s),u=0;u<s;++u){var l=r[u],c=i[u],f=c.length,p=N(t.call(l,l&&l.__data__,u,r)),d=p.length,m=a[u]=new Array(d),g=o[u]=new Array(d),v=h[u]=new Array(f);n(l,c,m,g,v,p,e);for(var w,y,b=0,_=0;b<d;++b)if(w=m[b]){b>=_&&(_=b+1);while(!(y=g[_])&&++_<d);w._next=y||null}}return o=new Zt(o,r),o._enter=a,o._exit=h,o}function N(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function R(){return new Zt(this._exit||this._groups.map(x),this._parents)}function D(t,e,n){var r=this.enter(),i=this,s=this.exit();return"function"===typeof t?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),null!=e&&(i=e(i),i&&(i=i.selection())),null==n?s.remove():n(s),r&&i?r.merge(i).order():i}function I(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),h=0;h<o;++h)for(var u,l=n[h],c=r[h],f=l.length,p=a[h]=new Array(f),d=0;d<f;++d)(u=l[d]||c[d])&&(p[d]=u);for(;h<i;++h)a[h]=n[h];return new Zt(a,this._parents)}function T(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],s=i.length-1,o=i[s];--s>=0;)(r=i[s])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this}function L(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=z);for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o,a=n[s],h=a.length,u=i[s]=new Array(h),l=0;l<h;++l)(o=a[l])&&(u[l]=o);u.sort(e)}return new Zt(i,this._parents).order()}function z(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function O(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function $(){return Array.from(this)}function F(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function V(){let t=0;for(const e of this)++t;return t}function U(){return!this.node()}function q(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,s=e[n],o=0,a=s.length;o<a;++o)(i=s[o])&&t.call(i,i.__data__,o,s);return this}S.prototype={constructor:S,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var H="http://www.w3.org/1999/xhtml",B={svg:"http://www.w3.org/2000/svg",xhtml:H,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function j(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),B.hasOwnProperty(e)?{space:B[e],local:t}:t}function W(t){return function(){this.removeAttribute(t)}}function X(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Q(t,e){return function(){this.setAttribute(t,e)}}function G(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Y(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function K(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function J(t,e){var n=j(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?X:W:"function"===typeof e?n.local?K:Y:n.local?G:Q)(n,e))}function Z(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function tt(t){return function(){this.style.removeProperty(t)}}function et(t,e,n){return function(){this.style.setProperty(t,e,n)}}function nt(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function rt(t,e,n){return arguments.length>1?this.each((null==e?tt:"function"===typeof e?nt:et)(t,e,null==n?"":n)):it(this.node(),t)}function it(t,e){return t.style.getPropertyValue(e)||Z(t).getComputedStyle(t,null).getPropertyValue(e)}function st(t){return function(){delete this[t]}}function ot(t,e){return function(){this[t]=e}}function at(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function ht(t,e){return arguments.length>1?this.each((null==e?st:"function"===typeof e?at:ot)(t,e)):this.node()[t]}function ut(t){return t.trim().split(/^|\s+/)}function lt(t){return t.classList||new ct(t)}function ct(t){this._node=t,this._names=ut(t.getAttribute("class")||"")}function ft(t,e){var n=lt(t),r=-1,i=e.length;while(++r<i)n.add(e[r])}function pt(t,e){var n=lt(t),r=-1,i=e.length;while(++r<i)n.remove(e[r])}function dt(t){return function(){ft(this,t)}}function mt(t){return function(){pt(this,t)}}function gt(t,e){return function(){(e.apply(this,arguments)?ft:pt)(this,t)}}function vt(t,e){var n=ut(t+"");if(arguments.length<2){var r=lt(this.node()),i=-1,s=n.length;while(++i<s)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof e?gt:e?dt:mt)(n,e))}function wt(){this.textContent=""}function yt(t){return function(){this.textContent=t}}function bt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function _t(t){return arguments.length?this.each(null==t?wt:("function"===typeof t?bt:yt)(t)):this.node().textContent}function xt(){this.innerHTML=""}function Mt(t){return function(){this.innerHTML=t}}function St(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function At(t){return arguments.length?this.each(null==t?xt:("function"===typeof t?St:Mt)(t)):this.node().innerHTML}function kt(){this.nextSibling&&this.parentNode.appendChild(this)}function Ct(){return this.each(kt)}function Et(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Pt(){return this.each(Et)}function Nt(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===H&&e.documentElement.namespaceURI===H?e.createElement(t):e.createElementNS(n,t)}}function Rt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Dt(t){var e=j(t);return(e.local?Rt:Nt)(e)}function It(t){var e="function"===typeof t?t:Dt(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function Tt(){return null}function Lt(t,e){var n="function"===typeof t?t:Dt(t),r=null==e?Tt:"function"===typeof e?e:i(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))}function zt(){var t=this.parentNode;t&&t.removeChild(this)}function Ot(){return this.each(zt)}function $t(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ft(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Vt(t){return this.select(t?Ft:$t)}function Ut(t){return arguments.length?this.property("__data__",t):this.node().__data__}function qt(t){return function(e){t.call(this,e,this.__data__)}}function Ht(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Bt(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,s=e.length;r<s;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function jt(t,e,n){return function(){var r,i=this.__on,s=qt(e);if(i)for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),void(r.value=e);this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r]}}function Wt(t,e,n){var r,i,s=Ht(t+""),o=s.length;if(!(arguments.length<2)){for(a=e?jt:Bt,r=0;r<o;++r)this.each(a(s[r],e,n));return this}var a=this.node().__on;if(a)for(var h,u=0,l=a.length;u<l;++u)for(r=0,h=a[u];r<o;++r)if((i=s[r]).type===h.type&&i.name===h.name)return h.value}function Xt(t,e,n){var r=Z(t),i=r.CustomEvent;"function"===typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Qt(t,e){return function(){return Xt(this,t,e)}}function Gt(t,e){return function(){return Xt(this,t,e.apply(this,arguments))}}function Yt(t,e){return this.each(("function"===typeof e?Gt:Qt)(t,e))}function*Kt(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],s=0,o=i.length;s<o;++s)(r=i[s])&&(yield r)}ct.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Jt=[null];function Zt(t,e){this._groups=t,this._parents=e}function te(){return new Zt([[document.documentElement]],Jt)}function ee(){return this}Zt.prototype=te.prototype={constructor:Zt,select:s,selectAll:l,selectChild:g,selectChildren:b,filter:_,data:P,enter:M,exit:R,join:D,merge:I,selection:ee,order:T,sort:L,call:O,nodes:$,node:F,size:V,empty:U,each:q,attr:J,style:rt,property:ht,classed:vt,text:_t,html:At,raise:Ct,lower:Pt,append:It,insert:Lt,remove:Ot,clone:Vt,datum:Ut,on:Wt,dispatch:Yt,[Symbol.iterator]:Kt};var ne=te,re={value:()=>{}};function ie(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new se(r)}function se(t){this._=t}function oe(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function ae(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function he(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=re,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}se.prototype=ie.prototype={constructor:se,on:function(t,e){var n,r=this._,i=oe(t+"",r),s=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);while(++s<o)if(n=(t=i[s]).type)r[n]=he(r[n],t.name,e);else if(null==e)for(n in r)r[n]=he(r[n],t.name,null);return this}while(++s<o)if((n=(t=i[s]).type)&&(n=ae(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new se(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),s=0;s<n;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],s=0,n=r.length;s<n;++s)r[s].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};var ue,le,ce=ie,fe=0,pe=0,de=0,me=1e3,ge=0,ve=0,we=0,ye="object"===typeof performance&&performance.now?performance:Date,be="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function _e(){return ve||(be(xe),ve=ye.now()+we)}function xe(){ve=0}function Me(){this._call=this._time=this._next=null}function Se(t,e,n){var r=new Me;return r.restart(t,e,n),r}function Ae(){_e(),++fe;var t,e=ue;while(e)(t=ve-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fe}function ke(){ve=(ge=ye.now())+we,fe=pe=0;try{Ae()}finally{fe=0,Ee(),ve=0}}function Ce(){var t=ye.now(),e=t-ge;e>me&&(we-=e,ge=t)}function Ee(){var t,e,n=ue,r=1/0;while(n)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ue=e);le=t,Pe(r)}function Pe(t){if(!fe){pe&&(pe=clearTimeout(pe));var e=t-ve;e>24?(t<1/0&&(pe=setTimeout(ke,t-ye.now()-we)),de&&(de=clearInterval(de))):(de||(ge=ye.now(),de=setInterval(Ce,me)),fe=1,be(ke))}}function Ne(t,e,n){var r=new Me;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}Me.prototype=Se.prototype={constructor:Me,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?_e():+n)+(null==e?0:+e),this._next||le===this||(le?le._next=this:ue=this,le=this),this._call=t,this._time=n,Pe()},stop:function(){this._call&&(this._call=null,this._time=1/0,Pe())}};var Re=ce("start","end","cancel","interrupt"),De=[],Ie=0,Te=1,Le=2,ze=3,Oe=4,$e=5,Fe=6;function Ve(t,e,n,r,i,s){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};Be(t,n,{name:e,index:r,group:i,on:Re,tween:De,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ie})}function Ue(t,e){var n=He(t,e);if(n.state>Ie)throw new Error("too late; already scheduled");return n}function qe(t,e){var n=He(t,e);if(n.state>ze)throw new Error("too late; already running");return n}function He(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Be(t,e,n){var r,i=t.__transition;function s(t){n.state=Te,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(s){var u,l,c,f;if(n.state!==Te)return h();for(u in i)if(f=i[u],f.name===n.name){if(f.state===ze)return Ne(o);f.state===Oe?(f.state=Fe,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[u]):+u<e&&(f.state=Fe,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[u])}if(Ne((function(){n.state===ze&&(n.state=Oe,n.timer.restart(a,n.delay,n.time),a(s))})),n.state=Le,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Le){for(n.state=ze,r=new Array(c=n.tween.length),u=0,l=-1;u<c;++u)(f=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=f);r.length=l+1}}function a(e){var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(h),n.state=$e,1),s=-1,o=r.length;while(++s<o)r[s].call(t,i);n.state===$e&&(n.on.call("end",t,t.__data__,n.index,n.group),h())}function h(){for(var r in n.state=Fe,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Se(s,0,n.time)}function je(t,e){var n,r,i,s=t.__transition,o=!0;if(s){for(i in e=null==e?null:e+"",s)(n=s[i]).name===e?(r=n.state>Le&&n.state<$e,n.state=Fe,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[i]):o=!1;o&&delete t.__transition}}function We(t){return this.each((function(){je(this,t)}))}function Xe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Qe,Ge=180/Math.PI,Ye={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ke(t,e,n,r,i,s){var o,a,h;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(h=t*n+e*r)&&(n-=t*h,r-=e*h),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,h/=a),t*r<e*n&&(t=-t,e=-e,h=-h,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Ge,skewX:Math.atan(h)*Ge,scaleX:o,scaleY:a}}function Je(t){const e=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ye:Ke(e.a,e.b,e.c,e.d,e.e,e.f)}function Ze(t){return null==t?Ye:(Qe||(Qe=document.createElementNS("http://www.w3.org/2000/svg","g")),Qe.setAttribute("transform",t),(t=Qe.transform.baseVal.consolidate())?(t=t.matrix,Ke(t.a,t.b,t.c,t.d,t.e,t.f)):Ye)}function tn(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function s(t,r,i,s,o,a){if(t!==i||r!==s){var h=o.push("translate(",null,e,null,n);a.push({i:h-4,x:Xe(t,i)},{i:h-2,x:Xe(r,s)})}else(i||s)&&o.push("translate("+i+e+s+n)}function o(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Xe(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function a(t,e,n,s){t!==e?s.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Xe(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function h(t,e,n,r,s,o){if(t!==n||e!==r){var a=s.push(i(s)+"scale(",null,",",null,")");o.push({i:a-4,x:Xe(t,n)},{i:a-2,x:Xe(e,r)})}else 1===n&&1===r||s.push(i(s)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),s(e.translateX,e.translateY,n.translateX,n.translateY,r,i),o(e.rotate,n.rotate,r,i),a(e.skewX,n.skewX,r,i),h(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){var e,n=-1,s=i.length;while(++n<s)r[(e=i[n]).i]=e.x(t);return r.join("")}}}var en=tn(Je,"px, ","px)","deg)"),nn=tn(Ze,", ",")",")");function rn(t,e){var n,r;return function(){var i=qe(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function sn(t,e,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var s=qe(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},h=0,u=i.length;h<u;++h)if(i[h].name===e){i[h]=a;break}h===u&&i.push(a)}s.tween=i}}function on(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=He(this.node(),n).tween,s=0,o=i.length;s<o;++s)if((r=i[s]).name===t)return r.value;return null}return this.each((null==e?rn:sn)(n,t,e))}function an(t,e,n){var r=t._id;return t.each((function(){var t=qe(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return He(t,r).value[e]}}function hn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function un(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ln(){}var cn=.7,fn=1/cn,pn="\\s*([+-]?\\d+)\\s*",dn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gn=/^#([0-9a-f]{3,8})$/,vn=new RegExp(`^rgb\\(${pn},${pn},${pn}\\)$`),wn=new RegExp(`^rgb\\(${mn},${mn},${mn}\\)$`),yn=new RegExp(`^rgba\\(${pn},${pn},${pn},${dn}\\)$`),bn=new RegExp(`^rgba\\(${mn},${mn},${mn},${dn}\\)$`),_n=new RegExp(`^hsl\\(${dn},${mn},${mn}\\)$`),xn=new RegExp(`^hsla\\(${dn},${mn},${mn},${dn}\\)$`),Mn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Sn(){return this.rgb().formatHex()}function An(){return this.rgb().formatHex8()}function kn(){return Un(this).formatHsl()}function Cn(){return this.rgb().formatRgb()}function En(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=gn.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Pn(e):3===n?new In(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Nn(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Nn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=vn.exec(t))?new In(e[1],e[2],e[3],1):(e=wn.exec(t))?new In(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=yn.exec(t))?Nn(e[1],e[2],e[3],e[4]):(e=bn.exec(t))?Nn(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=_n.exec(t))?Vn(e[1],e[2]/100,e[3]/100,1):(e=xn.exec(t))?Vn(e[1],e[2]/100,e[3]/100,e[4]):Mn.hasOwnProperty(t)?Pn(Mn[t]):"transparent"===t?new In(NaN,NaN,NaN,0):null}function Pn(t){return new In(t>>16&255,t>>8&255,255&t,1)}function Nn(t,e,n,r){return r<=0&&(t=e=n=NaN),new In(t,e,n,r)}function Rn(t){return t instanceof ln||(t=En(t)),t?(t=t.rgb(),new In(t.r,t.g,t.b,t.opacity)):new In}function Dn(t,e,n,r){return 1===arguments.length?Rn(t):new In(t,e,n,null==r?1:r)}function In(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Tn(){return`#${Fn(this.r)}${Fn(this.g)}${Fn(this.b)}`}function Ln(){return`#${Fn(this.r)}${Fn(this.g)}${Fn(this.b)}${Fn(255*(isNaN(this.opacity)?1:this.opacity))}`}function zn(){const t=On(this.opacity);return`${1===t?"rgb(":"rgba("}${$n(this.r)}, ${$n(this.g)}, ${$n(this.b)}${1===t?")":`, ${t})`}`}function On(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $n(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Fn(t){return t=$n(t),(t<16?"0":"")+t.toString(16)}function Vn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Hn(t,e,n,r)}function Un(t){if(t instanceof Hn)return new Hn(t.h,t.s,t.l,t.opacity);if(t instanceof ln||(t=En(t)),!t)return new Hn;if(t instanceof Hn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,h=(s+i)/2;return a?(o=e===s?(n-r)/a+6*(n<r):n===s?(r-e)/a+2:(e-n)/a+4,a/=h<.5?s+i:2-s-i,o*=60):a=h>0&&h<1?0:o,new Hn(o,a,h,t.opacity)}function qn(t,e,n,r){return 1===arguments.length?Un(t):new Hn(t,e,n,null==r?1:r)}function Hn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Bn(t){return t=(t||0)%360,t<0?t+360:t}function jn(t){return Math.max(0,Math.min(1,t||0))}function Wn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Xn(t,e,n,r,i){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*r+o*i)/6}function Qn(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1],o=r>0?t[r-1]:2*i-s,a=r<e-1?t[r+2]:2*s-i;return Xn((n-r/e)*e,o,i,s,a)}}function Gn(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],s=t[r%e],o=t[(r+1)%e],a=t[(r+2)%e];return Xn((n-r/e)*e,i,s,o,a)}}hn(ln,En,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Sn,formatHex:Sn,formatHex8:An,formatHsl:kn,formatRgb:Cn,toString:Cn}),hn(In,Dn,un(ln,{brighter(t){return t=null==t?fn:Math.pow(fn,t),new In(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?cn:Math.pow(cn,t),new In(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new In($n(this.r),$n(this.g),$n(this.b),On(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tn,formatHex:Tn,formatHex8:Ln,formatRgb:zn,toString:zn})),hn(Hn,qn,un(ln,{brighter(t){return t=null==t?fn:Math.pow(fn,t),new Hn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?cn:Math.pow(cn,t),new Hn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new In(Wn(t>=240?t-240:t+120,i,r),Wn(t,i,r),Wn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Hn(Bn(this.h),jn(this.s),jn(this.l),On(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=On(this.opacity);return`${1===t?"hsl(":"hsla("}${Bn(this.h)}, ${100*jn(this.s)}%, ${100*jn(this.l)}%${1===t?")":`, ${t})`}`}}));var Yn=t=>()=>t;function Kn(t,e){return function(n){return t+n*e}}function Jn(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Zn(t){return 1===(t=+t)?tr:function(e,n){return n-e?Jn(e,n,t):Yn(isNaN(e)?n:e)}}function tr(t,e){var n=e-t;return n?Kn(t,n):Yn(isNaN(t)?e:t)}var er=function t(e){var n=Zn(e);function r(t,e){var r=n((t=Dn(t)).r,(e=Dn(e)).r),i=n(t.g,e.g),s=n(t.b,e.b),o=tr(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=s(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function nr(t){return function(e){var n,r,i=e.length,s=new Array(i),o=new Array(i),a=new Array(i);for(n=0;n<i;++n)r=Dn(e[n]),s[n]=r.r||0,o[n]=r.g||0,a[n]=r.b||0;return s=t(s),o=t(o),a=t(a),r.opacity=1,function(t){return r.r=s(t),r.g=o(t),r.b=a(t),r+""}}}nr(Qn),nr(Gn);var rr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ir=new RegExp(rr.source,"g");function sr(t){return function(){return t}}function or(t){return function(e){return t(e)+""}}function ar(t,e){var n,r,i,s=rr.lastIndex=ir.lastIndex=0,o=-1,a=[],h=[];t+="",e+="";while((n=rr.exec(t))&&(r=ir.exec(e)))(i=r.index)>s&&(i=e.slice(s,i),a[o]?a[o]+=i:a[++o]=i),(n=n[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,h.push({i:o,x:Xe(n,r)})),s=ir.lastIndex;return s<e.length&&(i=e.slice(s),a[o]?a[o]+=i:a[++o]=i),a.length<2?h[0]?or(h[0].x):sr(e):(e=h.length,function(t){for(var n,r=0;r<e;++r)a[(n=h[r]).i]=n.x(t);return a.join("")})}function hr(t,e){var n;return("number"===typeof e?Xe:e instanceof En?er:(n=En(e))?(e=n,er):ar)(t,e)}function ur(t){return function(){this.removeAttribute(t)}}function lr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function cr(t,e,n){var r,i,s=n+"";return function(){var o=this.getAttribute(t);return o===s?null:o===r?i:i=e(r=o,n)}}function fr(t,e,n){var r,i,s=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===s?null:o===r?i:i=e(r=o,n)}}function pr(t,e,n){var r,i,s;return function(){var o,a,h=n(this);if(null!=h)return o=this.getAttribute(t),a=h+"",o===a?null:o===r&&a===i?s:(i=a,s=e(r=o,h));this.removeAttribute(t)}}function dr(t,e,n){var r,i,s;return function(){var o,a,h=n(this);if(null!=h)return o=this.getAttributeNS(t.space,t.local),a=h+"",o===a?null:o===r&&a===i?s:(i=a,s=e(r=o,h));this.removeAttributeNS(t.space,t.local)}}function mr(t,e){var n=j(t),r="transform"===n?nn:hr;return this.attrTween(t,"function"===typeof e?(n.local?dr:pr)(n,r,an(this,"attr."+t,e)):null==e?(n.local?lr:ur)(n):(n.local?fr:cr)(n,r,e))}function gr(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function vr(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function wr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&vr(t,i)),n}return i._value=e,i}function yr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&gr(t,i)),n}return i._value=e,i}function br(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!==typeof e)throw new Error;var r=j(t);return this.tween(n,(r.local?wr:yr)(r,e))}function _r(t,e){return function(){Ue(this,t).delay=+e.apply(this,arguments)}}function xr(t,e){return e=+e,function(){Ue(this,t).delay=e}}function Mr(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?_r:xr)(e,t)):He(this.node(),e).delay}function Sr(t,e){return function(){qe(this,t).duration=+e.apply(this,arguments)}}function Ar(t,e){return e=+e,function(){qe(this,t).duration=e}}function kr(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?Sr:Ar)(e,t)):He(this.node(),e).duration}function Cr(t,e){if("function"!==typeof e)throw new Error;return function(){qe(this,t).ease=e}}function Er(t){var e=this._id;return arguments.length?this.each(Cr(e,t)):He(this.node(),e).ease}function Pr(t,e){return function(){var n=e.apply(this,arguments);if("function"!==typeof n)throw new Error;qe(this,t).ease=n}}function Nr(t){if("function"!==typeof t)throw new Error;return this.each(Pr(this._id,t))}function Rr(t){"function"!==typeof t&&(t=c(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,h=r[i]=[],u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&h.push(s);return new oi(r,this._parents,this._name,this._id)}function Dr(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var h,u=e[a],l=n[a],c=u.length,f=o[a]=new Array(c),p=0;p<c;++p)(h=u[p]||l[p])&&(f[p]=h);for(;a<r;++a)o[a]=e[a];return new oi(o,this._parents,this._name,this._id)}function Ir(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}function Tr(t,e,n){var r,i,s=Ir(e)?Ue:qe;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function Lr(t,e){var n=this._id;return arguments.length<2?He(this.node(),n).on.on(t):this.each(Tr(n,t,e))}function zr(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Or(){return this.on("end.remove",zr(this._id))}function $r(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=i(t));for(var r=this._groups,s=r.length,o=new Array(s),a=0;a<s;++a)for(var h,u,l=r[a],c=l.length,f=o[a]=new Array(c),p=0;p<c;++p)(h=l[p])&&(u=t.call(h,h.__data__,p,l))&&("__data__"in h&&(u.__data__=h.__data__),f[p]=u,Ve(f[p],e,n,p,f,He(h,n)));return new oi(o,this._parents,e,n)}function Fr(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=h(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u,l=r[a],c=l.length,f=0;f<c;++f)if(u=l[f]){for(var p,d=t.call(u,u.__data__,f,l),m=He(u,n),g=0,v=d.length;g<v;++g)(p=d[g])&&Ve(p,e,n,g,d,m);s.push(d),o.push(u)}return new oi(s,o,e,n)}var Vr=ne.prototype.constructor;function Ur(){return new Vr(this._groups,this._parents)}function qr(t,e){var n,r,i;return function(){var s=it(this,t),o=(this.style.removeProperty(t),it(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function Hr(t){return function(){this.style.removeProperty(t)}}function Br(t,e,n){var r,i,s=n+"";return function(){var o=it(this,t);return o===s?null:o===r?i:i=e(r=o,n)}}function jr(t,e,n){var r,i,s;return function(){var o=it(this,t),a=n(this),h=a+"";return null==a&&(this.style.removeProperty(t),h=a=it(this,t)),o===h?null:o===r&&h===i?s:(i=h,s=e(r=o,a))}}function Wr(t,e){var n,r,i,s,o="style."+e,a="end."+o;return function(){var h=qe(this,t),u=h.on,l=null==h.value[o]?s||(s=Hr(e)):void 0;u===n&&i===l||(r=(n=u).copy()).on(a,i=l),h.on=r}}function Xr(t,e,n){var r="transform"===(t+="")?en:hr;return null==e?this.styleTween(t,qr(t,r)).on("end.style."+t,Hr(t)):"function"===typeof e?this.styleTween(t,jr(t,r,an(this,"style."+t,e))).each(Wr(this._id,t)):this.styleTween(t,Br(t,r,e),n).on("end.style."+t,null)}function Qr(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Gr(t,e,n){var r,i;function s(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Qr(t,s,n)),r}return s._value=e,s}function Yr(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!==typeof e)throw new Error;return this.tween(r,Gr(t,e,null==n?"":n))}function Kr(t){return function(){this.textContent=t}}function Jr(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function Zr(t){return this.tween("text","function"===typeof t?Jr(an(this,"text",t)):Kr(null==t?"":t+""))}function ti(t){return function(e){this.textContent=t.call(this,e)}}function ei(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&ti(r)),e}return r._value=t,r}function ni(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!==typeof t)throw new Error;return this.tween(e,ei(t))}function ri(){for(var t=this._name,e=this._id,n=hi(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],h=a.length,u=0;u<h;++u)if(o=a[u]){var l=He(o,e);Ve(o,t,n,u,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new oi(r,this._parents,t,n)}function ii(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(s,o){var a={value:o},h={value:function(){0===--i&&s()}};n.each((function(){var n=qe(this,r),i=n.on;i!==t&&(e=(t=i).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(h)),n.on=e})),0===i&&s()}))}var si=0;function oi(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ai(t){return ne().transition(t)}function hi(){return++si}var ui=ne.prototype;function li(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}oi.prototype=ai.prototype={constructor:oi,select:$r,selectAll:Fr,selectChild:ui.selectChild,selectChildren:ui.selectChildren,filter:Rr,merge:Dr,selection:Ur,transition:ri,call:ui.call,nodes:ui.nodes,node:ui.node,size:ui.size,empty:ui.empty,each:ui.each,on:Lr,attr:mr,attrTween:br,style:Xr,styleTween:Yr,text:Zr,textTween:ni,remove:Or,tween:on,delay:Mr,duration:kr,ease:Er,easeVarying:Nr,end:ii,[Symbol.iterator]:ui[Symbol.iterator]};var ci={time:null,delay:0,duration:250,ease:li};function fi(t,e){var n;while(!(n=t.__transition)||!(n=n[e]))if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function pi(t){var e,n;t instanceof oi?(e=t._id,t=t._name):(e=hi(),(n=ci).time=_e(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],h=a.length,u=0;u<h;++u)(o=a[u])&&Ve(o,t,e,u,a,n||fi(o,e));return new oi(r,this._parents,t,e)}ne.prototype.interrupt=We,ne.prototype.transition=pi;const{abs:di,max:mi,min:gi}=Math;function vi(t){return[+t[0],+t[1]]}function wi(t){return[vi(t[0]),vi(t[1])]}["w","e"].map(yi),["n","s"].map(yi),["n","w","e","s","nw","ne","sw","se"].map(yi);function yi(t){return{type:t}}function bi(t){return"string"===typeof t?new Zt([[document.querySelector(t)]],[document.documentElement]):new Zt([[t]],Jt)}Array.prototype.slice;function _i(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function xi(t){return function(){return t}}function Mi(t){this._context=t}function Si(t){return new Mi(t)}Mi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};const Ai=Math.PI,ki=2*Ai,Ci=1e-6,Ei=ki-Ci;function Pi(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Ni(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Pi;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}class Ri{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?Pi:Ni(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,s){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+s}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,o=this._y1,a=n-t,h=r-e,u=s-t,l=o-e,c=u*u+l*l;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(c>Ci)if(Math.abs(l*a-h*u)>Ci&&i){let f=n-s,p=r-o,d=a*a+h*h,m=f*f+p*p,g=Math.sqrt(d),v=Math.sqrt(c),w=i*Math.tan((Ai-Math.acos((d+c-m)/(2*g*v)))/2),y=w/v,b=w/g;Math.abs(y-1)>Ci&&this._append`L${t+y*u},${e+y*l}`,this._append`A${i},${i},0,0,${+(l*f>u*p)},${this._x1=t+b*a},${this._y1=e+b*h}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,n,r,i,s){if(t=+t,e=+e,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(r),a=n*Math.sin(r),h=t+o,u=e+a,l=1^s,c=s?r-i:i-r;null===this._x1?this._append`M${h},${u}`:(Math.abs(this._x1-h)>Ci||Math.abs(this._y1-u)>Ci)&&this._append`L${h},${u}`,n&&(c<0&&(c=c%ki+ki),c>Ei?this._append`A${n},${n},0,1,${l},${t-o},${e-a}A${n},${n},0,1,${l},${this._x1=h},${this._y1=u}`:c>Ci&&this._append`A${n},${n},0,${+(c>=Ai)},${l},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function Di(){return new Ri}function Ii(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new Ri(e)}function Ti(t){return t[0]}function Li(t){return t[1]}function zi(t,e){var n=xi(!0),r=null,i=Si,s=null,o=Ii(a);function a(a){var h,u,l,c=(a=_i(a)).length,f=!1;for(null==r&&(s=i(l=o())),h=0;h<=c;++h)!(h<c&&n(u=a[h],h,a))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(u,h,a),+e(u,h,a));if(l)return s=null,l+""||null}return t="function"===typeof t?t:void 0===t?Ti:xi(t),e="function"===typeof e?e:void 0===e?Li:xi(e),a.x=function(e){return arguments.length?(t="function"===typeof e?e:xi(+e),a):t},a.y=function(t){return arguments.length?(e="function"===typeof t?t:xi(+t),a):e},a.defined=function(t){return arguments.length?(n="function"===typeof t?t:xi(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(s=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=s=null:s=i(r=t),a):r},a}function Oi(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function $i(t){this._context=t}function Fi(t){return new $i(t)}function Vi(t,e,n){this.k=t,this.x=e,this.y=n}Di.prototype=Ri.prototype,$i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Oi(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Oi(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Vi.prototype={constructor:Vi,scale:function(t){return 1===t?this:new Vi(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Vi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ui=new Vi(1,0,0);function qi(t){while(!t.__zoom)if(!(t=t.parentNode))return Ui;return t.__zoom}qi.prototype=Vi.prototype}}]);
//# sourceMappingURL=505-legacy.025b1085.js.map